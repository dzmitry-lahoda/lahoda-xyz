<!DOCTYPE html>
<!-- saved from url=(0088)chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf -->
<html dir="ltr" mozdisallowselectionprint=""><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="google" content="notranslate">
    <title>2107.12484.pdf</title>

<!-- This snippet is used in the Chromium extension (included from viewer.html) -->
<!--<base href="/content/web/">--><base href=".">
<link rel="resource" type="application/l10n" href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/content/web/locale/locale.properties">
<script src="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/content/build/pdf.js"></script>


    <link rel="stylesheet" href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/content/web/viewer.css">



    <script src="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/content/web/viewer.js"></script>

  </head>

  <body tabindex="1" class="">
    <div id="outerContainer" class="sidebarOpen">

      <div id="sidebarContainer">
        <div id="toolbarSidebar">
          <div class="splitToolbarButton toggled">
            <button id="viewThumbnail" class="toolbarButton" title="Show Thumbnails" tabindex="2" data-l10n-id="thumbs">
               <span data-l10n-id="thumbs_label">Thumbnails</span>
            </button>
            <button id="viewOutline" class="toolbarButton toggled" title="Show Document Outline (double-click to expand/collapse all items)" tabindex="3" data-l10n-id="document_outline">
               <span data-l10n-id="document_outline_label">Document Outline</span>
            </button>
            <button id="viewAttachments" class="toolbarButton" title="Show Attachments" tabindex="4" data-l10n-id="attachments" disabled="">
               <span data-l10n-id="attachments_label">Attachments</span>
            </button>
          </div>
        </div>
        <div id="sidebarContent">
          <div id="thumbnailView" class="hidden"><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#page=1" title="Page 1"><div class="thumbnail selected" data-page-number="1"><div class="thumbnailSelectionRing" style="width: 100px; height: 128px;"></div></div></a><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#page=2" title="Page 2"><div class="thumbnail" data-page-number="2"><div class="thumbnailSelectionRing" style="width: 100px; height: 128px;"></div></div></a><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#page=3" title="Page 3"><div class="thumbnail" data-page-number="3"><div class="thumbnailSelectionRing" style="width: 100px; height: 128px;"></div></div></a><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#page=4" title="Page 4"><div class="thumbnail" data-page-number="4"><div class="thumbnailSelectionRing" style="width: 100px; height: 128px;"></div></div></a><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#page=5" title="Page 5"><div class="thumbnail" data-page-number="5"><div class="thumbnailSelectionRing" style="width: 100px; height: 128px;"></div></div></a><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#page=6" title="Page 6"><div class="thumbnail" data-page-number="6"><div class="thumbnailSelectionRing" style="width: 100px; height: 128px;"></div></div></a><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#page=7" title="Page 7"><div class="thumbnail" data-page-number="7"><div class="thumbnailSelectionRing" style="width: 100px; height: 128px;"></div></div></a><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#page=8" title="Page 8"><div class="thumbnail" data-page-number="8"><div class="thumbnailSelectionRing" style="width: 100px; height: 128px;"></div></div></a><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#page=9" title="Page 9"><div class="thumbnail" data-page-number="9"><div class="thumbnailSelectionRing" style="width: 100px; height: 128px;"></div></div></a><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#page=10" title="Page 10"><div class="thumbnail" data-page-number="10"><div class="thumbnailSelectionRing" style="width: 100px; height: 128px;"></div></div></a><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#page=11" title="Page 11"><div class="thumbnail" data-page-number="11"><div class="thumbnailSelectionRing" style="width: 100px; height: 128px;"></div></div></a><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#page=12" title="Page 12"><div class="thumbnail" data-page-number="12"><div class="thumbnailSelectionRing" style="width: 100px; height: 128px;"></div></div></a><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#page=13" title="Page 13"><div class="thumbnail" data-page-number="13"><div class="thumbnailSelectionRing" style="width: 100px; height: 128px;"></div></div></a><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#page=14" title="Page 14"><div class="thumbnail" data-page-number="14"><div class="thumbnailSelectionRing" style="width: 100px; height: 128px;"></div></div></a><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#page=15" title="Page 15"><div class="thumbnail" data-page-number="15"><div class="thumbnailSelectionRing" style="width: 100px; height: 128px;"></div></div></a><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#page=16" title="Page 16"><div class="thumbnail" data-page-number="16"><div class="thumbnailSelectionRing" style="width: 100px; height: 128px;"></div></div></a><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#page=17" title="Page 17"><div class="thumbnail" data-page-number="17"><div class="thumbnailSelectionRing" style="width: 100px; height: 128px;"></div></div></a><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#page=18" title="Page 18"><div class="thumbnail" data-page-number="18"><div class="thumbnailSelectionRing" style="width: 100px; height: 128px;"></div></div></a><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#page=19" title="Page 19"><div class="thumbnail" data-page-number="19"><div class="thumbnailSelectionRing" style="width: 100px; height: 128px;"></div></div></a><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#page=20" title="Page 20"><div class="thumbnail" data-page-number="20"><div class="thumbnailSelectionRing" style="width: 100px; height: 128px;"></div></div></a><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#page=21" title="Page 21"><div class="thumbnail" data-page-number="21"><div class="thumbnailSelectionRing" style="width: 100px; height: 128px;"></div></div></a><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#page=22" title="Page 22"><div class="thumbnail" data-page-number="22"><div class="thumbnailSelectionRing" style="width: 100px; height: 128px;"></div></div></a><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#page=23" title="Page 23"><div class="thumbnail" data-page-number="23"><div class="thumbnailSelectionRing" style="width: 100px; height: 128px;"></div></div></a><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#page=24" title="Page 24"><div class="thumbnail" data-page-number="24"><div class="thumbnailSelectionRing" style="width: 100px; height: 128px;"></div></div></a><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#page=25" title="Page 25"><div class="thumbnail" data-page-number="25"><div class="thumbnailSelectionRing" style="width: 100px; height: 128px;"></div></div></a><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#page=26" title="Page 26"><div class="thumbnail" data-page-number="26"><div class="thumbnailSelectionRing" style="width: 100px; height: 128px;"></div></div></a><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#page=27" title="Page 27"><div class="thumbnail" data-page-number="27"><div class="thumbnailSelectionRing" style="width: 100px; height: 128px;"></div></div></a><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#page=28" title="Page 28"><div class="thumbnail" data-page-number="28"><div class="thumbnailSelectionRing" style="width: 100px; height: 128px;"></div></div></a><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#page=29" title="Page 29"><div class="thumbnail" data-page-number="29"><div class="thumbnailSelectionRing" style="width: 100px; height: 128px;"></div></div></a><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#page=30" title="Page 30"><div class="thumbnail" data-page-number="30"><div class="thumbnailSelectionRing" style="width: 100px; height: 128px;"></div></div></a><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#page=31" title="Page 31"><div class="thumbnail" data-page-number="31"><div class="thumbnailSelectionRing" style="width: 100px; height: 128px;"></div></div></a></div>
          <div id="outlineView" class="outlineWithDeepNesting"><div class="outlineItem"><div class="outlineItemToggler"></div><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#section.1">1 Introduction</a><div class="outlineItems"><div class="outlineItem"><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#subsection.1.1">1.1 Background and related work</a></div><div class="outlineItem"><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#subsection.1.2">1.2 Convex analysis and optimization</a></div></div></div><div class="outlineItem"><div class="outlineItemToggler"></div><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#section.2">2 Constant function market makers</a><div class="outlineItems"><div class="outlineItem"><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#subsection.2.1">2.1 CFMM state</a></div><div class="outlineItem"><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#subsection.2.2">2.2 Proposed trade</a></div><div class="outlineItem"><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#subsection.2.3">2.3 Trading function</a></div><div class="outlineItem"><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#subsection.2.4">2.4 Trading function examples</a></div><div class="outlineItem"><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#subsection.2.5">2.5 Prices and exchange rates</a></div><div class="outlineItem"><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#subsection.2.6">2.6 Adding and removing liquidity</a></div><div class="outlineItem"><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#subsection.2.7">2.7 Agents interacting with CFMMs</a></div></div></div><div class="outlineItem"><div class="outlineItemToggler"></div><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#section.3">3 Properties</a><div class="outlineItems"><div class="outlineItem"><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#subsection.3.1">3.1 Properties of trades</a></div><div class="outlineItem"><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#subsection.3.2">3.2 Properties of liquidity changes</a></div></div></div><div class="outlineItem"><div class="outlineItemToggler"></div><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#section.4">4 Two-asset trades</a><div class="outlineItems"><div class="outlineItem"><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#subsection.4.1">4.1 Exchange functions</a></div><div class="outlineItem"><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#subsection.4.2">4.2 Exchanging multiples of two baskets</a></div></div></div><div class="outlineItem"><div class="outlineItemToggler"></div><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#section.5">5 Multi-asset trades</a><div class="outlineItems"><div class="outlineItem"><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#subsection.5.1">5.1 The general trade choice problem</a></div><div class="outlineItem"><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#subsection.5.2">5.2 Special cases</a></div><div class="outlineItem"><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#subsection.5.3">5.3 Numerical examples</a></div></div></div><div class="outlineItem"><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#section.6">6 Conclusion</a></div></div>
          <div id="attachmentsView" class="hidden"></div>
        </div>
        <div id="sidebarResizer" class=""></div>
      </div>  <!-- sidebarContainer -->

      <div id="mainContainer">
        <div class="findbar hidden doorHanger" id="findbar">
          <div id="findbarInputContainer">
            <input id="findInput" class="toolbarField" title="Find" placeholder="Find in document…" tabindex="91" data-l10n-id="find_input">
            <div class="splitToolbarButton">
              <button id="findPrevious" class="toolbarButton findPrevious" title="Find the previous occurrence of the phrase" tabindex="92" data-l10n-id="find_previous">
                <span data-l10n-id="find_previous_label">Previous</span>
              </button>
              <div class="splitToolbarButtonSeparator"></div>
              <button id="findNext" class="toolbarButton findNext" title="Find the next occurrence of the phrase" tabindex="93" data-l10n-id="find_next">
                <span data-l10n-id="find_next_label">Next</span>
              </button>
            </div>
          </div>

          <div id="findbarOptionsOneContainer">
            <input type="checkbox" id="findHighlightAll" class="toolbarField" tabindex="94">
            <label for="findHighlightAll" class="toolbarLabel" data-l10n-id="find_highlight">Highlight all</label>
            <input type="checkbox" id="findMatchCase" class="toolbarField" tabindex="95">
            <label for="findMatchCase" class="toolbarLabel" data-l10n-id="find_match_case_label">Match case</label>
          </div>
          <div id="findbarOptionsTwoContainer">
            <input type="checkbox" id="findEntireWord" class="toolbarField" tabindex="96">
            <label for="findEntireWord" class="toolbarLabel" data-l10n-id="find_entire_word_label">Whole words</label>
            <span id="findResultsCount" class="toolbarLabel hidden"></span>
          </div>

          <div id="findbarMessageContainer">
            <span id="findMsg" class="toolbarLabel"></span>
          </div>
        </div>  <!-- findbar -->

        <div id="secondaryToolbar" class="secondaryToolbar hidden doorHangerRight">
          <div id="secondaryToolbarButtonContainer">
            <button id="secondaryPresentationMode" class="secondaryToolbarButton presentationMode visibleLargeView" title="Switch to Presentation Mode" tabindex="51" data-l10n-id="presentation_mode">
              <span data-l10n-id="presentation_mode_label">Presentation Mode</span>
            </button>

            <button id="secondaryOpenFile" class="secondaryToolbarButton openFile visibleLargeView" title="Open File" tabindex="52" data-l10n-id="open_file" hidden="true">
              <span data-l10n-id="open_file_label">Open</span>
            </button>

            <button id="secondaryPrint" class="secondaryToolbarButton print visibleMediumView" title="Print" tabindex="53" data-l10n-id="print">
              <span data-l10n-id="print_label">Print</span>
            </button>

            <button id="secondaryDownload" class="secondaryToolbarButton download visibleMediumView" title="Download" tabindex="54" data-l10n-id="download">
              <span data-l10n-id="download_label">Download</span>
            </button>

            <a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#page=1&amp;zoom=auto,-85,191" id="secondaryViewBookmark" class="secondaryToolbarButton bookmark visibleSmallView" title="Current view (copy or open in new window)" tabindex="55" data-l10n-id="bookmark">
              <span data-l10n-id="bookmark_label">Current View</span>
            </a>

            <div class="horizontalToolbarSeparator visibleLargeView"></div>

            <button id="firstPage" class="secondaryToolbarButton firstPage" title="Go to First Page" tabindex="56" data-l10n-id="first_page">
              <span data-l10n-id="first_page_label">Go to First Page</span>
            </button>
            <button id="lastPage" class="secondaryToolbarButton lastPage" title="Go to Last Page" tabindex="57" data-l10n-id="last_page">
              <span data-l10n-id="last_page_label">Go to Last Page</span>
            </button>

            <div class="horizontalToolbarSeparator"></div>

            <button id="pageRotateCw" class="secondaryToolbarButton rotateCw" title="Rotate Clockwise" tabindex="58" data-l10n-id="page_rotate_cw">
              <span data-l10n-id="page_rotate_cw_label">Rotate Clockwise</span>
            </button>
            <button id="pageRotateCcw" class="secondaryToolbarButton rotateCcw" title="Rotate Counterclockwise" tabindex="59" data-l10n-id="page_rotate_ccw">
              <span data-l10n-id="page_rotate_ccw_label">Rotate Counterclockwise</span>
            </button>

            <div class="horizontalToolbarSeparator"></div>

            <button id="cursorSelectTool" class="secondaryToolbarButton selectTool toggled" title="Enable Text Selection Tool" tabindex="60" data-l10n-id="cursor_text_select_tool">
              <span data-l10n-id="cursor_text_select_tool_label">Text Selection Tool</span>
            </button>
            <button id="cursorHandTool" class="secondaryToolbarButton handTool" title="Enable Hand Tool" tabindex="61" data-l10n-id="cursor_hand_tool">
              <span data-l10n-id="cursor_hand_tool_label">Hand Tool</span>
            </button>

            <div class="horizontalToolbarSeparator"></div>

            <button id="scrollVertical" class="secondaryToolbarButton scrollModeButtons scrollVertical toggled" title="Use Vertical Scrolling" tabindex="62" data-l10n-id="scroll_vertical">
              <span data-l10n-id="scroll_vertical_label">Vertical Scrolling</span>
            </button>
            <button id="scrollHorizontal" class="secondaryToolbarButton scrollModeButtons scrollHorizontal" title="Use Horizontal Scrolling" tabindex="63" data-l10n-id="scroll_horizontal">
              <span data-l10n-id="scroll_horizontal_label">Horizontal Scrolling</span>
            </button>
            <button id="scrollWrapped" class="secondaryToolbarButton scrollModeButtons scrollWrapped" title="Use Wrapped Scrolling" tabindex="64" data-l10n-id="scroll_wrapped">
              <span data-l10n-id="scroll_wrapped_label">Wrapped Scrolling</span>
            </button>

            <div class="horizontalToolbarSeparator scrollModeButtons"></div>

            <button id="spreadNone" class="secondaryToolbarButton spreadModeButtons spreadNone toggled" title="Do not join page spreads" tabindex="65" data-l10n-id="spread_none">
              <span data-l10n-id="spread_none_label">No Spreads</span>
            </button>
            <button id="spreadOdd" class="secondaryToolbarButton spreadModeButtons spreadOdd" title="Join page spreads starting with odd-numbered pages" tabindex="66" data-l10n-id="spread_odd">
              <span data-l10n-id="spread_odd_label">Odd Spreads</span>
            </button>
            <button id="spreadEven" class="secondaryToolbarButton spreadModeButtons spreadEven" title="Join page spreads starting with even-numbered pages" tabindex="67" data-l10n-id="spread_even">
              <span data-l10n-id="spread_even_label">Even Spreads</span>
            </button>

            <div class="horizontalToolbarSeparator spreadModeButtons"></div>

            <button id="documentProperties" class="secondaryToolbarButton documentProperties" title="Document Properties…" tabindex="68" data-l10n-id="document_properties">
              <span data-l10n-id="document_properties_label">Document Properties…</span>
            </button>
          </div>
        </div>  <!-- secondaryToolbar -->

        <div class="toolbar">
          <div id="toolbarContainer">
            <div id="toolbarViewer">
              <div id="toolbarViewerLeft">
                <button id="sidebarToggle" class="toolbarButton toggled" title="Toggle Sidebar (document contains outline/attachments)" tabindex="11" data-l10n-id="toggle_sidebar">
                  <span data-l10n-id="toggle_sidebar_label">Toggle Sidebar</span>
                </button>
                <div class="toolbarButtonSpacer"></div>
                <button id="viewFind" class="toolbarButton" title="Find in Document" tabindex="12" data-l10n-id="findbar">
                  <span data-l10n-id="findbar_label">Find</span>
                </button>
                <div class="splitToolbarButton hiddenSmallView">
                  <button class="toolbarButton pageUp" title="Previous Page" id="previous" tabindex="13" data-l10n-id="previous">
                    <span data-l10n-id="previous_label">Previous</span>
                  </button>
                  <div class="splitToolbarButtonSeparator"></div>
                  <button class="toolbarButton pageDown" title="Next Page" id="next" tabindex="14" data-l10n-id="next">
                    <span data-l10n-id="next_label">Next</span>
                  </button>
                </div>
                <input type="number" id="pageNumber" class="toolbarField pageNumber" title="Page" value="1" size="4" min="1" tabindex="15" data-l10n-id="page" max="31">
                <span id="numPages" class="toolbarLabel">of 31</span>
              </div>
              <div id="toolbarViewerRight">
                <button id="presentationMode" class="toolbarButton presentationMode hiddenLargeView" title="Switch to Presentation Mode" tabindex="31" data-l10n-id="presentation_mode">
                  <span data-l10n-id="presentation_mode_label">Presentation Mode</span>
                </button>

                <button id="openFile" class="toolbarButton openFile hiddenLargeView" title="Open File" tabindex="32" data-l10n-id="open_file" hidden="true">
                  <span data-l10n-id="open_file_label">Open</span>
                </button>

                <button id="print" class="toolbarButton print hiddenMediumView" title="Print" tabindex="33" data-l10n-id="print">
                  <span data-l10n-id="print_label">Print</span>
                </button>

                <button id="download" class="toolbarButton download hiddenMediumView" title="Download" tabindex="34" data-l10n-id="download">
                  <span data-l10n-id="download_label">Download</span>
                </button>
                <a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#page=1&amp;zoom=auto,-85,191" id="viewBookmark" class="toolbarButton bookmark hiddenSmallView" title="Current view (copy or open in new window)" tabindex="35" data-l10n-id="bookmark">
                  <span data-l10n-id="bookmark_label">Current View</span>
                </a>

                <div class="verticalToolbarSeparator hiddenSmallView"></div>

                <button id="secondaryToolbarToggle" class="toolbarButton" title="Tools" tabindex="36" data-l10n-id="tools">
                  <span data-l10n-id="tools_label">Tools</span>
                </button>
              </div>
              <div id="toolbarViewerMiddle">
                <div class="splitToolbarButton">
                  <button id="zoomOut" class="toolbarButton zoomOut" title="Zoom Out" tabindex="21" data-l10n-id="zoom_out">
                    <span data-l10n-id="zoom_out_label">Zoom Out</span>
                  </button>
                  <div class="splitToolbarButtonSeparator"></div>
                  <button id="zoomIn" class="toolbarButton zoomIn" title="Zoom In" tabindex="22" data-l10n-id="zoom_in">
                    <span data-l10n-id="zoom_in_label">Zoom In</span>
                   </button>
                </div>
                <span id="scaleSelectContainer" class="dropdownToolbarButton" style="min-width: 116px; max-width: 116px;">
                  <select id="scaleSelect" title="Zoom" tabindex="23" data-l10n-id="zoom" style="min-width: 138px;">
                    <option id="pageAutoOption" title="" value="auto" selected="selected" data-l10n-id="page_scale_auto">Automatic Zoom</option>
                    <option id="pageActualOption" title="" value="page-actual" data-l10n-id="page_scale_actual">Actual Size</option>
                    <option id="pageFitOption" title="" value="page-fit" data-l10n-id="page_scale_fit">Page Fit</option>
                    <option id="pageWidthOption" title="" value="page-width" data-l10n-id="page_scale_width">Page Width</option>
                    <option id="customScaleOption" title="" value="custom" disabled="disabled" hidden="true"></option>
                    <option title="" value="0.5" data-l10n-id="page_scale_percent" data-l10n-args="{ &quot;scale&quot;: 50 }">50%</option>
                    <option title="" value="0.75" data-l10n-id="page_scale_percent" data-l10n-args="{ &quot;scale&quot;: 75 }">75%</option>
                    <option title="" value="1" data-l10n-id="page_scale_percent" data-l10n-args="{ &quot;scale&quot;: 100 }">100%</option>
                    <option title="" value="1.25" data-l10n-id="page_scale_percent" data-l10n-args="{ &quot;scale&quot;: 125 }">125%</option>
                    <option title="" value="1.5" data-l10n-id="page_scale_percent" data-l10n-args="{ &quot;scale&quot;: 150 }">150%</option>
                    <option title="" value="2" data-l10n-id="page_scale_percent" data-l10n-args="{ &quot;scale&quot;: 200 }">200%</option>
                    <option title="" value="3" data-l10n-id="page_scale_percent" data-l10n-args="{ &quot;scale&quot;: 300 }">300%</option>
                    <option title="" value="4" data-l10n-id="page_scale_percent" data-l10n-args="{ &quot;scale&quot;: 400 }">400%</option>
                  </select>
                </span>
              </div>
            </div>
            <div id="loadingBar" class="hidden">
              <div class="progress" style="height: 100%; width: 100%;">
                <div class="glimmer">
                </div>
              </div>
            </div>
          </div>
        </div>

        <menu type="context" id="viewerContextMenu">
          <menuitem id="contextFirstPage" label="First Page" data-l10n-id="first_page" title="Go to First Page"></menuitem>
          <menuitem id="contextLastPage" label="Last Page" data-l10n-id="last_page" title="Go to Last Page"></menuitem>
          <menuitem id="contextPageRotateCw" label="Rotate Clockwise" data-l10n-id="page_rotate_cw" title="Rotate Clockwise"></menuitem>
          <menuitem id="contextPageRotateCcw" label="Rotate Counter-Clockwise" data-l10n-id="page_rotate_ccw" title="Rotate Counterclockwise"></menuitem>
        </menu>

        <div id="viewerContainer" tabindex="0">
          <div id="viewer" class="pdfViewer"><div class="page" data-page-number="1" style="width: 1019px; height: 1319px;" data-loaded="true"><div class="canvasWrapper" style="width: 1019px; height: 1319px;"><canvas id="page1" width="2550" height="3300" style="width: 1020px; height: 1320px;"></canvas></div><div class="textLayer" style="width: 1019px; height: 1319px;"><span style="left: 128.208px; top: 196.557px; font-size: 34.4375px; font-family: sans-serif; transform: scaleX(0.929727);">Constant Function Market Makers: Multi-Asset Trades</span><span style="left: 336.918px; top: 238.067px; font-size: 34.4375px; font-family: sans-serif; transform: scaleX(0.932707);">via Convex Optimization</span><span style="left: 187.215px; top: 303.187px; font-size: 23.9103px; font-family: sans-serif; transform: scaleX(0.983865);">Guillermo Angeris</span><span style="left: 185.225px; top: 339.899px; font-size: 18.1818px; font-family: monospace; transform: scaleX(0.872497);">angeris@stanford.edu</span><span style="left: 445.467px; top: 303.187px; font-size: 23.9103px; font-family: sans-serif; transform: scaleX(0.975798);">Akshay Agrawal</span><span style="left: 428.865px; top: 339.899px; font-size: 18.1818px; font-family: monospace; transform: scaleX(0.872497);">akshayka@stanford.edu</span><span style="left: 700.637px; top: 303.187px; font-size: 23.9103px; font-family: sans-serif; transform: scaleX(0.966253);">Alex Evans</span><span style="left: 682.048px; top: 339.899px; font-size: 18.1818px; font-family: monospace; transform: scaleX(0.872497);">ahe4nc@gmail.com</span><span style="left: 325.743px; top: 374.669px; font-size: 23.9103px; font-family: sans-serif; transform: scaleX(1.04392);">Tarun Chitra</span><span style="left: 288.703px; top: 411.381px; font-size: 18.1818px; font-family: monospace; transform: scaleX(0.872497);">tarun@gauntlet.network</span><span style="left: 578.788px; top: 374.669px; font-size: 23.9103px; font-family: sans-serif; transform: scaleX(0.950388);">Stephen Boyd</span><span style="left: 569.025px; top: 411.381px; font-size: 18.1818px; font-family: monospace; transform: scaleX(0.872497);">boyd@stanford.edu</span><span style="left: 460.74px; top: 451.299px; font-size: 23.9103px; font-family: sans-serif; transform: scaleX(0.962657);">July 2021</span><span style="left: 469.998px; top: 530.045px; font-size: 18.1818px; font-family: sans-serif; transform: scaleX(1.20023);">Abstract</span><span style="left: 196.048px; top: 563.758px; font-size: 18.1818px; font-family: sans-serif; transform: scaleX(1.01509);">The rise of Ethereum and other blockchains that support smart contracts has led</span><span style="left: 168.775px; top: 586.34px; font-size: 18.1818px; font-family: sans-serif; transform: scaleX(0.979197);">to the creation of decentralized exchanges (DEXs), such as Uniswap, Balancer, Curve,</span><span style="left: 168.775px; top: 608.923px; font-size: 18.1818px; font-family: sans-serif; transform: scaleX(0.984889);">mStable, and SushiSwap, which enable agents to trade cryptocurrencies without trust-</span><span style="left: 168.775px; top: 631.505px; font-size: 18.1818px; font-family: sans-serif; transform: scaleX(0.962935);">ing  a  centralized  authority.   While  traditional  exchanges  use  order  books  to  match</span><span style="left: 168.775px; top: 654.087px; font-size: 18.1818px; font-family: sans-serif; transform: scaleX(0.990702);">and execute trades, DEXs are typically organized as constant function market makers</span><span style="left: 168.775px; top: 676.668px; font-size: 18.1818px; font-family: sans-serif; transform: scaleX(1.02221);">(CFMMs).  CFMMs accept and reject proposed trades based on the evaluation of a</span><span style="left: 168.775px; top: 699.25px; font-size: 18.1818px; font-family: sans-serif; transform: scaleX(0.990589);">function that depends on the proposed trade and the current reserves of the DEX. For</span><span style="left: 168.775px; top: 721.833px; font-size: 18.1818px; font-family: sans-serif; transform: scaleX(0.995103);">trades that involve only two assets, CFMMs are easy to understand, via two functions</span><span style="left: 168.775px; top: 744.415px; font-size: 18.1818px; font-family: sans-serif; transform: scaleX(0.989117);">that give the quantity of one asset that must be tendered to receive a given quantity of</span><span style="left: 168.775px; top: 766.997px; font-size: 18.1818px; font-family: sans-serif; transform: scaleX(0.963783);">the other, and vice versa.  When more than two assets are being exchanged, it is harder</span><span style="left: 168.775px; top: 789.578px; font-size: 18.1818px; font-family: sans-serif; transform: scaleX(0.992564);">to understand the landscape of possible trades.  We observe that various problems of</span><span style="left: 168.775px; top: 812.16px; font-size: 18.1818px; font-family: sans-serif; transform: scaleX(0.993573);">choosing a multi-asset trade can be formulated as convex optimization problems, and</span><span style="left: 168.775px; top: 834.742px; font-size: 18.1818px; font-family: sans-serif; transform: scaleX(0.99206);">can therefore be reliably and efficiently solved.</span><span style="left: 120px; top: 894.004px; font-size: 28.6923px; font-family: sans-serif; transform: scaleX(1.14315);">1    Introduction</span><span style="left: 120px; top: 942.781px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.926265);">In the past few years, several new financial exchanges have been implemented on blockchains,</span><span style="left: 120px; top: 966.858px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.915584);">which  are  distributed  and  permissionless  ledgers  replicated  across  networks  of  computers.</span><span style="left: 120px; top: 990.934px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.90318);">These</span><span style="left: 177.005px; top: 992.05px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.874893);">decentralized  exchanges</span><span style="left: 383.195px; top: 990.934px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.979013);">(DEXs) enable agents to trade cryptocurrencies,</span><span style="left: 806.315px; top: 992.05px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.01298);">i.e.</span><span style="left: 833.213px; top: 990.934px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.05894);">, digital</span><span style="left: 120px; top: 1015.01px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.985905);">currencies with account balances stored on a blockchain, without relying on a trusted third</span><span style="left: 120px; top: 1039.09px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.00271);">party to facilitate the exchange.  DEXs have significant capital flowing through them;  the</span><span style="left: 120px; top: 1063.16px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.987353);">four largest DEXs on the Ethereum blockchain (Curve Finance [Ego19], Uniswap [ZCP18,</span><span style="left: 120px; top: 1087.24px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.965742);">AZS</span><span style="left: 157.387px; top: 1084.99px; font-size: 13.2835px; font-family: sans-serif;">+</span><span style="left: 169.195px; top: 1087.24px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.925037);">21],  SushiSwap  [Sus20],  and  Balancer  [MM19])  have  a  collective  trading  volume  of</span><span style="left: 120px; top: 1111.32px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.977647);">several billion dollars per day.</span><span style="left: 505.123px; top: 1185.06px; font-size: 19.9253px; font-family: sans-serif;">1</span><span style="left: 20px; top: 950px; font-size: 33.3333px; font-family: serif; transform: rotate(-90deg) scaleX(1.00019);">arXiv:2107.12484v1  [math.OC]  26 Jul 2021</span><div class="endOfContent"></div></div><div class="annotationLayer"><section data-annotation-id="92R" class="linkAnnotation" style="transform: matrix(1.66667, 0, 0, 1.66667, 0, 0); transform-origin: -406.687px -636.901px; left: 406.687px; top: 636.901px; width: 33.369px; height: 13.948px;"><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#cite.egorovStableSwapEfficientMechanism" class="internalLink"></a></section><section data-annotation-id="93R" class="linkAnnotation" style="transform: matrix(1.66667, 0, 0, 1.66667, 0, 0); transform-origin: -500.474px -636.901px; left: 500.474px; top: 636.901px; width: 37.271px; height: 13.948px;"><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#cite.uniswap" class="internalLink"></a></section><section data-annotation-id="94R" class="linkAnnotation" style="transform: matrix(1.66667, 0, 0, 1.66667, 0, 0); transform-origin: -71.004px -651.16px; left: 71.004px; top: 651.16px; width: 43.215px; height: 14.135px;"><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#cite.adams2021uniswap" class="internalLink"></a></section><section data-annotation-id="95R" class="linkAnnotation" style="transform: matrix(1.66667, 0, 0, 1.66667, 0, 0); transform-origin: -187.565px -651.16px; left: 187.565px; top: 651.16px; width: 31.322px; height: 14.135px;"><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#cite.sushiswap" class="internalLink"></a></section><section data-annotation-id="96R" class="linkAnnotation" style="transform: matrix(1.66667, 0, 0, 1.66667, 0, 0); transform-origin: -306.851px -651.16px; left: 306.851px; top: 651.16px; width: 35.151px; height: 14.135px;"><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#cite.balancer" class="internalLink"></a></section></div></div><div class="page" data-page-number="2" style="width: 1019px; height: 1319px;" data-loaded="true"><div class="canvasWrapper" style="width: 1019px; height: 1319px;"><canvas id="page2" width="2550" height="3300" style="width: 1020px; height: 1320px;"></canvas></div><div class="textLayer" style="width: 1019px; height: 1319px;"><span style="left: 149.265px; top: 124.981px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.958333);">Unlike traditional exchanges, DEXs typically do not use order books. Instead, most DEXs</span><span style="left: 120px; top: 149.058px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.922342);">(including  Curve,  Uniswap,  SushiSwap,  and  Balancer)  are  organized  as</span><span style="left: 750.865px; top: 150.173px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.955832);">constant  function</span><span style="left: 120px; top: 174.25px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.945811);">market makers</span><span style="left: 251.507px; top: 173.134px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.964218);">(CFMMs).  A CFMM holds reserves of assets (cryptocurrencies), contributed</span><span style="left: 120px; top: 197.211px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.951769);">by liquidity providers. Agents can offer or tender baskets of assets to the CFMM, in exchange</span><span style="left: 120px; top: 221.286px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.932414);">for  another  basket  of  assets.   If  the  trade  is  accepted,  the  tendered  basket  is  added  to</span><span style="left: 120px; top: 245.363px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.975045);">the reserves, while the basket received by the agent is subtracted from the reserves.  Each</span><span style="left: 120px; top: 269.439px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.961753);">accepted trade incurs a small fee, which is distributed pro-rata among the liquidity providers.</span><span style="left: 149.265px; top: 293.516px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.983321);">CFMMs use a single rule that determines whether or not a proposed trade is accepted.</span><span style="left: 120px; top: 317.593px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.945479);">The rule is based on evaluating a</span><span style="left: 402.702px; top: 318.708px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.993729);">trading function</span><span style="left: 537.962px; top: 317.593px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.945473);">, which depends on the proposed trade and</span><span style="left: 120px; top: 341.669px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.985936);">the current reserves of the CFMM. A proposed trade is accepted if the value of the trading</span><span style="left: 120px; top: 365.744px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.0042);">function at the post-trade reserves (with a small correction for the trading fee) equals the</span><span style="left: 120px; top: 389.821px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.947514);">value at the current reserves,</span><span style="left: 370.155px; top: 390.937px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.01298);">i.e.</span><span style="left: 397.055px; top: 389.821px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.973315);">, the function is held constant.  This condition is what gives</span><span style="left: 120px; top: 413.898px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.972358);">CFMMs their name.  One simple example of a trading function is the product [Lu17, But17],</span><span style="left: 120px; top: 437.974px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.964412);">implemented by Uniswap [ZCP18] and SushiSwap [Sus20]; this CFMM accepts a trade only</span><span style="left: 120px; top: 462.051px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.948691);">if it leaves the product of the reserves unchanged.  Several other functions can be used, such</span><span style="left: 120px; top: 486.128px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.973867);">as the sum or the geometric mean (which is used by Balancer [MM19]).</span><span style="left: 149.265px; top: 510.203px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.97499);">For trades involving just two assets, CFMMs are very simple to understand, via a scalar</span><span style="left: 120px; top: 534.279px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.994201);">function that relates how much of one asset is required to receive an amount of the other,</span><span style="left: 120px; top: 558.356px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.961724);">and vice versa.  Thus the choice of a two-asset trade involves only one scalar quantity:  how</span><span style="left: 120px; top: 582.433px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.969723);">much you propose to tender (or, equivalently, how much you propose to receive).</span><span style="left: 149.265px; top: 606.509px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.951679);">For general trades, in which many assets may be simultaneously exchanged, CFMMs are</span><span style="left: 120px; top: 630.586px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.964772);">more difficult reason about.  When multiple assets are tendered, there can be many baskets</span><span style="left: 120px; top: 654.661px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.979066);">that can be tendered to receive a specific basket of assets, and vice versa, there are many</span><span style="left: 120px; top: 678.738px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.910723);">choices  of  the  received  basket,  given  a  fixed  one  that  is  tendered.   Thus  the  choice  of  a</span><span style="left: 120px; top: 702.814px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.997128);">multi-asset trade is more complex than just specifying an amount to tender or receive.  In</span><span style="left: 120px; top: 726.891px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.973681);">this case the trader may wish to tender and receive baskets that are most aligned with their</span><span style="left: 120px; top: 750.968px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.994489);">preferences or utility (</span><span style="left: 310.33px; top: 752.083px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.90016);">e.g.</span><span style="left: 340.218px; top: 750.968px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.997505);">, one that maximizes their risk-adjusted return).</span><span style="left: 149.265px; top: 775.043px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.996232);">In all practical cases, including the ones mentioned above, the trading function is con-</span><span style="left: 120px; top: 799.119px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.972398);">cave [AC20].  In this paper we make use of this fact to formulate various multi-asset trading</span><span style="left: 120px; top: 823.196px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.971017);">problems as convex optimization problems.  Because convex optimization problems can be</span><span style="left: 120px; top: 847.273px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.966097);">solved reliably and efficiently (in theory and in practice) [BV04], we can solve the formulated</span><span style="left: 120px; top: 871.349px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.978181);">trading problems exactly.  This gives a practical solution to the problem of choosing among</span><span style="left: 120px; top: 895.426px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.973693);">many possible multi-asset trades:  the trader articulates their objective and constraints, and</span><span style="left: 120px; top: 919.501px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.96389);">a solution to this problem determines the baskets of assets to be tendered and received.</span><span style="left: 120px; top: 972.575px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.1569);">Outline.</span><span style="left: 218.877px; top: 971.459px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.975818);">We start by surveying related work in</span><span style="left: 542.558px; top: 966.478px; font-size: 19.9253px; font-family: monospace;">§</span><span style="left: 551.228px; top: 971.459px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.929522);">1.1.  In</span><span style="left: 613.377px; top: 966.478px; font-size: 19.9253px; font-family: monospace;">§</span><span style="left: 622.045px; top: 971.459px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.944387);">2, we give a complete description</span><span style="left: 120px; top: 995.536px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.936347);">of  CFMMs,  describing  how  agents  may  trade  with  a  CFMM,  as  well  as  add  or  remove</span><span style="left: 120px; top: 1019.61px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.05683);">liquidity.   In</span><span style="left: 238.75px; top: 1014.63px; font-size: 19.9253px; font-family: monospace;">§</span><span style="left: 247.418px; top: 1019.61px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.930384);">3  we  study  some  basic  properties  of  CFMMs,  many  of  which  rely  on  the</span><span style="left: 120px; top: 1043.69px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.02706);">concavity of the trading function.  In</span><span style="left: 449.412px; top: 1038.71px; font-size: 19.9253px; font-family: monospace;">§</span><span style="left: 458.08px; top: 1043.69px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.9886);">4 we examine trades involving just two assets, and</span><span style="left: 120px; top: 1067.77px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.988662);">show how to understand them via two functions that give the amount of asset received for</span><span style="left: 120px; top: 1091.84px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.00365);">a given quantity of the tendered asset.  Finally, in</span><span style="left: 560.2px; top: 1086.86px; font-size: 19.9253px; font-family: monospace;">§</span><span style="left: 568.868px; top: 1091.84px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.981247);">5 we formulate the general multi-asset</span><span style="left: 120px; top: 1115.92px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.964233);">trading problem as a convex optimization problem, and give some specific examples.</span><span style="left: 505.123px; top: 1185.06px; font-size: 19.9253px; font-family: sans-serif;">2</span><div class="endOfContent"></div></div><div class="annotationLayer"><section data-annotation-id="115R" class="linkAnnotation" style="transform: matrix(1.66667, 0, 0, 1.66667, 0, 0); transform-origin: -471.539px -247.342px; left: 471.539px; top: 247.342px; width: 27.516px; height: 13.948px;"><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#cite.lu2017building" class="internalLink"></a></section><section data-annotation-id="116R" class="linkAnnotation" style="transform: matrix(1.66667, 0, 0, 1.66667, 0, 0); transform-origin: -501.449px -247.342px; left: 501.449px; top: 247.342px; width: 33.044px; height: 13.948px;"><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#cite.buterin2017path" class="internalLink"></a></section><section data-annotation-id="117R" class="linkAnnotation" style="transform: matrix(1.66667, 0, 0, 1.66667, 0, 0); transform-origin: -206.75px -261.788px; left: 206.75px; top: 261.788px; width: 37.271px; height: 13.948px;"><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#cite.uniswap" class="internalLink"></a></section><section data-annotation-id="118R" class="linkAnnotation" style="transform: matrix(1.66667, 0, 0, 1.66667, 0, 0); transform-origin: -332.907px -261.788px; left: 332.907px; top: 261.788px; width: 31.322px; height: 13.948px;"><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#cite.sushiswap" class="internalLink"></a></section><section data-annotation-id="119R" class="linkAnnotation" style="transform: matrix(1.66667, 0, 0, 1.66667, 0, 0); transform-origin: -393.989px -290.68px; left: 393.989px; top: 290.68px; width: 35.151px; height: 13.948px;"><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#cite.balancer" class="internalLink"></a></section><section data-annotation-id="120R" class="linkAnnotation" style="transform: matrix(1.66667, 0, 0, 1.66667, 0, 0); transform-origin: -99.764px -478.476px; left: 99.764px; top: 478.476px; width: 30.603px; height: 13.947px;"><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#cite.angerisImprovedPriceOracles2020" class="internalLink"></a></section><section data-annotation-id="121R" class="linkAnnotation" style="transform: matrix(1.66667, 0, 0, 1.66667, 0, 0); transform-origin: -360.477px -507.367px; left: 360.477px; top: 507.367px; width: 30.764px; height: 13.948px;"><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#cite.boyd2004convex" class="internalLink"></a></section><section data-annotation-id="122R" class="linkAnnotation" style="transform: matrix(1.66667, 0, 0, 1.66667, 0, 0); transform-origin: -329.74px -582.544px; left: 329.74px; top: 582.544px; width: 16.95px; height: 12.619px;"><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#subsection.1.1" class="internalLink"></a></section><section data-annotation-id="123R" class="linkAnnotation" style="transform: matrix(1.66667, 0, 0, 1.66667, 0, 0); transform-origin: -372.231px -582.544px; left: 372.231px; top: 582.544px; width: 7.845px; height: 12.619px;"><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#section.2" class="internalLink"></a></section><section data-annotation-id="124R" class="linkAnnotation" style="transform: matrix(1.66667, 0, 0, 1.66667, 0, 0); transform-origin: -147.455px -611.435px; left: 147.455px; top: 611.435px; width: 7.845px; height: 12.62px;"><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#section.3" class="internalLink"></a></section><section data-annotation-id="125R" class="linkAnnotation" style="transform: matrix(1.66667, 0, 0, 1.66667, 0, 0); transform-origin: -273.852px -625.881px; left: 273.852px; top: 625.881px; width: 7.845px; height: 12.62px;"><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#section.4" class="internalLink"></a></section><section data-annotation-id="126R" class="linkAnnotation" style="transform: matrix(1.66667, 0, 0, 1.66667, 0, 0); transform-origin: -340.325px -654.773px; left: 340.325px; top: 654.773px; width: 7.845px; height: 12.619px;"><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#section.5" class="internalLink"></a></section></div></div><div class="page" data-page-number="3" style="width: 1019px; height: 1319px;" data-loaded="true"><div class="canvasWrapper" style="width: 1019px; height: 1319px;"><canvas id="page3" width="2550" height="3300" style="width: 1020px; height: 1320px;"></canvas></div><div class="textLayer" style="width: 1019px; height: 1319px;"><span style="left: 120px; top: 123.331px; font-size: 23.9103px; font-family: sans-serif; transform: scaleX(1.10648);">1.1    Background and related work</span><span style="left: 120px; top: 163.042px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.10152);">Blockchain.</span><span style="left: 251.647px; top: 161.926px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.984077);">CFMMs are typically implemented on a</span><span style="left: 596.182px; top: 163.042px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.921498);">blockchain</span><span style="left: 684.347px; top: 161.926px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.941668);">:  a decentralized, permis-</span><span style="left: 120px; top: 186.003px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.964305);">sionless,  and public ledger.  The blockchain stores accounts,  represented by cryptographic</span><span style="left: 120px; top: 210.079px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.968334);">public keys, and associated balances of one or more cryptocurrencies.  A blockchain allows</span><span style="left: 120px; top: 234.156px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.999891);">any two accounts to securely transact with each other without the need for a trusted third</span><span style="left: 120px; top: 258.231px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.994341);">party or central institution, using public-key cryptography to verify their identities.  Execut-</span><span style="left: 120px; top: 282.308px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.00315);">ing a</span><span style="left: 170.837px; top: 283.423px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.974541);">transaction</span><span style="left: 265.732px; top: 282.308px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.00044);">, which alters the state of the blockchain, costs the issuer a fee, typically</span><span style="left: 120px; top: 306.384px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.0172);">paid out to the individuals providing computational power to the network.  (This network</span><span style="left: 120px; top: 330.461px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.980299);">fee depends on the amount of computation a transaction requires and is paid in addition to</span><span style="left: 120px; top: 354.538px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.976252);">the CFMM trading fee mentioned above and described below.)</span><span style="left: 149.265px; top: 378.613px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.994939);">Blockchains are highly tamper resistant:  they are replicated across a network of com-</span><span style="left: 120px; top: 402.689px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.969634);">puters, and kept in consensus via simple protocols that prevent invalid transactions such as</span><span style="left: 120px; top: 426.766px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.96168);">double-spending of a coin.  The consensus protocol operates on the level of</span><span style="left: 769.8px; top: 427.882px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.865187);">blocks</span><span style="left: 827.272px; top: 426.766px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.952492);">(bundles</span><span style="left: 120px; top: 450.843px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.980403);">of transactions), which are verified by the network and chained together to form the ledger.</span><span style="left: 120px; top: 474.919px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.983105);">Because the ledger is public, anyone in the world can view and verify all account balances</span><span style="left: 120px; top: 498.996px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.976848);">and the entire record of transactions.</span><span style="left: 149.265px; top: 523.071px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.00506);">The idea of a blockchain originated with a pseudonymously authored whitepaper that</span><span style="left: 120px; top: 547.148px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.982993);">proposed Bitcoin, widely considered to be the first cryptocurrency [Nak08].</span><span style="left: 120px; top: 600.222px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.12234);">Cryptocurrencies.</span><span style="left: 314.58px; top: 599.106px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.985325);">A cryptocurrency is a digital currency implemented on a blockchain.</span><span style="left: 120px; top: 623.183px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.970173);">Every blockchain has its own native cryptocurrency, which is used to pay the network trans-</span><span style="left: 120px; top: 647.259px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.951268);">action fees (and can also be used as a standalone currency).</span><span style="left: 149.265px; top: 671.336px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.981931);">A given blockchain may have several other cryptocurrencies implemented on it.  These</span><span style="left: 120px; top: 695.411px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.933429);">additional currencies are sometimes called</span><span style="left: 475.655px; top: 696.527px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.908792);">tokens</span><span style="left: 528.955px; top: 695.411px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.950929);">, to distinguish them from the base currency.</span><span style="left: 120px; top: 719.488px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.939084);">There are thousands of tokens in circulation today, across various blockchains.  Some, like the</span><span style="left: 120px; top: 743.564px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.97099);">Uniswap token UNI, give holders rights over the governance of a protocol, while others, like</span><span style="left: 120px; top: 767.641px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.964338);">USDC, are</span><span style="left: 219.717px; top: 768.757px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.895333);">stablecoins</span><span style="left: 308.883px; top: 767.641px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.980291);">, pegged to the market value of some external or real-world currency</span><span style="left: 120px; top: 791.718px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.991663);">or commodity.</span><span style="left: 120px; top: 844.79px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.10694);">Smart contracts.</span><span style="left: 299.913px; top: 843.674px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.940914);">Modern blockchains, such as Ethereum [But13,Woo14], Polkadot [Woo16],</span><span style="left: 120px; top: 867.751px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.989261);">and Solana [Yak18],  allow anyone to deploy arbitrary stateful programs called</span><span style="left: 807.315px; top: 868.867px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.93101);">smart  con-</span><span style="left: 120px; top: 892.943px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.967254);">tracts</span><span style="left: 167.073px; top: 891.828px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.956208);">. A contract’s public functions can be invoked by anyone, via a transaction sent through</span><span style="left: 120px; top: 915.904px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.00709);">the network and addressed to the contract.  (The term ‘smart contract’ was coined in the</span><span style="left: 120px; top: 939.981px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.952613);">1990s, to refer to a set of promises between agents codified in a computer program [Sza95].)</span><span style="left: 120px; top: 964.058px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.976406);">Because creators are free to compose deployed contracts or remix them in their own appli-</span><span style="left: 120px; top: 988.133px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.942971);">cations, software ecosystems on these blockchains have developed rapidly.</span><span style="left: 149.265px; top: 1012.21px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.969358);">CFMMs are implemented using smart contracts, with functions for trading, adding liquid-</span><span style="left: 120px; top: 1036.29px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.973329);">ity, and removing liquidity. Their implementations are usually simple. For example, Uniswap</span><span style="left: 120px; top: 1060.36px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.969639);">v2 is implemented in just 200 lines of code.  In addition to DEXs, many other financial appli-</span><span style="left: 120px; top: 1084.44px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.949648);">cations have been deployed on blockchains, including lending protocols (</span><span style="left: 730.587px; top: 1085.56px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.90016);">e.g.</span><span style="left: 760.475px; top: 1084.44px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.907151);">, [aav21, com21])</span><span style="left: 120px; top: 1108.51px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.98068);">and various derivatives (</span><span style="left: 331.58px; top: 1109.63px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.90016);">e.g.</span><span style="left: 361.467px; top: 1108.51px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.985231);">, [uma21, dyd21]).  The collection of financial applications run-</span><span style="left: 120px; top: 1132.59px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.970053);">ning on blockchains is known as decentralized finance, or DeFi for short.</span><span style="left: 505.123px; top: 1185.06px; font-size: 19.9253px; font-family: sans-serif;">3</span><div class="endOfContent"></div></div><div class="annotationLayer"><section data-annotation-id="137R" class="linkAnnotation" style="transform: matrix(1.66667, 0, 0, 1.66667, 0, 0); transform-origin: -417.661px -327.293px; left: 417.661px; top: 327.293px; width: 34.505px; height: 13.947px;"><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#cite.nakamoto2008bitcoin" class="internalLink"></a></section><section data-annotation-id="138R" class="linkAnnotation" style="transform: matrix(1.66667, 0, 0, 1.66667, 0, 0); transform-origin: -379.866px -505.209px; left: 379.866px; top: 505.209px; width: 33.043px; height: 13.948px;"><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#cite.buterin2013ethereum" class="internalLink"></a></section><section data-annotation-id="139R" class="linkAnnotation" style="transform: matrix(1.66667, 0, 0, 1.66667, 0, 0); transform-origin: -414.52px -505.209px; left: 414.52px; top: 505.209px; width: 36.781px; height: 13.948px;"><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#cite.wood2014ethereum" class="internalLink"></a></section><section data-annotation-id="140R" class="linkAnnotation" style="transform: matrix(1.66667, 0, 0, 1.66667, 0, 0); transform-origin: -509.56px -505.209px; left: 509.56px; top: 505.209px; width: 36.781px; height: 13.948px;"><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#cite.wood2016polkadot" class="internalLink"></a></section><section data-annotation-id="141R" class="linkAnnotation" style="transform: matrix(1.66667, 0, 0, 1.66667, 0, 0); transform-origin: -136.404px -519.655px; left: 136.404px; top: 519.655px; width: 33.53px; height: 13.947px;"><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#cite.yakovenko2018solana" class="internalLink"></a></section><section data-annotation-id="142R" class="linkAnnotation" style="transform: matrix(1.66667, 0, 0, 1.66667, 0, 0); transform-origin: -498.683px -562.992px; left: 498.683px; top: 562.992px; width: 31.258px; height: 13.948px;"><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#cite.szabo1995smart" class="internalLink"></a></section><section data-annotation-id="143R" class="linkAnnotation" style="transform: matrix(1.66667, 0, 0, 1.66667, 0, 0); transform-origin: -465.142px -649.667px; left: 465.142px; top: 649.667px; width: 31.257px; height: 13.948px;"><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#cite.aave" class="internalLink"></a></section><section data-annotation-id="144R" class="linkAnnotation" style="transform: matrix(1.66667, 0, 0, 1.66667, 0, 0); transform-origin: -498.683px -649.667px; left: 498.683px; top: 649.667px; width: 34.509px; height: 13.948px;"><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#cite.compound" class="internalLink"></a></section><section data-annotation-id="145R" class="linkAnnotation" style="transform: matrix(1.66667, 0, 0, 1.66667, 0, 0); transform-origin: -226.724px -664.113px; left: 226.724px; top: 664.113px; width: 35.81px; height: 13.948px;"><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#cite.uma" class="internalLink"></a></section><section data-annotation-id="146R" class="linkAnnotation" style="transform: matrix(1.66667, 0, 0, 1.66667, 0, 0); transform-origin: -265.575px -664.113px; left: 265.575px; top: 664.113px; width: 32.884px; height: 13.948px;"><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#cite.dydx" class="internalLink"></a></section></div></div><div class="page" data-page-number="4" style="width: 1019px; height: 1319px;" data-loaded="true"><div class="canvasWrapper" style="width: 1019px; height: 1319px;"><canvas id="page4" width="2550" height="3300" style="width: 1020px; height: 1320px;"></canvas></div><div class="textLayer" style="width: 1019px; height: 1319px;"><span style="left: 120px; top: 126.097px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.08231);">Exchange-traded funds.</span><span style="left: 368.268px; top: 124.981px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.948307);">CFMMs have some similarities to exchange-traded funds (ETFs).</span><span style="left: 120px; top: 149.058px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.00948);">A CFMM’s liquidity providers are analogous to an ETF’s authorized participants;  adding</span><span style="left: 120px; top: 173.134px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.972353);">liquidity to a CFMM is analogous to the creation of an ETF share, and subsequently remov-</span><span style="left: 120px; top: 197.211px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.990035);">ing liquidity is analogous to redemption.  But while the list of authorized participants for an</span><span style="left: 120px; top: 221.286px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.01153);">ETF is typically very small, anyone in the world can provide liquidity to a CFMM or trade</span><span style="left: 120px; top: 245.363px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.11427);">with it.</span><span style="left: 120px; top: 298.437px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.08597);">Comparison  to  order  books.</span><span style="left: 424.277px; top: 297.321px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.938726);">In  an  order  book,  trading  a  basket  of  multiple  assets</span><span style="left: 120px; top: 321.398px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.957783);">for another basket of multiple assets requires multiple separate trades.  Each of these trades</span><span style="left: 120px; top: 345.474px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.968219);">would entail the blockchain fee, increasing the total cost of trading to the trader.  In addition,</span><span style="left: 120px; top: 369.551px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.97766);">multiple trades cannot be done at the same time with an order book, exposing the trader to</span><span style="left: 120px; top: 393.626px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.994235);">the risk that some of the trades go through while others do not, or that some of the trades</span><span style="left: 120px; top: 417.703px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.922764);">will  execute  at  unfavorable  prices.   In  a  CFMM,  multiple  asset  baskets  are  exchanged  in</span><span style="left: 120px; top: 441.779px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.998404);">one trade, which either goes through as one group trade, or not at all, so the trader is not</span><span style="left: 120px; top: 465.856px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.984876);">exposed to the risk of partial execution.</span><span style="left: 149.265px; top: 489.933px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.982353);">Another advantage of CFMMs over order book exchanges is their efficiency of storage,</span><span style="left: 120px; top: 514.009px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.01568);">since they do not need to store and maintain a limit order book, and their computational</span><span style="left: 120px; top: 538.084px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.985415);">efficiency,  since they only need to evaluate the trading function.  Because users must pay</span><span style="left: 120px; top: 562.161px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.916646);">for  computation  costs  for  each  transaction,  and  these  costs  can  often  be  nonnegligible  in</span><span style="left: 120px; top: 586.238px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.955251);">some blockchains, exchanges implementing CFMMs can often be much cheaper for users to</span><span style="left: 120px; top: 610.314px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.991005);">interact with than those implementing order books.</span><span style="left: 120px; top: 663.388px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.13606);">Previous work.</span><span style="left: 287.798px; top: 662.273px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.00418);">Academic work on automated market makers began with the study of</span><span style="left: 120px; top: 686.348px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.988993);">scoring rules within the statistics literature,</span><span style="left: 494.482px; top: 687.463px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.90016);">e.g.</span><span style="left: 524.37px; top: 686.348px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.96726);">, [Win69].  Scoring rules furnish probabilities</span><span style="left: 120px; top: 710.424px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.972348);">for baskets of events, which can be viewed as assets or tokens in a prediction market.  The</span><span style="left: 120px; top: 734.501px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.964407);">output probability from a scoring rule was first proposed as a pricing mechanism for a binary</span><span style="left: 120px; top: 758.578px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.935022);">option  (such  as  a  prediction  market)  in  [Han03].   Unlike  CFMMs,  these  early  automated</span><span style="left: 120px; top: 782.654px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.931333);">market  makers  were  shown  to  be  computationally  complicated  for  users  to  interact  with.</span><span style="left: 120px; top: 806.731px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.964674);">For example.  Chen [CFL</span><span style="left: 335.592px; top: 804.481px; font-size: 13.2835px; font-family: sans-serif;">+</span><span style="left: 347.4px; top: 806.731px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.00082);">08] demonstrated that computing optimal arbitrage portfolios in</span><span style="left: 120px; top: 830.806px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.986192);">logarithmic scoring rules (the most popular class of scoring rules) is #P-hard.</span><span style="left: 149.265px; top: 854.883px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.957158);">The  first  CFMM  on  Ethereum  (the  most  commonly  used  blockchain  for  smart  con-</span><span style="left: 120px; top: 878.959px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.966018);">tracts) was Uniswap [ZCP18, AZS</span><span style="left: 410.67px; top: 876.711px; font-size: 13.2835px; font-family: sans-serif;">+</span><span style="left: 422.478px; top: 878.959px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.980955);">21].  The first formal analysis of Uniswap was first done</span><span style="left: 120px; top: 903.036px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.07426);">in [AKC</span><span style="left: 192.495px; top: 900.786px; font-size: 13.2835px; font-family: sans-serif;">+</span><span style="left: 204.303px; top: 903.036px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.977706);">20] and extended to general concave trading functions in [AC20].  Evans [Eva20]</span><span style="left: 120px; top: 927.113px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.981825);">first proved that constant mean market makers could replicate a large set of portfolio value</span><span style="left: 120px; top: 951.188px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.979127);">functions.  The converse result was later proven, providing a mechanism for constructing a</span><span style="left: 120px; top: 975.264px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.984485);">trading function that replicates a given portfolio value function [AEC21b].  Analyses of how</span><span style="left: 120px; top: 999.341px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.951757);">fees  [EAC21, TW20]  and  trading  function  curvature  [AEC20, Aoy20, AI21]  affect  liquidity</span><span style="left: 120px; top: 1023.42px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.983723);">provider returns are also common in the literature.  Finally, we note that there exist investi-</span><span style="left: 120px; top: 1047.49px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.975128);">gations of privacy in CFMMs [AEC21a], suitability of liquidity provider shares as a collateral</span><span style="left: 120px; top: 1071.57px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.99455);">asset [CAEK21], and the question of triangular arbitrage [WCDW21] in CFMMs.</span><span style="left: 505.123px; top: 1185.06px; font-size: 19.9253px; font-family: sans-serif;">4</span><div class="endOfContent"></div></div><div class="annotationLayer"><section data-annotation-id="164R" class="linkAnnotation" style="transform: matrix(1.66667, 0, 0, 1.66667, 0, 0); transform-origin: -323.471px -410.813px; left: 323.471px; top: 410.813px; width: 35.48px; height: 13.947px;"><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#cite.winkler1969scoring" class="internalLink"></a></section><section data-annotation-id="165R" class="linkAnnotation" style="transform: matrix(1.66667, 0, 0, 1.66667, 0, 0); transform-origin: -286.745px -454.15px; left: 286.745px; top: 454.15px; width: 34.83px; height: 13.948px;"><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#cite.hanson2003combinatorial" class="internalLink"></a></section><section data-annotation-id="166R" class="linkAnnotation" style="transform: matrix(1.66667, 0, 0, 1.66667, 0, 0); transform-origin: -176.951px -482.855px; left: 176.951px; top: 482.855px; width: 44.191px; height: 14.135px;"><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#cite.chen2008complexity" class="internalLink"></a></section><section data-annotation-id="167R" class="linkAnnotation" style="transform: matrix(1.66667, 0, 0, 1.66667, 0, 0); transform-origin: -182.781px -526.192px; left: 182.781px; top: 526.192px; width: 37.271px; height: 14.135px;"><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#cite.uniswap" class="internalLink"></a></section><section data-annotation-id="168R" class="linkAnnotation" style="transform: matrix(1.66667, 0, 0, 1.66667, 0, 0); transform-origin: -222.973px -526.192px; left: 222.973px; top: 526.192px; width: 43.216px; height: 14.135px;"><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#cite.adams2021uniswap" class="internalLink"></a></section><section data-annotation-id="169R" class="linkAnnotation" style="transform: matrix(1.66667, 0, 0, 1.66667, 0, 0); transform-origin: -88.496px -540.638px; left: 88.496px; top: 540.638px; width: 46.788px; height: 14.135px;"><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#cite.angerisAnalysisUniswapMarkets2020" class="internalLink"></a></section><section data-annotation-id="170R" class="linkAnnotation" style="transform: matrix(1.66667, 0, 0, 1.66667, 0, 0); transform-origin: -424.43px -540.638px; left: 424.43px; top: 540.638px; width: 30.603px; height: 14.135px;"><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#cite.angerisImprovedPriceOracles2020" class="internalLink"></a></section><section data-annotation-id="171R" class="linkAnnotation" style="transform: matrix(1.66667, 0, 0, 1.66667, 0, 0); transform-origin: -504.701px -540.638px; left: 504.701px; top: 540.638px; width: 33.044px; height: 14.135px;"><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#cite.evans2020liquidity" class="internalLink"></a></section><section data-annotation-id="172R" class="linkAnnotation" style="transform: matrix(1.66667, 0, 0, 1.66667, 0, 0); transform-origin: -401.431px -584.163px; left: 401.431px; top: 584.163px; width: 45.396px; height: 13.947px;"><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#cite.angeris2021replicating" class="internalLink"></a></section><section data-annotation-id="173R" class="linkAnnotation" style="transform: matrix(1.66667, 0, 0, 1.66667, 0, 0); transform-origin: -97.955px -598.609px; left: 97.955px; top: 598.609px; width: 38.568px; height: 13.947px;"><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#cite.evans2021optimal" class="internalLink"></a></section><section data-annotation-id="174R" class="linkAnnotation" style="transform: matrix(1.66667, 0, 0, 1.66667, 0, 0); transform-origin: -140.023px -598.609px; left: 140.023px; top: 598.609px; width: 34.179px; height: 13.947px;"><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#cite.tassy2020growth" class="internalLink"></a></section><section data-annotation-id="175R" class="linkAnnotation" style="transform: matrix(1.66667, 0, 0, 1.66667, 0, 0); transform-origin: -350.539px -598.609px; left: 350.539px; top: 598.609px; width: 38.893px; height: 13.947px;"><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#cite.angeris2020does" class="internalLink"></a></section><section data-annotation-id="176R" class="linkAnnotation" style="transform: matrix(1.66667, 0, 0, 1.66667, 0, 0); transform-origin: -392.932px -598.609px; left: 392.932px; top: 598.609px; width: 34.179px; height: 13.947px;"><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#cite.aoyagiLiquidityProvisionAutomated" class="internalLink"></a></section><section data-annotation-id="177R" class="linkAnnotation" style="transform: matrix(1.66667, 0, 0, 1.66667, 0, 0); transform-origin: -430.611px -598.609px; left: 430.611px; top: 598.609px; width: 26.697px; height: 13.947px;"><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#cite.aoyagiLiquidityImplicationsConstant" class="internalLink"></a></section><section data-annotation-id="178R" class="linkAnnotation" style="transform: matrix(1.66667, 0, 0, 1.66667, 0, 0); transform-origin: -224.616px -627.5px; left: 224.616px; top: 627.5px; width: 44.746px; height: 13.948px;"><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#cite.angeris2021note" class="internalLink"></a></section><section data-annotation-id="179R" class="linkAnnotation" style="transform: matrix(1.66667, 0, 0, 1.66667, 0, 0); transform-origin: -103px -641.946px; left: 103px; top: 641.946px; width: 47.993px; height: 13.948px;"><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#cite.chitra2021note" class="internalLink"></a></section><section data-annotation-id="180R" class="linkAnnotation" style="transform: matrix(1.66667, 0, 0, 1.66667, 0, 0); transform-origin: -370.179px -641.946px; left: 370.179px; top: 641.946px; width: 54.496px; height: 13.948px;"><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#cite.wang2021cyclic" class="internalLink"></a></section></div></div><div class="page" data-page-number="5" style="width: 1019px; height: 1319px;" data-loaded="true"><div class="canvasWrapper" style="width: 1019px; height: 1319px;"><canvas id="page5" width="2550" height="3300" style="width: 1020px; height: 1320px;"></canvas></div><div class="textLayer" style="width: 1019px; height: 1319px;"><span style="left: 120px; top: 123.331px; font-size: 23.9103px; font-family: sans-serif; transform: scaleX(1.10263);">1.2    Convex analysis and optimization</span><span style="left: 120px; top: 163.042px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.0863);">Convex analysis.</span><span style="left: 302.96px; top: 161.926px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.03867);">A function</span><span style="left: 402.318px; top: 161.926px; font-size: 19.9253px; font-family: sans-serif;">f</span><span style="left: 421.143px; top: 161.926px; font-size: 19.9253px; font-family: sans-serif;">:</span><span style="left: 433.643px; top: 161.926px; font-size: 19.9253px; font-family: sans-serif;">D</span><span style="left: 457.465px; top: 161.428px; font-size: 19.9253px; font-family: sans-serif;">→</span><span style="left: 484.47px; top: 163.042px; font-size: 19.9253px; font-family: sans-serif;">R</span><span style="left: 501.19px; top: 161.926px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.09746);">, with</span><span style="left: 559.597px; top: 161.926px; font-size: 19.9253px; font-family: sans-serif;">D</span><span style="left: 583.417px; top: 161.428px; font-size: 19.9253px; font-family: sans-serif;">⊆</span><span style="left: 605.995px; top: 163.042px; font-size: 19.9253px; font-family: sans-serif;">R</span><span style="left: 622.715px; top: 159.238px; font-size: 13.2835px; font-family: sans-serif;">n</span><span style="left: 632.108px; top: 161.926px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.00279);">, is convex if</span><span style="left: 749.343px; top: 161.926px; font-size: 19.9253px; font-family: sans-serif;">D</span><span style="left: 773.495px; top: 161.926px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.960756);">is a convex set</span><span style="left: 120px; top: 186.003px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.946451);">and</span><span style="left: 339.735px; top: 210.079px; font-size: 19.9253px; font-family: sans-serif;">f</span><span style="left: 351.478px; top: 210.079px; font-size: 19.9253px; font-family: sans-serif;">(</span><span style="left: 359.065px; top: 210.079px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.985366);">θx</span><span style="left: 384.213px; top: 210.079px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.05985);">+ (1</span><span style="left: 425.587px; top: 209.581px; font-size: 19.9253px; font-family: sans-serif;">−</span><span style="left: 445.512px; top: 210.079px; font-size: 19.9253px; font-family: sans-serif;">θ</span><span style="left: 455.145px; top: 210.079px; font-size: 19.9253px; font-family: sans-serif;">)</span><span style="left: 462.733px; top: 210.079px; font-size: 19.9253px; font-family: sans-serif;">y</span><span style="left: 472.96px; top: 210.079px; font-size: 19.9253px; font-family: sans-serif;">)</span><span style="left: 486.082px; top: 209.581px; font-size: 19.9253px; font-family: sans-serif;">≤</span><span style="left: 507.115px; top: 210.079px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.15929);">θf</span><span style="left: 528.492px; top: 210.079px; font-size: 19.9253px; font-family: sans-serif;">(</span><span style="left: 536.08px; top: 210.079px; font-size: 19.9253px; font-family: sans-serif;">x</span><span style="left: 547.167px; top: 210.079px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.04121);">) + (1</span><span style="left: 600.553px; top: 209.581px; font-size: 19.9253px; font-family: sans-serif;">−</span><span style="left: 620.478px; top: 210.079px; font-size: 19.9253px; font-family: sans-serif;">θ</span><span style="left: 630.113px; top: 210.079px; font-size: 19.9253px; font-family: sans-serif;">)</span><span style="left: 637.7px; top: 210.079px; font-size: 19.9253px; font-family: sans-serif;">f</span><span style="left: 649.443px; top: 210.079px; font-size: 19.9253px; font-family: sans-serif;">(</span><span style="left: 657.032px; top: 210.079px; font-size: 19.9253px; font-family: sans-serif;">y</span><span style="left: 667.258px; top: 210.079px; font-size: 19.9253px; font-family: sans-serif;">)</span><span style="left: 674.847px; top: 210.079px; font-size: 19.9253px; font-family: sans-serif;">,</span><span style="left: 120px; top: 244.123px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.00657);">for 0</span><span style="left: 166.548px; top: 243.625px; font-size: 19.9253px; font-family: sans-serif;">≤</span><span style="left: 188.495px; top: 244.123px; font-size: 19.9253px; font-family: sans-serif;">θ</span><span style="left: 204.578px; top: 243.625px; font-size: 19.9253px; font-family: sans-serif;">≤</span><span style="left: 226.525px; top: 244.123px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.00812);">1 and all</span><span style="left: 309.427px; top: 244.123px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.15368);">x,y</span><span style="left: 345.932px; top: 243.625px; font-size: 19.9253px; font-family: sans-serif;">∈</span><span style="left: 365.663px; top: 244.123px; font-size: 19.9253px; font-family: sans-serif;">D</span><span style="left: 382.405px; top: 244.123px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.99312);">.  It is common to extend a convex function to an extended-</span><span style="left: 120px; top: 268.198px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.00398);">valued function that maps</span><span style="left: 355.342px; top: 269.313px; font-size: 19.9253px; font-family: sans-serif;">R</span><span style="left: 372.062px; top: 265.511px; font-size: 13.2835px; font-family: sans-serif;">n</span><span style="left: 389.052px; top: 268.198px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.04467);">to</span><span style="left: 413.988px; top: 269.313px; font-size: 19.9253px; font-family: sans-serif;">R</span><span style="left: 435.878px; top: 267.7px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.38608);">∪{∞}</span><span style="left: 494.183px; top: 268.198px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.10261);">, with</span><span style="left: 553.002px; top: 268.198px; font-size: 19.9253px; font-family: sans-serif;">f</span><span style="left: 564.747px; top: 268.198px; font-size: 19.9253px; font-family: sans-serif;">(</span><span style="left: 572.333px; top: 268.198px; font-size: 19.9253px; font-family: sans-serif;">x</span><span style="left: 583.42px; top: 268.198px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.2878);">) = +</span><span style="left: 636.142px; top: 267.7px; font-size: 19.9253px; font-family: sans-serif;">∞</span><span style="left: 663.662px; top: 268.198px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.0032);">for</span><span style="left: 694.56px; top: 268.198px; font-size: 19.9253px; font-family: sans-serif;">x</span><span style="left: 713.04px; top: 267.7px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.467571);">6∈</span><span style="left: 733.715px; top: 268.198px; font-size: 19.9253px; font-family: sans-serif;">D</span><span style="left: 750.457px; top: 268.198px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.04153);">.  A function</span><span style="left: 867.547px; top: 268.198px; font-size: 19.9253px; font-family: sans-serif;">f</span><span style="left: 886.885px; top: 268.198px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.912296);">is</span><span style="left: 120px; top: 292.274px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.931232);">concave if</span><span style="left: 209.963px; top: 291.776px; font-size: 19.9253px; font-family: sans-serif;">−</span><span style="left: 225.46px; top: 292.274px; font-size: 19.9253px; font-family: sans-serif;">f</span><span style="left: 243.708px; top: 292.274px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.96729);">is convex [BV04, Chap. 3].</span><span style="left: 149.265px; top: 316.351px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.969115);">When</span><span style="left: 206.162px; top: 316.351px; font-size: 19.9253px; font-family: sans-serif;">f</span><span style="left: 224.41px; top: 316.351px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.975588);">is differentiable, an equivalent characterization of convexity is</span><span style="left: 381.463px; top: 358.424px; font-size: 19.9253px; font-family: sans-serif;">f</span><span style="left: 393.207px; top: 358.424px; font-size: 19.9253px; font-family: sans-serif;">(</span><span style="left: 400.795px; top: 358.424px; font-size: 19.9253px; font-family: sans-serif;">z</span><span style="left: 410.745px; top: 358.424px; font-size: 19.9253px; font-family: sans-serif;">)</span><span style="left: 423.868px; top: 357.926px; font-size: 19.9253px; font-family: sans-serif;">≥</span><span style="left: 444.9px; top: 358.424px; font-size: 19.9253px; font-family: sans-serif;">f</span><span style="left: 456.643px; top: 358.424px; font-size: 19.9253px; font-family: sans-serif;">(</span><span style="left: 464.232px; top: 358.424px; font-size: 19.9253px; font-family: sans-serif;">x</span><span style="left: 475.318px; top: 358.424px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.14302);">) +</span><span style="left: 506.935px; top: 357.926px; font-size: 19.9253px; font-family: sans-serif;">∇</span><span style="left: 523.54px; top: 358.424px; font-size: 19.9253px; font-family: sans-serif;">f</span><span style="left: 535.283px; top: 358.424px; font-size: 19.9253px; font-family: sans-serif;">(</span><span style="left: 542.87px; top: 358.424px; font-size: 19.9253px; font-family: sans-serif;">x</span><span style="left: 553.958px; top: 358.424px; font-size: 19.9253px; font-family: sans-serif;">)</span><span style="left: 561.545px; top: 355.923px; font-size: 13.2835px; font-family: sans-serif;">T</span><span style="left: 572.552px; top: 358.424px; font-size: 19.9253px; font-family: sans-serif;">(</span><span style="left: 580.14px; top: 358.424px; font-size: 19.9253px; font-family: sans-serif;">z</span><span style="left: 594.518px; top: 357.926px; font-size: 19.9253px; font-family: sans-serif;">−</span><span style="left: 614.443px; top: 358.424px; font-size: 19.9253px; font-family: sans-serif;">x</span><span style="left: 625.53px; top: 358.424px; font-size: 19.9253px; font-family: sans-serif;">)</span><span style="left: 633.117px; top: 358.424px; font-size: 19.9253px; font-family: sans-serif;">,</span><span style="left: 120px; top: 400.499px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.02998);">for all</span><span style="left: 176.363px; top: 400.499px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.17052);">z,x</span><span style="left: 211.677px; top: 400.001px; font-size: 19.9253px; font-family: sans-serif;">∈</span><span style="left: 230.495px; top: 400.499px; font-size: 19.9253px; font-family: sans-serif;">D</span><span style="left: 247.237px; top: 400.499px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.987917);">.  A differentiable function</span><span style="left: 475.028px; top: 400.499px; font-size: 19.9253px; font-family: sans-serif;">f</span><span style="left: 493.007px; top: 400.499px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.987348);">is concave if and only if for all</span><span style="left: 755.963px; top: 400.499px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.17052);">z,x</span><span style="left: 791.277px; top: 400.001px; font-size: 19.9253px; font-family: sans-serif;">∈</span><span style="left: 810.095px; top: 400.499px; font-size: 19.9253px; font-family: sans-serif;">D</span><span style="left: 833.07px; top: 400.499px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.902704);">we have</span><span style="left: 381.463px; top: 442.573px; font-size: 19.9253px; font-family: sans-serif;">f</span><span style="left: 393.207px; top: 442.573px; font-size: 19.9253px; font-family: sans-serif;">(</span><span style="left: 400.795px; top: 442.573px; font-size: 19.9253px; font-family: sans-serif;">z</span><span style="left: 410.745px; top: 442.573px; font-size: 19.9253px; font-family: sans-serif;">)</span><span style="left: 423.867px; top: 442.075px; font-size: 19.9253px; font-family: sans-serif;">≤</span><span style="left: 444.9px; top: 442.573px; font-size: 19.9253px; font-family: sans-serif;">f</span><span style="left: 456.643px; top: 442.573px; font-size: 19.9253px; font-family: sans-serif;">(</span><span style="left: 464.232px; top: 442.573px; font-size: 19.9253px; font-family: sans-serif;">x</span><span style="left: 475.318px; top: 442.573px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.14302);">) +</span><span style="left: 506.935px; top: 442.075px; font-size: 19.9253px; font-family: sans-serif;">∇</span><span style="left: 523.54px; top: 442.573px; font-size: 19.9253px; font-family: sans-serif;">f</span><span style="left: 535.283px; top: 442.573px; font-size: 19.9253px; font-family: sans-serif;">(</span><span style="left: 542.87px; top: 442.573px; font-size: 19.9253px; font-family: sans-serif;">x</span><span style="left: 553.957px; top: 442.573px; font-size: 19.9253px; font-family: sans-serif;">)</span><span style="left: 561.545px; top: 440.071px; font-size: 13.2835px; font-family: sans-serif;">T</span><span style="left: 572.552px; top: 442.573px; font-size: 19.9253px; font-family: sans-serif;">(</span><span style="left: 580.14px; top: 442.573px; font-size: 19.9253px; font-family: sans-serif;">z</span><span style="left: 594.518px; top: 442.075px; font-size: 19.9253px; font-family: sans-serif;">−</span><span style="left: 614.443px; top: 442.573px; font-size: 19.9253px; font-family: sans-serif;">x</span><span style="left: 625.53px; top: 442.573px; font-size: 19.9253px; font-family: sans-serif;">)</span><span style="left: 633.117px; top: 442.573px; font-size: 19.9253px; font-family: sans-serif;">.</span><span style="left: 875.07px; top: 442.573px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.02474);">(1)</span><span style="left: 120px; top: 484.648px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.997075);">The right hand side of this inequality is the first-order Taylor approximation of the function</span><span style="left: 120px; top: 508.724px; font-size: 19.9253px; font-family: sans-serif;">f</span><span style="left: 138.877px; top: 508.724px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.04467);">at</span><span style="left: 163.35px; top: 508.724px; font-size: 19.9253px; font-family: sans-serif;">x</span><span style="left: 174.437px; top: 508.724px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.00727);">, so this inequality states that for a concave function, the Taylor approximation is a</span><span style="left: 120px; top: 532.799px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.991485);">global upper bound on the function.</span><span style="left: 149.265px; top: 556.876px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.00001);">By adding (1) and the same inequality with</span><span style="left: 530.898px; top: 556.876px; font-size: 19.9253px; font-family: sans-serif;">x</span><span style="left: 548.488px; top: 556.876px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.946451);">and</span><span style="left: 586.425px; top: 556.876px; font-size: 19.9253px; font-family: sans-serif;">z</span><span style="left: 602.878px; top: 556.876px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.976188);">swapped, we obtain the inequality</span><span style="left: 379.537px; top: 598.951px; font-size: 19.9253px; font-family: sans-serif;">(</span><span style="left: 387.125px; top: 598.453px; font-size: 19.9253px; font-family: sans-serif;">∇</span><span style="left: 403.728px; top: 598.951px; font-size: 19.9253px; font-family: sans-serif;">f</span><span style="left: 415.473px; top: 598.951px; font-size: 19.9253px; font-family: sans-serif;">(</span><span style="left: 423.06px; top: 598.951px; font-size: 19.9253px; font-family: sans-serif;">z</span><span style="left: 433.012px; top: 598.951px; font-size: 19.9253px; font-family: sans-serif;">)</span><span style="left: 445.027px; top: 598.453px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.46445);">−∇</span><span style="left: 481.557px; top: 598.951px; font-size: 19.9253px; font-family: sans-serif;">f</span><span style="left: 493.3px; top: 598.951px; font-size: 19.9253px; font-family: sans-serif;">(</span><span style="left: 500.887px; top: 598.951px; font-size: 19.9253px; font-family: sans-serif;">x</span><span style="left: 511.975px; top: 598.951px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.14461);">))</span><span style="left: 527.148px; top: 596.448px; font-size: 13.2835px; font-family: sans-serif;">T</span><span style="left: 538.157px; top: 598.951px; font-size: 19.9253px; font-family: sans-serif;">(</span><span style="left: 545.743px; top: 598.951px; font-size: 19.9253px; font-family: sans-serif;">z</span><span style="left: 560.122px; top: 598.453px; font-size: 19.9253px; font-family: sans-serif;">−</span><span style="left: 580.047px; top: 598.951px; font-size: 19.9253px; font-family: sans-serif;">x</span><span style="left: 591.133px; top: 598.951px; font-size: 19.9253px; font-family: sans-serif;">)</span><span style="left: 604.257px; top: 598.453px; font-size: 19.9253px; font-family: sans-serif;">≤</span><span style="left: 625.288px; top: 598.951px; font-size: 19.9253px; font-family: sans-serif;">0</span><span style="left: 635.043px; top: 598.951px; font-size: 19.9253px; font-family: sans-serif;">,</span><span style="left: 875.07px; top: 598.951px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.02474);">(2)</span><span style="left: 120px; top: 641.024px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.965898);">valid for any concave</span><span style="left: 307.538px; top: 641.024px; font-size: 19.9253px; font-family: sans-serif;">f</span><span style="left: 326.2px; top: 641.024px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.946451);">and</span><span style="left: 364.548px; top: 641.024px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.17052);">z,x</span><span style="left: 400.563px; top: 640.526px; font-size: 19.9253px; font-family: sans-serif;">∈</span><span style="left: 420.085px; top: 641.024px; font-size: 19.9253px; font-family: sans-serif;">D</span><span style="left: 436.827px; top: 641.024px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.994572);">.  This inequality states that for a concave function</span><span style="left: 882.837px; top: 641.024px; font-size: 19.9253px; font-family: sans-serif;">f</span><span style="left: 894.58px; top: 641.024px; font-size: 19.9253px; font-family: sans-serif;">,</span><span style="left: 120px; top: 664.603px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.2871);">−∇</span><span style="left: 152.102px; top: 665.101px; font-size: 19.9253px; font-family: sans-serif;">f</span><span style="left: 170.35px; top: 665.101px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.970075);">is a monotone operator [RB16].</span><span style="left: 120px; top: 717.89px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.1321);">Convex optimization.</span><span style="left: 348.68px; top: 716.774px; font-size: 19.9253px; font-family: sans-serif;">A</span><span style="left: 369.808px; top: 717.89px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.9567);">convex optimization problem</span><span style="left: 619.148px; top: 716.774px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.975799);">has the form</span><span style="left: 354.348px; top: 757.159px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.980044);">minimize</span><span style="left: 456.145px; top: 757.159px; font-size: 19.9253px; font-family: sans-serif;">f</span><span style="left: 465.762px; top: 765.131px; font-size: 13.2835px; font-family: sans-serif;">0</span><span style="left: 473.65px; top: 757.159px; font-size: 19.9253px; font-family: sans-serif;">(</span><span style="left: 481.237px; top: 757.159px; font-size: 19.9253px; font-family: sans-serif;">x</span><span style="left: 492.323px; top: 757.159px; font-size: 19.9253px; font-family: sans-serif;">)</span><span style="left: 354.348px; top: 781.236px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.999959);">subject to</span><span style="left: 456.145px; top: 781.236px; font-size: 19.9253px; font-family: sans-serif;">f</span><span style="left: 465.762px; top: 789.951px; font-size: 13.2835px; font-family: sans-serif;">i</span><span style="left: 471.398px; top: 781.236px; font-size: 19.9253px; font-family: sans-serif;">(</span><span style="left: 478.985px; top: 781.236px; font-size: 19.9253px; font-family: sans-serif;">x</span><span style="left: 490.072px; top: 781.236px; font-size: 19.9253px; font-family: sans-serif;">)</span><span style="left: 503.193px; top: 780.738px; font-size: 19.9253px; font-family: sans-serif;">≤</span><span style="left: 524.227px; top: 781.236px; font-size: 19.9253px; font-family: sans-serif;">0</span><span style="left: 533.982px; top: 781.236px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.66121);">,  i</span><span style="left: 574.422px; top: 781.236px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.07948);">= 1</span><span style="left: 604.885px; top: 781.236px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.37362);">,...,m</span><span style="left: 456.145px; top: 805.313px; font-size: 19.9253px; font-family: sans-serif;">g</span><span style="left: 465.488px; top: 814.026px; font-size: 13.2835px; font-family: sans-serif;">i</span><span style="left: 471.123px; top: 805.313px; font-size: 19.9253px; font-family: sans-serif;">(</span><span style="left: 478.71px; top: 805.313px; font-size: 19.9253px; font-family: sans-serif;">x</span><span style="left: 489.797px; top: 805.313px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.0795);">) = 0</span><span style="left: 533.383px; top: 805.313px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.66121);">,  i</span><span style="left: 573.823px; top: 805.313px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.07948);">= 1</span><span style="left: 604.288px; top: 805.313px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.3311);">,...,p,</span><span style="left: 120px; top: 846.326px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.919654);">where</span><span style="left: 175.45px; top: 846.326px; font-size: 19.9253px; font-family: sans-serif;">x</span><span style="left: 192.072px; top: 845.828px; font-size: 19.9253px; font-family: sans-serif;">∈</span><span style="left: 210.89px; top: 847.442px; font-size: 19.9253px; font-family: sans-serif;">R</span><span style="left: 227.61px; top: 843.638px; font-size: 13.2835px; font-family: sans-serif;">n</span><span style="left: 242.595px; top: 846.326px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.98637);">is the optimization variable, the objective function</span><span style="left: 674.935px; top: 846.326px; font-size: 19.9253px; font-family: sans-serif;">f</span><span style="left: 684.552px; top: 854.296px; font-size: 13.2835px; font-family: sans-serif;">0</span><span style="left: 697.973px; top: 846.326px; font-size: 19.9253px; font-family: sans-serif;">:</span><span style="left: 708.928px; top: 846.326px; font-size: 19.9253px; font-family: sans-serif;">D</span><span style="left: 731.203px; top: 845.828px; font-size: 19.9253px; font-family: sans-serif;">→</span><span style="left: 756.663px; top: 847.442px; font-size: 19.9253px; font-family: sans-serif;">R</span><span style="left: 778.975px; top: 846.326px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.985131);">and inequality</span><span style="left: 120px; top: 870.403px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.984145);">constraint functions</span><span style="left: 294.782px; top: 870.403px; font-size: 19.9253px; font-family: sans-serif;">f</span><span style="left: 304.398px; top: 879.116px; font-size: 13.2835px; font-family: sans-serif;">i</span><span style="left: 315.568px; top: 870.403px; font-size: 19.9253px; font-family: sans-serif;">:</span><span style="left: 326.523px; top: 870.403px; font-size: 19.9253px; font-family: sans-serif;">D</span><span style="left: 348.798px; top: 869.905px; font-size: 19.9253px; font-family: sans-serif;">→</span><span style="left: 374.258px; top: 871.518px; font-size: 19.9253px; font-family: sans-serif;">R</span><span style="left: 396.968px; top: 870.403px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.971781);">are convex, and the equality constraint functions</span><span style="left: 816.96px; top: 870.403px; font-size: 19.9253px; font-family: sans-serif;">g</span><span style="left: 826.302px; top: 879.116px; font-size: 13.2835px; font-family: sans-serif;">i</span><span style="left: 837.472px; top: 870.403px; font-size: 19.9253px; font-family: sans-serif;">:</span><span style="left: 848.427px; top: 871.518px; font-size: 19.9253px; font-family: sans-serif;">R</span><span style="left: 865.147px; top: 867.715px; font-size: 13.2835px; font-family: sans-serif;">n</span><span style="left: 880.075px; top: 869.905px; font-size: 19.9253px; font-family: sans-serif;">→</span><span style="left: 120px; top: 895.595px; font-size: 19.9253px; font-family: sans-serif;">R</span><span style="left: 143.128px; top: 894.479px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.945639);">are affine,</span><span style="left: 232.923px; top: 895.595px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.01298);">i.e.</span><span style="left: 259.822px; top: 894.479px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.977589);">, have the form</span><span style="left: 396.035px; top: 894.479px; font-size: 19.9253px; font-family: sans-serif;">g</span><span style="left: 405.377px; top: 903.193px; font-size: 13.2835px; font-family: sans-serif;">i</span><span style="left: 411.012px; top: 894.479px; font-size: 19.9253px; font-family: sans-serif;">(</span><span style="left: 418.6px; top: 894.479px; font-size: 19.9253px; font-family: sans-serif;">x</span><span style="left: 429.687px; top: 894.479px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.18993);">) =</span><span style="left: 463.517px; top: 894.479px; font-size: 19.9253px; font-family: sans-serif;">a</span><span style="left: 473.758px; top: 892.973px; font-size: 13.2835px; font-family: sans-serif;">T</span><span style="left: 473.758px; top: 905.13px; font-size: 13.2835px; font-family: sans-serif;">i</span><span style="left: 484.767px; top: 894.479px; font-size: 19.9253px; font-family: sans-serif;">x</span><span style="left: 500.088px; top: 894.479px; font-size: 19.9253px; font-family: sans-serif;">+</span><span style="left: 519.498px; top: 894.479px; font-size: 19.9253px; font-family: sans-serif;">b</span><span style="left: 527.795px; top: 903.193px; font-size: 13.2835px; font-family: sans-serif;">i</span><span style="left: 539.838px; top: 894.479px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.93109);">for some</span><span style="left: 618.342px; top: 894.479px; font-size: 19.9253px; font-family: sans-serif;">a</span><span style="left: 628.583px; top: 903.193px; font-size: 13.2835px; font-family: sans-serif;">i</span><span style="left: 639.753px; top: 893.981px; font-size: 19.9253px; font-family: sans-serif;">∈</span><span style="left: 658.572px; top: 895.595px; font-size: 19.9253px; font-family: sans-serif;">R</span><span style="left: 675.292px; top: 891.791px; font-size: 13.2835px; font-family: sans-serif;">n</span><span style="left: 691.095px; top: 894.479px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.946451);">and</span><span style="left: 728.937px; top: 894.479px; font-size: 19.9253px; font-family: sans-serif;">b</span><span style="left: 737.232px; top: 903.193px; font-size: 13.2835px; font-family: sans-serif;">i</span><span style="left: 748.402px; top: 893.981px; font-size: 19.9253px; font-family: sans-serif;">∈</span><span style="left: 767.22px; top: 895.595px; font-size: 19.9253px; font-family: sans-serif;">R</span><span style="left: 783.94px; top: 894.479px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.907131);">.  (We assume</span><span style="left: 120px; top: 918.556px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.944159);">the  domains  of  the  objective  and  inequality  functions  are  the  same  for  simplicity.)   The</span><span style="left: 120px; top: 942.631px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.00117);">goal is to find a</span><span style="left: 260.715px; top: 943.747px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.972854);">solution</span><span style="left: 335.615px; top: 942.631px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.983736);">of the problem, which is a value of</span><span style="left: 638.34px; top: 942.631px; font-size: 19.9253px; font-family: sans-serif;">x</span><span style="left: 656.088px; top: 942.631px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.997585);">that minimizes the objective</span><span style="left: 120px; top: 966.708px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.954935);">function,  among  all</span><span style="left: 298.773px; top: 966.708px; font-size: 19.9253px; font-family: sans-serif;">x</span><span style="left: 318.51px; top: 966.708px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.950606);">satisfying  the  constraints</span><span style="left: 544.87px; top: 966.708px; font-size: 19.9253px; font-family: sans-serif;">f</span><span style="left: 554.487px; top: 975.421px; font-size: 13.2835px; font-family: sans-serif;">i</span><span style="left: 560.122px; top: 966.708px; font-size: 19.9253px; font-family: sans-serif;">(</span><span style="left: 567.708px; top: 966.708px; font-size: 19.9253px; font-family: sans-serif;">x</span><span style="left: 578.795px; top: 966.708px; font-size: 19.9253px; font-family: sans-serif;">)</span><span style="left: 595.572px; top: 966.21px; font-size: 19.9253px; font-family: sans-serif;">≤</span><span style="left: 620.257px; top: 966.708px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.914082);">0,</span><span style="left: 644.618px; top: 966.708px; font-size: 19.9253px; font-family: sans-serif;">i</span><span style="left: 660.462px; top: 966.708px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.01064);">=  1</span><span style="left: 694.58px; top: 966.708px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.37362);">,...,m</span><span style="left: 755.347px; top: 966.708px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.924404);">,  and</span><span style="left: 810.035px; top: 966.708px; font-size: 19.9253px; font-family: sans-serif;">g</span><span style="left: 819.378px; top: 975.421px; font-size: 13.2835px; font-family: sans-serif;">i</span><span style="left: 825.013px; top: 966.708px; font-size: 19.9253px; font-family: sans-serif;">(</span><span style="left: 832.6px; top: 966.708px; font-size: 19.9253px; font-family: sans-serif;">x</span><span style="left: 843.687px; top: 966.708px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.988263);">)  =  0,</span><span style="left: 120px; top: 990.784px; font-size: 19.9253px; font-family: sans-serif;">i</span><span style="left: 134.595px; top: 990.784px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.16419);">= 1</span><span style="left: 167.463px; top: 990.784px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.38126);">,...,p</span><span style="left: 228.872px; top: 990.784px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.01943);">[BV04, Chap. 4].  In the sequel we will refer to the problem of maximizing a</span><span style="left: 120px; top: 1014.86px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.967367);">concave function, subject to convex inequality constraints and affine equality constraints, as</span><span style="left: 120px; top: 1038.94px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.990503);">a convex optimization problem, since this problem is equivalent to minimizing</span><span style="left: 798.723px; top: 1038.44px; font-size: 19.9253px; font-family: sans-serif;">−</span><span style="left: 814.222px; top: 1038.94px; font-size: 19.9253px; font-family: sans-serif;">f</span><span style="left: 823.838px; top: 1046.91px; font-size: 13.2835px; font-family: sans-serif;">0</span><span style="left: 838.652px; top: 1038.94px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.972572);">subject</span><span style="left: 120px; top: 1063.01px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.991262);">to the constraints.</span><span style="left: 149.265px; top: 1087.09px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.92309);">Convex  optimization  problems  are  notable  because  they  have  many  applications,  in  a</span><span style="left: 120px; top: 1111.17px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.990493);">wide variety of fields, and because they can be solved reliably and efficiently [BV04].  The</span><span style="left: 120px; top: 1135.24px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.944992);">list  of  applications  of  convex  optimization  is  large  and  still  growing.   It  has  applications</span><span style="left: 505.123px; top: 1185.06px; font-size: 19.9253px; font-family: sans-serif;">5</span><div class="endOfContent"></div></div><div class="annotationLayer"><section data-annotation-id="203R" class="linkAnnotation" style="transform: matrix(1.66667, 0, 0, 1.66667, 0, 0); transform-origin: -198.62px -174.369px; left: 198.62px; top: 174.369px; width: 30.764px; height: 13.947px;"><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#cite.boyd2004convex" class="internalLink"></a></section><section data-annotation-id="204R" class="linkAnnotation" style="transform: matrix(1.66667, 0, 0, 1.66667, 0, 0); transform-origin: -150.017px -333.13px; left: 150.017px; top: 333.13px; width: 7.846px; height: 13.947px;"><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#equation.1.1" class="internalLink"></a></section><section data-annotation-id="205R" class="linkAnnotation" style="transform: matrix(1.66667, 0, 0, 1.66667, 0, 0); transform-origin: -227.118px -398.064px; left: 227.118px; top: 398.064px; width: 30.603px; height: 13.948px;"><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#cite.ryuPrimerMonotoneOperator2016" class="internalLink"></a></section><section data-annotation-id="206R" class="linkAnnotation" style="transform: matrix(1.66667, 0, 0, 1.66667, 0, 0); transform-origin: -139.579px -593.474px; left: 139.579px; top: 593.474px; width: 30.763px; height: 13.948px;"><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#cite.boyd2004convex" class="internalLink"></a></section><section data-annotation-id="207R" class="linkAnnotation" style="transform: matrix(1.66667, 0, 0, 1.66667, 0, 0); transform-origin: -476.675px -665.704px; left: 476.675px; top: 665.704px; width: 30.763px; height: 13.947px;"><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#cite.boyd2004convex" class="internalLink"></a></section></div></div><div class="page" data-page-number="6" style="width: 1019px; height: 1319px;" data-loaded="true"><div class="canvasWrapper" style="width: 1019px; height: 1319px;"><canvas id="page6" width="2550" height="3300" style="width: 1020px; height: 1320px;"></canvas></div><div class="textLayer" style="width: 1019px; height: 1319px;"><span style="left: 120px; top: 124.981px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.935846);">in  vehicle  control  [SB08, Bla16, LB14],  finance  [CT06, BBD</span><span style="left: 632.575px; top: 122.732px; font-size: 13.2835px; font-family: sans-serif;">+</span><span style="left: 644.382px; top: 124.981px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.913113);">17],  dynamic  energy  manage-</span><span style="left: 120px; top: 149.058px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.973236);">ment [MBBW19], resource allocation [ABN</span><span style="left: 485.003px; top: 146.809px; font-size: 13.2835px; font-family: sans-serif;">+</span><span style="left: 496.812px; top: 149.058px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.964378);">21], machine learning [FHT01,BPC</span><span style="left: 794.513px; top: 146.809px; font-size: 13.2835px; font-family: sans-serif;">+</span><span style="left: 806.32px; top: 149.058px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.923603);">11], inverse</span><span style="left: 120px; top: 173.134px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.959555);">design of physical systems [AVB21], circuit design [HBL01, BKPH05], and many other fields.</span><span style="left: 149.265px; top: 197.211px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.930751);">In  practice,  once  a  problem  is  formulated  as  a  convex  optimization  problem,  we  can</span><span style="left: 120px; top: 221.286px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.931724);">use  off-the-shelf  solvers  (software  implementations  of  numerical  algorithms)  to  obtain  so-</span><span style="left: 120px; top: 245.363px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.912419);">lutions.   Several  solvers,  such  as  OSQP  [SBG</span><span style="left: 520.747px; top: 243.114px; font-size: 13.2835px; font-family: sans-serif;">+</span><span style="left: 532.555px; top: 245.363px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.930303);">20],  SCS  [OCPB16],  ECOS  [DCB13],  and</span><span style="left: 120px; top: 269.439px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.981907);">COSMO [GCG19], are free and open source, while others, like MOSEK [ApS19], are com-</span><span style="left: 120px; top: 293.516px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.961758);">mercial.  These solvers can handle problems with thousands of variables in seconds or less,</span><span style="left: 120px; top: 317.593px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.932557);">and  millions  of  variables  in  minutes.   Small  to  medium-size  problems  can  be  solved  ex-</span><span style="left: 120px; top: 341.669px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.967824);">tremely quickly using embedded solvers [DCB13, SBG</span><span style="left: 585.8px; top: 339.419px; font-size: 13.2835px; font-family: sans-serif;">+</span><span style="left: 597.607px; top: 341.669px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.969028);">20, WB10] or code generation tools</span><span style="left: 120px; top: 365.744px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.9546);">[MB12, CPDB13, BSM</span><span style="left: 311.145px; top: 363.496px; font-size: 13.2835px; font-family: sans-serif;">+</span><span style="left: 322.952px; top: 365.744px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.95685);">17].  For example, the aerospace and space transportation company</span><span style="left: 120px; top: 389.821px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.93377);">SpaceX  uses  CVXGEN  [MB12]  to  solve  convex  optimization  problems  in  real-time  when</span><span style="left: 120px; top: 413.898px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.978897);">landing the first stages of its rockets [Bla16].</span><span style="left: 120px; top: 466.972px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.10383);">Domain-specific languages for convex optimization.</span><span style="left: 640.245px; top: 465.856px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.974131);">Convex optimization problems</span><span style="left: 120px; top: 489.933px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.959114);">are often specified using domain-specific languages (DSLs) for convex optimization, such as</span><span style="left: 120px; top: 514.008px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.986465);">CVXPY [DB16, AVDB18] or JuMP [DHL17], which compile high-level descriptions of prob-</span><span style="left: 120px; top: 538.084px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.973723);">lems into low-level standard forms required by solvers.  The DSL then invokes a solver and</span><span style="left: 120px; top: 562.161px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.966928);">retrieves a solution on the user’s behalf.  DSLs vastly reduce the engineering effort required</span><span style="left: 120px; top: 586.238px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.00268);">to get started with convex optimization, and in many cases are fast enough to be used in</span><span style="left: 120px; top: 610.314px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.973691);">production.  Using such DSLs, the convex optimization problems that we describe later can</span><span style="left: 120px; top: 634.391px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.01288);">all be implemented in just a few lines of code that very closely parallel the mathematical</span><span style="left: 120px; top: 658.466px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.96782);">specification of the problems.</span><span style="left: 120px; top: 720.054px; font-size: 28.6923px; font-family: sans-serif; transform: scaleX(1.11545);">2    Constant function market makers</span><span style="left: 120px; top: 768.831px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.956918);">In this section we describe how CFMMs work.  We consider a DEX with</span><span style="left: 727.135px; top: 768.831px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.14647);">n &gt;</span><span style="left: 765.025px; top: 768.831px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.903451);">1 assets, labeled</span><span style="left: 120px; top: 792.908px; font-size: 19.9253px; font-family: sans-serif;">1</span><span style="left: 129.755px; top: 792.908px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.42916);">,...,n</span><span style="left: 185.102px; top: 792.908px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.99625);">, that implements a CFMM. Asset</span><span style="left: 484.397px; top: 792.908px; font-size: 19.9253px; font-family: sans-serif;">n</span><span style="left: 502.192px; top: 792.908px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.951076);">is our numeraire, the asset we use to value and</span><span style="left: 120px; top: 816.983px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.958604);">assign prices to the others.</span><span style="left: 120px; top: 873.103px; font-size: 23.9103px; font-family: sans-serif; transform: scaleX(1.12907);">2.1    CFMM state</span><span style="left: 120px; top: 912.813px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.04782);">Reserve  or  pool.</span><span style="left: 304.133px; top: 911.698px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.909045);">The  DEX  has  some</span><span style="left: 484.422px; top: 912.813px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.881017);">reserves</span><span style="left: 561.622px; top: 911.698px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.90212);">of  available  assets,  given  by  the  vector</span><span style="left: 120px; top: 935.774px; font-size: 19.9253px; font-family: sans-serif;">R</span><span style="left: 140.548px; top: 935.276px; font-size: 19.9253px; font-family: sans-serif;">∈</span><span style="left: 159.367px; top: 936.89px; font-size: 19.9253px; font-family: sans-serif;">R</span><span style="left: 176.087px; top: 933.086px; font-size: 13.2835px; font-family: sans-serif;">n</span><span style="left: 176.087px; top: 945.681px; font-size: 13.2835px; font-family: sans-serif;">+</span><span style="left: 187.895px; top: 935.774px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.946353);">, where</span><span style="left: 256.18px; top: 935.774px; font-size: 19.9253px; font-family: sans-serif;">R</span><span style="left: 271.03px; top: 944.488px; font-size: 13.2835px; font-family: sans-serif;">i</span><span style="left: 283.168px; top: 935.774px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.983918);">is the quantity of asset</span><span style="left: 484.555px; top: 935.774px; font-size: 19.9253px; font-family: sans-serif;">i</span><span style="left: 497.713px; top: 935.774px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.941364);">in the reserves.</span><span style="left: 120px; top: 988.848px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.11735);">Liquidity  provider  share  weights.</span><span style="left: 475.78px; top: 987.733px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.970661);">The  DEX  maintains  a  table  of  all  the</span><span style="left: 831.755px; top: 988.848px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.02798);">liquidity</span><span style="left: 120px; top: 1012.92px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.943085);">providers</span><span style="left: 197.212px; top: 1011.81px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.972623);">,  agents who have contributed assets to the reserves.  The table includes weights</span><span style="left: 120px; top: 1035.88px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.986378);">representing the fraction of the reserves each liquidity provider has a claim to.  We denote</span><span style="left: 120px; top: 1059.96px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.930204);">these weights as</span><span style="left: 264.957px; top: 1059.96px; font-size: 19.9253px; font-family: sans-serif;">v</span><span style="left: 274.39px; top: 1067.93px; font-size: 13.2835px; font-family: sans-serif;">1</span><span style="left: 282.277px; top: 1059.96px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.41277);">,...,v</span><span style="left: 335.41px; top: 1068.67px; font-size: 13.2835px; font-family: sans-serif;">N</span><span style="left: 348.857px; top: 1059.96px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.956426);">, where</span><span style="left: 418.312px; top: 1059.96px; font-size: 19.9253px; font-family: sans-serif;">N</span><span style="left: 443.038px; top: 1059.96px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.992809);">is the number of liquidity providers.  The weights are</span><span style="left: 120px; top: 1084.04px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.966531);">nonnegative and sum to one,</span><span style="left: 375.292px; top: 1085.15px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.01298);">i.e.</span><span style="left: 402.192px; top: 1084.04px; font-size: 19.9253px; font-family: sans-serif;">,</span><span style="left: 414.742px; top: 1084.04px; font-size: 19.9253px; font-family: sans-serif;">v</span><span style="left: 431.278px; top: 1083.54px; font-size: 19.9253px; font-family: sans-serif;">≥</span><span style="left: 453.167px; top: 1084.04px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.97105);">0, and</span><span style="left: 513.91px; top: 1083.24px; font-size: 19.9253px; font-family: sans-serif;">∑</span><span style="left: 534.943px; top: 1080.08px; font-size: 13.2835px; font-family: sans-serif;">N</span><span style="left: 534.943px; top: 1095.57px; font-size: 13.2835px; font-family: sans-serif;">i</span><span style="left: 539.748px; top: 1094.83px; font-size: 13.2835px; font-family: sans-serif; transform: scaleX(1.19243);">=1</span><span style="left: 561.933px; top: 1084.04px; font-size: 19.9253px; font-family: sans-serif;">v</span><span style="left: 571.365px; top: 1092.75px; font-size: 13.2835px; font-family: sans-serif;">i</span><span style="left: 583.392px; top: 1084.04px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.989111);">= 1.  The weights</span><span style="left: 740.893px; top: 1084.04px; font-size: 19.9253px; font-family: sans-serif;">v</span><span style="left: 750.327px; top: 1092.75px; font-size: 13.2835px; font-family: sans-serif;">i</span><span style="left: 762.967px; top: 1084.04px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.982771);">and the number</span><span style="left: 120px; top: 1108.11px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.01967);">of liquidity providers</span><span style="left: 306.633px; top: 1108.11px; font-size: 19.9253px; font-family: sans-serif;">N</span><span style="left: 331.597px; top: 1108.11px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.00725);">can change over time, with addition of new liquidity providers, or</span><span style="left: 120px; top: 1132.19px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.989274);">the deletion from the table of any liquidity provider whose weight is zero.</span><span style="left: 505.123px; top: 1185.06px; font-size: 19.9253px; font-family: sans-serif;">6</span><div class="endOfContent"></div></div><div class="annotationLayer"><section data-annotation-id="208R" class="linkAnnotation" style="transform: matrix(1.66667, 0, 0, 1.66667, 0, 0); transform-origin: -169.129px -73.805px; left: 169.129px; top: 73.805px; width: 28.492px; height: 14.135px;"><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#cite.stewart2008model" class="internalLink"></a></section><section data-annotation-id="209R" class="linkAnnotation" style="transform: matrix(1.66667, 0, 0, 1.66667, 0, 0); transform-origin: -201.102px -73.805px; left: 201.102px; top: 73.805px; width: 31.093px; height: 14.135px;"><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#cite.spacex" class="internalLink"></a></section><section data-annotation-id="210R" class="linkAnnotation" style="transform: matrix(1.66667, 0, 0, 1.66667, 0, 0); transform-origin: -235.677px -73.805px; left: 235.677px; top: 73.805px; width: 29.302px; height: 14.135px;"><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#cite.lipp2014minimum" class="internalLink"></a></section><section data-annotation-id="211R" class="linkAnnotation" style="transform: matrix(1.66667, 0, 0, 1.66667, 0, 0); transform-origin: -318.941px -73.805px; left: 318.941px; top: 73.805px; width: 30.607px; height: 14.135px;"><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#cite.cornuejols2006" class="internalLink"></a></section><section data-annotation-id="212R" class="linkAnnotation" style="transform: matrix(1.66667, 0, 0, 1.66667, 0, 0); transform-origin: -353.029px -73.805px; left: 353.029px; top: 73.805px; width: 46.303px; height: 14.135px;"><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#cite.boyd2017multi" class="internalLink"></a></section><section data-annotation-id="213R" class="linkAnnotation" style="transform: matrix(1.66667, 0, 0, 1.66667, 0, 0); transform-origin: -102.894px -88.251px; left: 102.894px; top: 88.251px; width: 53.031px; height: 14.135px;"><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#cite.moehle2018dynamicnot" class="internalLink"></a></section><section data-annotation-id="214R" class="linkAnnotation" style="transform: matrix(1.66667, 0, 0, 1.66667, 0, 0); transform-origin: -264.166px -88.251px; left: 264.166px; top: 88.251px; width: 46.623px; height: 14.135px;"><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#cite.agrawal2021allocation" class="internalLink"></a></section><section data-annotation-id="215R" class="linkAnnotation" style="transform: matrix(1.66667, 0, 0, 1.66667, 0, 0); transform-origin: -410.511px -88.251px; left: 410.511px; top: 88.251px; width: 38.567px; height: 14.135px;"><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#cite.friedman2001elements" class="internalLink"></a></section><section data-annotation-id="216R" class="linkAnnotation" style="transform: matrix(1.66667, 0, 0, 1.66667, 0, 0); transform-origin: -451.003px -88.251px; left: 451.003px; top: 88.251px; width: 45.491px; height: 14.135px;"><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#cite.boyd2011distributed" class="internalLink"></a></section><section data-annotation-id="217R" class="linkAnnotation" style="transform: matrix(1.66667, 0, 0, 1.66667, 0, 0); transform-origin: -209.514px -102.884px; left: 209.514px; top: 102.884px; width: 38.238px; height: 13.948px;"><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#cite.angerisHeuristicMethodsPerformance2021" class="internalLink"></a></section><section data-annotation-id="218R" class="linkAnnotation" style="transform: matrix(1.66667, 0, 0, 1.66667, 0, 0); transform-origin: -330.067px -102.884px; left: 330.067px; top: 102.884px; width: 38.078px; height: 13.948px;"><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#cite.hershenson2001opamp" class="internalLink"></a></section><section data-annotation-id="219R" class="linkAnnotation" style="transform: matrix(1.66667, 0, 0, 1.66667, 0, 0); transform-origin: -370.411px -102.884px; left: 370.411px; top: 102.884px; width: 47.829px; height: 13.948px;"><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#cite.boyd2005digital" class="internalLink"></a></section><section data-annotation-id="220R" class="linkAnnotation" style="transform: matrix(1.66667, 0, 0, 1.66667, 0, 0); transform-origin: -287.474px -146.034px; left: 287.474px; top: 146.034px; width: 44.761px; height: 14.135px;"><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#cite.stellatoOSQPOperatorSplitting2020" class="internalLink"></a></section><section data-annotation-id="221R" class="linkAnnotation" style="transform: matrix(1.66667, 0, 0, 1.66667, 0, 0); transform-origin: -372.385px -146.034px; left: 372.385px; top: 146.034px; width: 47.512px; height: 14.135px;"><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#cite.odonoghueConicOptimizationOperator2016" class="internalLink"></a></section><section data-annotation-id="222R" class="linkAnnotation" style="transform: matrix(1.66667, 0, 0, 1.66667, 0, 0); transform-origin: -470.613px -146.034px; left: 470.613px; top: 146.034px; width: 39.383px; height: 14.135px;"><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#cite.ecos" class="internalLink"></a></section><section data-annotation-id="223R" class="linkAnnotation" style="transform: matrix(1.66667, 0, 0, 1.66667, 0, 0); transform-origin: -122.536px -160.667px; left: 122.536px; top: 160.667px; width: 40.523px; height: 13.948px;"><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#cite.garstkaCOSMOConicOperator2019" class="internalLink"></a></section><section data-annotation-id="224R" class="linkAnnotation" style="transform: matrix(1.66667, 0, 0, 1.66667, 0, 0); transform-origin: -449.794px -160.667px; left: 449.794px; top: 160.667px; width: 35.481px; height: 13.948px;"><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#cite.mosek" class="internalLink"></a></section><section data-annotation-id="225R" class="linkAnnotation" style="transform: matrix(1.66667, 0, 0, 1.66667, 0, 0); transform-origin: -283.977px -203.818px; left: 283.977px; top: 203.818px; width: 39.382px; height: 14.135px;"><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#cite.ecos" class="internalLink"></a></section><section data-annotation-id="226R" class="linkAnnotation" style="transform: matrix(1.66667, 0, 0, 1.66667, 0, 0); transform-origin: -326.506px -203.818px; left: 326.506px; top: 203.818px; width: 44.761px; height: 14.135px;"><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#cite.stellatoOSQPOperatorSplitting2020" class="internalLink"></a></section><section data-annotation-id="227R" class="linkAnnotation" style="transform: matrix(1.66667, 0, 0, 1.66667, 0, 0); transform-origin: -374.413px -203.818px; left: 374.413px; top: 203.818px; width: 34.015px; height: 14.135px;"><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#cite.wang2010fast" class="internalLink"></a></section><section data-annotation-id="228R" class="linkAnnotation" style="transform: matrix(1.66667, 0, 0, 1.66667, 0, 0); transform-origin: -74.255px -218.263px; left: 74.255px; top: 218.263px; width: 32.715px; height: 14.136px;"><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#cite.mattingley2012cvxgen" class="internalLink"></a></section><section data-annotation-id="229R" class="linkAnnotation" style="transform: matrix(1.66667, 0, 0, 1.66667, 0, 0); transform-origin: -109.897px -218.263px; left: 109.897px; top: 218.263px; width: 47.347px; height: 14.136px;"><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#cite.chu2013code" class="internalLink"></a></section><section data-annotation-id="230R" class="linkAnnotation" style="transform: matrix(1.66667, 0, 0, 1.66667, 0, 0); transform-origin: -160.171px -218.263px; left: 160.171px; top: 218.263px; width: 46.303px; height: 14.136px;"><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#cite.osqp_codegen" class="internalLink"></a></section><section data-annotation-id="231R" class="linkAnnotation" style="transform: matrix(1.66667, 0, 0, 1.66667, 0, 0); transform-origin: -200.65px -232.897px; left: 200.65px; top: 232.897px; width: 32.715px; height: 13.947px;"><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#cite.mattingley2012cvxgen" class="internalLink"></a></section><section data-annotation-id="232R" class="linkAnnotation" style="transform: matrix(1.66667, 0, 0, 1.66667, 0, 0); transform-origin: -264.152px -247.342px; left: 264.152px; top: 247.342px; width: 31.093px; height: 13.948px;"><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#cite.spacex" class="internalLink"></a></section><section data-annotation-id="245R" class="linkAnnotation" style="transform: matrix(1.66667, 0, 0, 1.66667, 0, 0); transform-origin: -120.715px -307.409px; left: 120.715px; top: 307.409px; width: 30.928px; height: 13.948px;"><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#cite.diamond2016cvxpy" class="internalLink"></a></section><section data-annotation-id="246R" class="linkAnnotation" style="transform: matrix(1.66667, 0, 0, 1.66667, 0, 0); transform-origin: -154.255px -307.409px; left: 154.255px; top: 307.409px; width: 47.178px; height: 13.948px;"><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#cite.agrawal2018rewriting" class="internalLink"></a></section><section data-annotation-id="247R" class="linkAnnotation" style="transform: matrix(1.66667, 0, 0, 1.66667, 0, 0); transform-origin: -258.7px -307.409px; left: 258.7px; top: 307.409px; width: 38.728px; height: 13.948px;"><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#cite.dunning2017jump" class="internalLink"></a></section></div></div><div class="page" data-page-number="7" style="width: 1019px; height: 1319px;" data-loaded="true"><div class="canvasWrapper" style="width: 1019px; height: 1319px;"><canvas id="page7" width="2550" height="3300" style="width: 1020px; height: 1320px;"></canvas></div><div class="textLayer" style="width: 1019px; height: 1319px;"><span style="left: 120px; top: 126.097px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.13964);">State of the CFMM.</span><span style="left: 336.183px; top: 124.981px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.903246);">The reserves</span><span style="left: 446.082px; top: 124.981px; font-size: 19.9253px; font-family: sans-serif;">R</span><span style="left: 466.078px; top: 124.981px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.981226);">and liquidity provider weights</span><span style="left: 721.862px; top: 124.981px; font-size: 19.9253px; font-family: sans-serif;">v</span><span style="left: 736.99px; top: 124.981px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.975578);">constitute the state</span><span style="left: 120px; top: 149.058px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.941461);">of the DEX. The DEX state changes over time due to any of the three possible</span><span style="left: 772.583px; top: 150.173px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.958426);">transactions</span><span style="left: 877.097px; top: 149.058px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.03497);">: a</span><span style="left: 120px; top: 174.25px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.938688);">trade</span><span style="left: 169.537px; top: 173.134px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.02474);">(or</span><span style="left: 199.922px; top: 174.25px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.877039);">exchange</span><span style="left: 277.128px; top: 173.134px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.06972);">),</span><span style="left: 295.8px; top: 174.25px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.987535);">adding liquidity</span><span style="left: 425.848px; top: 173.134px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.988195);">, or</span><span style="left: 459.732px; top: 174.25px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.983327);">removing liquidity</span><span style="left: 610.95px; top: 173.134px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.929674);">.  These transactions are described</span><span style="left: 120px; top: 197.211px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.04942);">in</span><span style="left: 142.762px; top: 192.23px; font-size: 19.9253px; font-family: monospace;">§</span><span style="left: 151.43px; top: 197.211px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.946469);">2.2 and</span><span style="left: 220.8px; top: 192.23px; font-size: 19.9253px; font-family: monospace;">§</span><span style="left: 229.468px; top: 197.211px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.914082);">2.6.</span><span style="left: 120px; top: 252.845px; font-size: 23.9103px; font-family: sans-serif; transform: scaleX(1.08279);">2.2    Proposed trade</span><span style="left: 120px; top: 291.439px; font-size: 19.9253px; font-family: sans-serif;">A</span><span style="left: 140.925px; top: 292.555px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.906317);">proposed trade</span><span style="left: 270.073px; top: 291.439px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.02474);">(or</span><span style="left: 301.302px; top: 292.555px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.883463);">proposed exchange</span><span style="left: 457.277px; top: 291.439px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.990347);">) is initiated by an agent or trader, who proposes to</span><span style="left: 120px; top: 315.514px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.978048);">trade or exchange one basket of assets for another.  A proposed trade specifies the</span><span style="left: 846.45px; top: 316.63px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.94873);">tender</span><span style="left: 120px; top: 340.707px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.857832);">basket</span><span style="left: 170.312px; top: 339.591px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.00819);">, with quantities given by ∆</span><span style="left: 412.347px; top: 339.093px; font-size: 19.9253px; font-family: sans-serif;">∈</span><span style="left: 431.165px; top: 340.707px; font-size: 19.9253px; font-family: sans-serif;">R</span><span style="left: 447.885px; top: 336.903px; font-size: 13.2835px; font-family: sans-serif;">n</span><span style="left: 447.885px; top: 349.499px; font-size: 13.2835px; font-family: sans-serif;">+</span><span style="left: 459.693px; top: 339.591px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.947437);">, which is the basket of assets the trader proposes to</span><span style="left: 120px; top: 363.668px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.986881);">give (or tender) to the DEX, and the</span><span style="left: 435.648px; top: 364.783px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.870706);">received basket</span><span style="left: 557.035px; top: 363.668px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.936383);">, the basket of assets the trader proposes</span><span style="left: 120px; top: 387.744px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.01279);">to receive from the DEX in return, with quantities given by Λ</span><span style="left: 658.073px; top: 387.246px; font-size: 19.9253px; font-family: sans-serif;">∈</span><span style="left: 677.14px; top: 388.86px; font-size: 19.9253px; font-family: sans-serif;">R</span><span style="left: 693.86px; top: 385.056px; font-size: 13.2835px; font-family: sans-serif;">n</span><span style="left: 693.86px; top: 397.651px; font-size: 13.2835px; font-family: sans-serif;">+</span><span style="left: 705.667px; top: 387.744px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.99416);">.  Here ∆</span><span style="left: 782.657px; top: 396.458px; font-size: 13.2835px; font-family: sans-serif;">i</span><span style="left: 794.942px; top: 387.744px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.06038);">(Λ</span><span style="left: 816.07px; top: 396.458px; font-size: 13.2835px; font-family: sans-serif;">i</span><span style="left: 821.707px; top: 387.744px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.94343);">) denotes</span><span style="left: 120px; top: 411.821px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.941424);">the amount of asset</span><span style="left: 289.907px; top: 411.821px; font-size: 19.9253px; font-family: sans-serif;">i</span><span style="left: 301.862px; top: 411.821px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.979354);">that the trader proposes to tender to the DEX (receive from the DEX).</span><span style="left: 120px; top: 435.896px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.97018);">In the sequel we will refer to the vectors that give the quantities,</span><span style="left: 668.898px; top: 437.012px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.01298);">i.e.</span><span style="left: 695.798px; top: 435.896px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.981362);">, ∆ and Λ, as the tender</span><span style="left: 120px; top: 459.973px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.940025);">and receive baskets, respectively.</span><span style="left: 149.265px; top: 484.049px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.983258);">The proposed trade can either be rejected by the DEX, in which case its state does not</span><span style="left: 120px; top: 508.126px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.994265);">change, or accepted, in which case the basket ∆ is transfered from the trader to the DEX,</span><span style="left: 120px; top: 532.203px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.984517);">and the basket Λ is transfered from the DEX to the trader.  The DEX reserves are updated</span><span style="left: 120px; top: 556.279px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.830031);">as</span><span style="left: 434.158px; top: 580.354px; font-size: 19.9253px; font-family: sans-serif;">R</span><span style="left: 449.173px; top: 577.109px; font-size: 13.2835px; font-family: sans-serif;">+</span><span style="left: 466.515px; top: 580.354px; font-size: 19.9253px; font-family: sans-serif;">=</span><span style="left: 487.225px; top: 580.354px; font-size: 19.9253px; font-family: sans-serif;">R</span><span style="left: 506.667px; top: 580.354px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.22237);">+ ∆</span><span style="left: 546.955px; top: 579.856px; font-size: 19.9253px; font-family: sans-serif;">−</span><span style="left: 566.88px; top: 580.354px; font-size: 19.9253px; font-family: sans-serif;">Λ</span><span style="left: 580.422px; top: 580.354px; font-size: 19.9253px; font-family: sans-serif;">,</span><span style="left: 875.07px; top: 580.354px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.02474);">(3)</span><span style="left: 120px; top: 613.813px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.919654);">where</span><span style="left: 177.688px; top: 613.813px; font-size: 19.9253px; font-family: sans-serif;">R</span><span style="left: 192.702px; top: 611.564px; font-size: 13.2835px; font-family: sans-serif;">+</span><span style="left: 212.338px; top: 613.813px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.972505);">denotes the new reserves.  A proposed trade is accepted or rejected based on a</span><span style="left: 120px; top: 637.889px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.974054);">simple condition described in</span><span style="left: 375.472px; top: 632.908px; font-size: 19.9253px; font-family: monospace;">§</span><span style="left: 384.142px; top: 637.889px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.956831);">2.3, which always ensures that</span><span style="left: 650.018px; top: 637.889px; font-size: 19.9253px; font-family: sans-serif;">R</span><span style="left: 665.033px; top: 635.641px; font-size: 13.2835px; font-family: sans-serif;">+</span><span style="left: 682.375px; top: 637.391px; font-size: 19.9253px; font-family: sans-serif;">≥</span><span style="left: 703.408px; top: 637.889px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.914082);">0.</span><span style="left: 120px; top: 690.477px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.09928);">Disjoint support of tender and receive baskets.</span><span style="left: 589.552px; top: 689.361px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.974072);">Intuition suggests that a trade would</span><span style="left: 120px; top: 713.438px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.991648);">not include an asset in both the proposed tender and receive baskets,</span><span style="left: 737.448px; top: 714.553px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.01298);">i.e.</span><span style="left: 764.348px; top: 713.438px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.972836);">,  we should not</span><span style="left: 120px; top: 737.514px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.00963);">have ∆</span><span style="left: 181.458px; top: 746.228px; font-size: 13.2835px; font-family: sans-serif;">i</span><span style="left: 193.817px; top: 737.514px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.993279);">and Λ</span><span style="left: 245.513px; top: 746.228px; font-size: 13.2835px; font-family: sans-serif;">i</span><span style="left: 257.872px; top: 737.514px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.990901);">both positive.  We will see later that while it is possible to include an asset</span><span style="left: 120px; top: 761.591px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.955134);">in both baskets, it never makes sense to do so.  This means that ∆ and Λ can be assumed to</span><span style="left: 120px; top: 785.666px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.979097);">have disjoint support,</span><span style="left: 310.128px; top: 786.782px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.01298);">i.e.</span><span style="left: 337.027px; top: 785.666px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.971158);">, we have ∆</span><span style="left: 436.975px; top: 794.381px; font-size: 13.2835px; font-family: sans-serif;">i</span><span style="left: 442.612px; top: 785.666px; font-size: 19.9253px; font-family: sans-serif;">Λ</span><span style="left: 456.153px; top: 794.381px; font-size: 13.2835px; font-family: sans-serif;">i</span><span style="left: 467.323px; top: 785.666px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.972625);">= 0 for each</span><span style="left: 575.92px; top: 785.666px; font-size: 19.9253px; font-family: sans-serif;">i</span><span style="left: 582.575px; top: 785.666px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.969215);">.  This allows us to define two disjoint</span><span style="left: 120px; top: 809.743px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.94769);">sets of assets associated with a proposed or accepted trade:</span><span style="left: 341.045px; top: 849.953px; font-size: 19.9253px; font-family: sans-serif;">T</span><span style="left: 362.497px; top: 850.451px; font-size: 19.9253px; font-family: sans-serif;">=</span><span style="left: 383.205px; top: 849.953px; font-size: 19.9253px; font-family: sans-serif;">{</span><span style="left: 393.168px; top: 850.451px; font-size: 19.9253px; font-family: sans-serif;">i</span><span style="left: 405.358px; top: 849.953px; font-size: 19.9253px; font-family: sans-serif;">|</span><span style="left: 416.428px; top: 850.451px; font-size: 19.9253px; font-family: sans-serif;">∆</span><span style="left: 432.687px; top: 859.166px; font-size: 13.2835px; font-family: sans-serif;">i</span><span style="left: 443.857px; top: 850.451px; font-size: 19.9253px; font-family: sans-serif;">&gt;</span><span style="left: 464.565px; top: 850.451px; font-size: 19.9253px; font-family: sans-serif;">0</span><span style="left: 474.32px; top: 849.953px; font-size: 19.9253px; font-family: sans-serif;">}</span><span style="left: 484.283px; top: 850.451px; font-size: 19.9253px; font-family: sans-serif;">,</span><span style="left: 532.043px; top: 849.953px; font-size: 19.9253px; font-family: sans-serif;">R</span><span style="left: 554.465px; top: 850.451px; font-size: 19.9253px; font-family: sans-serif;">=</span><span style="left: 575.173px; top: 849.953px; font-size: 19.9253px; font-family: sans-serif;">{</span><span style="left: 585.137px; top: 850.451px; font-size: 19.9253px; font-family: sans-serif;">i</span><span style="left: 597.327px; top: 849.953px; font-size: 19.9253px; font-family: sans-serif;">|</span><span style="left: 608.397px; top: 850.451px; font-size: 19.9253px; font-family: sans-serif;">Λ</span><span style="left: 621.938px; top: 859.166px; font-size: 13.2835px; font-family: sans-serif;">i</span><span style="left: 633.108px; top: 850.451px; font-size: 19.9253px; font-family: sans-serif;">&gt;</span><span style="left: 653.818px; top: 850.451px; font-size: 19.9253px; font-family: sans-serif;">0</span><span style="left: 663.573px; top: 849.953px; font-size: 19.9253px; font-family: sans-serif;">}</span><span style="left: 673.535px; top: 850.451px; font-size: 19.9253px; font-family: sans-serif;">.</span><span style="left: 120px; top: 891.159px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.970007);">Thus</span><span style="left: 168.808px; top: 890.661px; font-size: 19.9253px; font-family: sans-serif;">T</span><span style="left: 190.612px; top: 891.159px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.95971);">are the indices of assets the trader proposes to give to the DEX, in exchange for the</span><span style="left: 120px; top: 915.236px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.975781);">assets with indices in</span><span style="left: 309.662px; top: 914.738px; font-size: 19.9253px; font-family: sans-serif;">R</span><span style="left: 326.548px; top: 915.236px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.05589);">.  If</span><span style="left: 362.943px; top: 915.236px; font-size: 19.9253px; font-family: sans-serif;">j</span><span style="left: 378.862px; top: 914.738px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.942019);">6∈ T ∪R</span><span style="left: 454.767px; top: 915.236px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.995927);">, it means that the proposed trade does not involve</span><span style="left: 120px; top: 939.313px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.87024);">asset</span><span style="left: 167.908px; top: 939.313px; font-size: 19.9253px; font-family: sans-serif;">j</span><span style="left: 177.1px; top: 939.313px; font-size: 19.9253px; font-family: sans-serif;">,</span><span style="left: 189.023px; top: 940.428px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.01298);">i.e.</span><span style="left: 215.922px; top: 939.313px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.21232);">, ∆</span><span style="left: 244.103px; top: 948.026px; font-size: 13.2835px; font-family: sans-serif;">j</span><span style="left: 256.942px; top: 939.313px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.1249);">= Λ</span><span style="left: 291.193px; top: 948.026px; font-size: 13.2835px; font-family: sans-serif;">j</span><span style="left: 304.032px; top: 939.313px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.06317);">= 0.</span><span style="left: 120px; top: 991.9px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.07041);">Two-asset  and  multi-asset  trades.</span><span style="left: 475.837px; top: 990.784px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.923785);">A  very  common  type  of  proposed  trade  involves</span><span style="left: 120px; top: 1014.86px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.972399);">only two assets, one that is tendered and one that is received,</span><span style="left: 657.288px; top: 1015.98px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.01298);">i.e.</span><span style="left: 684.188px; top: 1014.86px; font-size: 19.9253px; font-family: sans-serif;">,</span><span style="left: 696.403px; top: 1014.36px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.19916);">|T|</span><span style="left: 729.325px; top: 1014.86px; font-size: 19.9253px; font-family: sans-serif;">=</span><span style="left: 750.433px; top: 1014.36px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.13107);">|R|</span><span style="left: 784.323px; top: 1014.86px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.937338);">= 1.  Suppose</span><span style="left: 120px; top: 1038.44px; font-size: 19.9253px; font-family: sans-serif;">T</span><span style="left: 141.452px; top: 1038.94px; font-size: 19.9253px; font-family: sans-serif;">=</span><span style="left: 162.16px; top: 1038.44px; font-size: 19.9253px; font-family: sans-serif;">{</span><span style="left: 172.123px; top: 1038.94px; font-size: 19.9253px; font-family: sans-serif;">i</span><span style="left: 178.778px; top: 1038.44px; font-size: 19.9253px; font-family: sans-serif;">}</span><span style="left: 194.605px; top: 1038.94px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.946451);">and</span><span style="left: 231.903px; top: 1038.44px; font-size: 19.9253px; font-family: sans-serif;">R</span><span style="left: 254.323px; top: 1038.94px; font-size: 19.9253px; font-family: sans-serif;">=</span><span style="left: 275.033px; top: 1038.44px; font-size: 19.9253px; font-family: sans-serif;">{</span><span style="left: 284.997px; top: 1038.94px; font-size: 19.9253px; font-family: sans-serif;">j</span><span style="left: 294.188px; top: 1038.44px; font-size: 19.9253px; font-family: sans-serif;">}</span><span style="left: 304.152px; top: 1038.94px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.06229);">, with</span><span style="left: 359.363px; top: 1038.94px; font-size: 19.9253px; font-family: sans-serif;">i</span><span style="left: 371.553px; top: 1038.44px; font-size: 19.9253px; font-family: sans-serif;">6</span><span style="left: 371.553px; top: 1038.94px; font-size: 19.9253px; font-family: sans-serif;">=</span><span style="left: 392.262px; top: 1038.94px; font-size: 19.9253px; font-family: sans-serif;">j</span><span style="left: 401.455px; top: 1038.94px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.983382);">.  Then we have ∆ =</span><span style="left: 580.565px; top: 1038.94px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.831589);">δe</span><span style="left: 598.995px; top: 1047.65px; font-size: 13.2835px; font-family: sans-serif;">i</span><span style="left: 610.495px; top: 1038.94px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.03399);">and Λ =</span><span style="left: 687.577px; top: 1038.94px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.971434);">λe</span><span style="left: 708px; top: 1047.65px; font-size: 13.2835px; font-family: sans-serif;">j</span><span style="left: 715.303px; top: 1038.94px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.938722);">, where</span><span style="left: 782.438px; top: 1038.94px; font-size: 19.9253px; font-family: sans-serif;">e</span><span style="left: 791.482px; top: 1047.65px; font-size: 13.2835px; font-family: sans-serif;">i</span><span style="left: 802.98px; top: 1038.94px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.932481);">denotes the</span><span style="left: 120px; top: 1063.01px; font-size: 19.9253px; font-family: sans-serif;">i</span><span style="left: 126.655px; top: 1063.01px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.02081);">th unit vector, and</span><span style="left: 293.187px; top: 1063.01px; font-size: 19.9253px; font-family: sans-serif;">λ</span><span style="left: 310.103px; top: 1062.52px; font-size: 19.9253px; font-family: sans-serif;">≥</span><span style="left: 331.135px; top: 1063.01px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.974526);">0 is the quantity of asset</span><span style="left: 546.457px; top: 1063.01px; font-size: 19.9253px; font-family: sans-serif;">j</span><span style="left: 561.765px; top: 1063.01px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.949312);">the trader wishes to receive in exchange</span><span style="left: 120px; top: 1087.09px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.971716);">for  the  quantity</span><span style="left: 267.078px; top: 1087.09px; font-size: 19.9253px; font-family: sans-serif;">δ</span><span style="left: 285.197px; top: 1086.59px; font-size: 19.9253px; font-family: sans-serif;">≥</span><span style="left: 309.423px; top: 1087.09px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.858906);">0  of  asset</span><span style="left: 401.44px; top: 1087.09px; font-size: 19.9253px; font-family: sans-serif;">i</span><span style="left: 408.095px; top: 1087.09px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.903421);">.   (This  is  referred  to  as  exchanging  asset</span><span style="left: 781.297px; top: 1087.09px; font-size: 19.9253px; font-family: sans-serif;">i</span><span style="left: 796.332px; top: 1087.09px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.892852);">for  asset</span><span style="left: 877.802px; top: 1087.09px; font-size: 19.9253px; font-family: sans-serif;">j</span><span style="left: 886.993px; top: 1087.09px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.06972);">.)</span><span style="left: 120px; top: 1111.17px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.977943);">When a trade involves more than two assets, it is called a</span><span style="left: 622.225px; top: 1112.28px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.957588);">multi-asset</span><span style="left: 722.943px; top: 1111.17px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.996073);">trade.  We will study</span><span style="left: 120px; top: 1135.24px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.965603);">two-asset and multi-asset trades in</span><span style="left: 423.488px; top: 1130.26px; font-size: 19.9253px; font-family: monospace;">§</span><span style="left: 432.157px; top: 1135.24px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.957263);">4 and</span><span style="left: 486.352px; top: 1130.26px; font-size: 19.9253px; font-family: monospace;">§</span><span style="left: 495.02px; top: 1135.24px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.954461);">5, respectively.</span><span style="left: 505.122px; top: 1185.06px; font-size: 19.9253px; font-family: sans-serif;">7</span><div class="endOfContent"></div></div><div class="annotationLayer"><section data-annotation-id="248R" class="linkAnnotation" style="transform: matrix(1.66667, 0, 0, 1.66667, 0, 0); transform-origin: -89.862px -117.994px; left: 89.862px; top: 117.994px; width: 16.95px; height: 12.619px;"><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#subsection.2.2" class="internalLink"></a></section><section data-annotation-id="249R" class="linkAnnotation" style="transform: matrix(1.66667, 0, 0, 1.66667, 0, 0); transform-origin: -136.685px -117.994px; left: 136.685px; top: 117.994px; width: 16.95px; height: 12.619px;"><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#subsection.2.6" class="internalLink"></a></section><section data-annotation-id="282R" class="linkAnnotation" style="transform: matrix(1.66667, 0, 0, 1.66667, 0, 0); transform-origin: -229.488px -381.55px; left: 229.488px; top: 381.55px; width: 16.951px; height: 13.471px;"><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#subsection.2.3" class="internalLink"></a></section><section data-annotation-id="283R" class="linkAnnotation" style="transform: matrix(1.66667, 0, 0, 1.66667, 0, 0); transform-origin: -258.298px -680.814px; left: 258.298px; top: 680.814px; width: 7.846px; height: 12.619px;"><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#section.4" class="internalLink"></a></section><section data-annotation-id="284R" class="linkAnnotation" style="transform: matrix(1.66667, 0, 0, 1.66667, 0, 0); transform-origin: -296.016px -680.814px; left: 296.016px; top: 680.814px; width: 7.846px; height: 12.619px;"><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#section.5" class="internalLink"></a></section></div></div><div class="page" data-page-number="8" style="width: 1019px; height: 1319px;" data-loaded="true"><div class="canvasWrapper" style="width: 1019px; height: 1319px;"><canvas id="page8" width="2550" height="3300" style="width: 1020px; height: 1320px;"></canvas></div><div class="textLayer" style="width: 1019px; height: 1319px;"><span style="left: 120px; top: 123.331px; font-size: 23.9103px; font-family: sans-serif; transform: scaleX(1.11988);">2.3    Trading function</span><span style="left: 120px; top: 161.926px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.945683);">Trade acceptance depends on both the proposed trade and the current reserves.  A proposed</span><span style="left: 120px; top: 186.003px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.07277);">trade (∆</span><span style="left: 194.788px; top: 186.003px; font-size: 19.9253px; font-family: sans-serif;">,</span><span style="left: 203.528px; top: 186.003px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.988903);">Λ) is accepted only if</span><span style="left: 406.507px; top: 227.214px; font-size: 19.9253px; font-family: sans-serif;">φ</span><span style="left: 419.287px; top: 227.214px; font-size: 19.9253px; font-family: sans-serif;">(</span><span style="left: 426.873px; top: 227.214px; font-size: 19.9253px; font-family: sans-serif;">R</span><span style="left: 446.315px; top: 227.214px; font-size: 19.9253px; font-family: sans-serif;">+</span><span style="left: 465.918px; top: 227.214px; font-size: 19.9253px; font-family: sans-serif;">γ</span><span style="left: 477.122px; top: 227.214px; font-size: 19.9253px; font-family: sans-serif;">∆</span><span style="left: 497.808px; top: 226.716px; font-size: 19.9253px; font-family: sans-serif;">−</span><span style="left: 517.733px; top: 227.214px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.12842);">Λ) =</span><span style="left: 565.105px; top: 227.214px; font-size: 19.9253px; font-family: sans-serif;">φ</span><span style="left: 577.887px; top: 227.214px; font-size: 19.9253px; font-family: sans-serif;">(</span><span style="left: 585.473px; top: 227.214px; font-size: 19.9253px; font-family: sans-serif;">R</span><span style="left: 600.488px; top: 227.214px; font-size: 19.9253px; font-family: sans-serif;">)</span><span style="left: 608.075px; top: 227.214px; font-size: 19.9253px; font-family: sans-serif;">,</span><span style="left: 875.07px; top: 227.214px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.02474);">(4)</span><span style="left: 120px; top: 268.428px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.919654);">where</span><span style="left: 176.923px; top: 268.428px; font-size: 19.9253px; font-family: sans-serif;">φ</span><span style="left: 196.192px; top: 268.428px; font-size: 19.9253px; font-family: sans-serif;">:</span><span style="left: 208.1px; top: 269.543px; font-size: 19.9253px; font-family: sans-serif;">R</span><span style="left: 224.82px; top: 265.74px; font-size: 13.2835px; font-family: sans-serif;">n</span><span style="left: 224.82px; top: 278.334px; font-size: 13.2835px; font-family: sans-serif;">+</span><span style="left: 243.115px; top: 267.93px; font-size: 19.9253px; font-family: sans-serif;">→</span><span style="left: 269.53px; top: 269.543px; font-size: 19.9253px; font-family: sans-serif;">R</span><span style="left: 293.313px; top: 268.428px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.993447);">is the</span><span style="left: 347.653px; top: 269.543px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.965479);">trading  function</span><span style="left: 492.962px; top: 268.428px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.997021);">associated with the CFMM, and the parameter</span><span style="left: 120px; top: 292.503px; font-size: 19.9253px; font-family: sans-serif;">γ</span><span style="left: 136.738px; top: 292.005px; font-size: 19.9253px; font-family: sans-serif;">∈</span><span style="left: 155.557px; top: 292.503px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.97984);">(0</span><span style="left: 172.898px; top: 292.503px; font-size: 19.9253px; font-family: sans-serif;">,</span><span style="left: 181.64px; top: 292.503px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.943954);">1] introduces a</span><span style="left: 310.11px; top: 293.618px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.937819);">trading fee</span><span style="left: 405.042px; top: 292.503px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.959639);">(when</span><span style="left: 462.282px; top: 292.503px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.17713);">γ &lt;</span><span style="left: 499.728px; top: 292.503px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.980431);">1).  The ‘constant function’ in the name CFMM</span><span style="left: 120px; top: 316.579px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.971747);">refers to the acceptance condition (4).</span><span style="left: 149.265px; top: 340.656px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.964876);">We can interpret the trade acceptance condition as follows.  If</span><span style="left: 679.197px; top: 340.656px; font-size: 19.9253px; font-family: sans-serif;">γ</span><span style="left: 695.935px; top: 340.656px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.973132);">= 1, a proposed trade is</span><span style="left: 120px; top: 364.733px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.992047);">accepted only if the quantity</span><span style="left: 371.017px; top: 364.733px; font-size: 19.9253px; font-family: sans-serif;">φ</span><span style="left: 383.798px; top: 364.733px; font-size: 19.9253px; font-family: sans-serif;">(</span><span style="left: 391.385px; top: 364.733px; font-size: 19.9253px; font-family: sans-serif;">R</span><span style="left: 406.4px; top: 364.733px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.941642);">) does not change,</span><span style="left: 567.928px; top: 365.848px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.01298);">i.e.</span><span style="left: 594.828px; top: 364.733px; font-size: 19.9253px; font-family: sans-serif;">,</span><span style="left: 606.507px; top: 364.733px; font-size: 19.9253px; font-family: sans-serif;">φ</span><span style="left: 619.287px; top: 364.733px; font-size: 19.9253px; font-family: sans-serif;">(</span><span style="left: 626.875px; top: 364.733px; font-size: 19.9253px; font-family: sans-serif;">R</span><span style="left: 641.888px; top: 362.482px; font-size: 13.2835px; font-family: sans-serif;">+</span><span style="left: 653.697px; top: 364.733px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.18993);">) =</span><span style="left: 687.527px; top: 364.733px; font-size: 19.9253px; font-family: sans-serif;">φ</span><span style="left: 700.308px; top: 364.733px; font-size: 19.9253px; font-family: sans-serif;">(</span><span style="left: 707.895px; top: 364.733px; font-size: 19.9253px; font-family: sans-serif;">R</span><span style="left: 722.91px; top: 364.733px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.956773);">).  When</span><span style="left: 801.077px; top: 364.733px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.17713);">γ &lt;</span><span style="left: 838.525px; top: 364.733px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.04857);">1 (with</span><span style="left: 120px; top: 388.809px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.942317);">typical values being very close to one), the proposed trade is accepted based on the devalued</span><span style="left: 120px; top: 412.886px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.944982);">tendered basket</span><span style="left: 261.825px; top: 412.886px; font-size: 19.9253px; font-family: sans-serif;">γ</span><span style="left: 273.028px; top: 412.886px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.968501);">∆.  The reserves, however, are updated based on the full tendered basket</span><span style="left: 120px; top: 436.961px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.04917);">∆ as in (3).</span><span style="left: 120px; top: 489.623px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.12588);">Properties.</span><span style="left: 247.887px; top: 488.508px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.02041);">We will assume that the trading function</span><span style="left: 614.187px; top: 488.508px; font-size: 19.9253px; font-family: sans-serif;">φ</span><span style="left: 634.593px; top: 488.508px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.971075);">is concave, increasing, and dif-</span><span style="left: 120px; top: 512.584px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.984603);">ferentiable.  Many existing CFMMs are associated with functions that satisfy the additional</span><span style="left: 120px; top: 536.661px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.973799);">property of homogeneity,</span><span style="left: 339.487px; top: 537.777px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.01298);">i.e.</span><span style="left: 366.387px; top: 536.661px; font-size: 19.9253px; font-family: sans-serif;">,</span><span style="left: 378.31px; top: 536.661px; font-size: 19.9253px; font-family: sans-serif;">φ</span><span style="left: 391.09px; top: 536.661px; font-size: 19.9253px; font-family: sans-serif;">(</span><span style="left: 398.677px; top: 536.661px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.05777);">αR</span><span style="left: 426.228px; top: 536.661px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.18993);">) =</span><span style="left: 460.058px; top: 536.661px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.03657);">αφ</span><span style="left: 485.375px; top: 536.661px; font-size: 19.9253px; font-family: sans-serif;">(</span><span style="left: 492.963px; top: 536.661px; font-size: 19.9253px; font-family: sans-serif;">R</span><span style="left: 507.977px; top: 536.661px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.05645);">) for</span><span style="left: 551.875px; top: 536.661px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.15977);">α &gt;</span><span style="left: 590.655px; top: 536.661px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.914082);">0.</span><span style="left: 120px; top: 592.368px; font-size: 23.9103px; font-family: sans-serif; transform: scaleX(1.10283);">2.4    Trading function examples</span><span style="left: 120px; top: 630.963px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.986884);">We mention some trading functions that are used in existing CFMMs.</span><span style="left: 120px; top: 683.625px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.11652);">Linear and sum.</span><span style="left: 298.887px; top: 682.509px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.00172);">The simplest trading function is linear,</span><span style="left: 364.078px; top: 723.721px; font-size: 19.9253px; font-family: sans-serif;">φ</span><span style="left: 376.86px; top: 723.721px; font-size: 19.9253px; font-family: sans-serif;">(</span><span style="left: 384.447px; top: 723.721px; font-size: 19.9253px; font-family: sans-serif;">R</span><span style="left: 399.462px; top: 723.721px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.18993);">) =</span><span style="left: 433.292px; top: 723.721px; font-size: 19.9253px; font-family: sans-serif;">p</span><span style="left: 443.083px; top: 721.22px; font-size: 13.2835px; font-family: sans-serif;">T</span><span style="left: 454.092px; top: 723.721px; font-size: 19.9253px; font-family: sans-serif;">R</span><span style="left: 474.64px; top: 723.721px; font-size: 19.9253px; font-family: sans-serif;">=</span><span style="left: 495.35px; top: 723.721px; font-size: 19.9253px; font-family: sans-serif;">p</span><span style="left: 505.142px; top: 731.692px; font-size: 13.2835px; font-family: sans-serif;">1</span><span style="left: 513.028px; top: 723.721px; font-size: 19.9253px; font-family: sans-serif;">R</span><span style="left: 527.878px; top: 731.692px; font-size: 13.2835px; font-family: sans-serif;">1</span><span style="left: 540.193px; top: 723.721px; font-size: 19.9253px; font-family: sans-serif;">+</span><span style="left: 559.797px; top: 723.223px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.16866);">···</span><span style="left: 587.47px; top: 723.721px; font-size: 19.9253px; font-family: sans-serif;">+</span><span style="left: 607.072px; top: 723.721px; font-size: 19.9253px; font-family: sans-serif;">p</span><span style="left: 616.863px; top: 732.436px; font-size: 13.2835px; font-family: sans-serif;">n</span><span style="left: 626.258px; top: 723.721px; font-size: 19.9253px; font-family: sans-serif;">R</span><span style="left: 641.108px; top: 732.436px; font-size: 13.2835px; font-family: sans-serif;">n</span><span style="left: 650.502px; top: 723.721px; font-size: 19.9253px; font-family: sans-serif;">,</span><span style="left: 120px; top: 764.934px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.0717);">with</span><span style="left: 165.452px; top: 764.934px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.14146);">p &gt;</span><span style="left: 204.93px; top: 764.934px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.953605);">0, where</span><span style="left: 285.247px; top: 764.934px; font-size: 19.9253px; font-family: sans-serif;">p</span><span style="left: 295.038px; top: 773.648px; font-size: 13.2835px; font-family: sans-serif;">i</span><span style="left: 308.19px; top: 764.934px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.983735);">can be interpreted as the price of asset</span><span style="left: 654.238px; top: 764.934px; font-size: 19.9253px; font-family: sans-serif;">i</span><span style="left: 660.895px; top: 764.934px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.02898);">.  The trading condition (4)</span><span style="left: 120px; top: 789.011px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.981867);">simplifies to</span><span style="left: 452.867px; top: 813.086px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.998255);">γp</span><span style="left: 473.863px; top: 810.585px; font-size: 13.2835px; font-family: sans-serif;">T</span><span style="left: 484.87px; top: 813.086px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.26041);">∆ =</span><span style="left: 527.372px; top: 813.086px; font-size: 19.9253px; font-family: sans-serif;">p</span><span style="left: 537.165px; top: 810.585px; font-size: 13.2835px; font-family: sans-serif;">T</span><span style="left: 548.172px; top: 813.086px; font-size: 19.9253px; font-family: sans-serif;">Λ</span><span style="left: 561.713px; top: 813.086px; font-size: 19.9253px; font-family: sans-serif;">.</span><span style="left: 120px; top: 846.761px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.982207);">We interpret the righthand side as the total value of received basket, at the prices given by</span><span style="left: 120px; top: 870.836px; font-size: 19.9253px; font-family: sans-serif;">p</span><span style="left: 129.792px; top: 870.836px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.974866);">, and the lefthand side as the value of the tendered basket, discounted by the factor</span><span style="left: 852.637px; top: 870.836px; font-size: 19.9253px; font-family: sans-serif;">γ</span><span style="left: 863.84px; top: 870.836px; font-size: 19.9253px; font-family: sans-serif;">.</span><span style="left: 149.265px; top: 894.913px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.07496);">A CFMM with</span><span style="left: 284.28px; top: 894.913px; font-size: 19.9253px; font-family: sans-serif;">p</span><span style="left: 299.817px; top: 894.913px; font-size: 19.9253px; font-family: sans-serif;">=</span><span style="left: 320.733px; top: 896.028px; font-size: 19.9253px; font-family: sans-serif;">1</span><span style="left: 331.942px; top: 894.913px; font-size: 19.9253px; font-family: sans-serif;">,</span><span style="left: 344.017px; top: 896.028px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.01298);">i.e.</span><span style="left: 370.917px; top: 894.913px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.964276);">, all asset prices equal to one, is called a</span><span style="left: 722.19px; top: 896.028px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.962376);">constant sum market</span><span style="left: 120px; top: 920.105px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.941218);">maker</span><span style="left: 172.055px; top: 918.989px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.949858);">.  The CFMM mStable, which held assets that were each pegged to the same currency,</span><span style="left: 120px; top: 943.066px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.961076);">was one of the earliest constant sum market makers.</span><span style="left: 120px; top: 995.728px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.1003);">Geometric mean.</span><span style="left: 307.492px; top: 994.613px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.981536);">Another choice of trading function is the (weighted) geometric mean,</span><span style="left: 442.672px; top: 1051.01px; font-size: 19.9253px; font-family: sans-serif;">φ</span><span style="left: 455.453px; top: 1051.01px; font-size: 19.9253px; font-family: sans-serif;">(</span><span style="left: 463.04px; top: 1051.01px; font-size: 19.9253px; font-family: sans-serif;">R</span><span style="left: 478.055px; top: 1051.01px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.18993);">) =</span><span style="left: 520.333px; top: 1031.83px; font-size: 13.2835px; font-family: sans-serif;">n</span><span style="left: 511.885px; top: 1046.23px; font-size: 19.9253px; font-family: sans-serif;">∏</span><span style="left: 513.195px; top: 1079.79px; font-size: 13.2835px; font-family: sans-serif;">i</span><span style="left: 518px; top: 1079.05px; font-size: 13.2835px; font-family: sans-serif; transform: scaleX(1.19243);">=1</span><span style="left: 540.667px; top: 1051.01px; font-size: 19.9253px; font-family: sans-serif;">R</span><span style="left: 555.68px; top: 1047.84px; font-size: 13.2835px; font-family: sans-serif;">w</span><span style="left: 565.808px; top: 1052.17px; font-size: 9.96267px; font-family: sans-serif;">i</span><span style="left: 555.517px; top: 1061.84px; font-size: 13.2835px; font-family: sans-serif;">i</span><span style="left: 571.908px; top: 1051.01px; font-size: 19.9253px; font-family: sans-serif;">,</span><span style="left: 120px; top: 1111.17px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.99617);">where total</span><span style="left: 224.055px; top: 1111.17px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.14536);">w &gt;</span><span style="left: 266.627px; top: 1111.17px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.968463);">0 and</span><span style="left: 321.907px; top: 1112.28px; font-size: 19.9253px; font-family: sans-serif;">1</span><span style="left: 333.115px; top: 1109.66px; font-size: 13.2835px; font-family: sans-serif;">T</span><span style="left: 344.122px; top: 1111.17px; font-size: 19.9253px; font-family: sans-serif;">w</span><span style="left: 365.063px; top: 1111.17px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.00192);">= 1.  Like the linear and sum trading functions, the geometric</span><span style="left: 120px; top: 1135.24px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.917621);">mean is homogeneous.</span><span style="left: 505.123px; top: 1185.06px; font-size: 19.9253px; font-family: sans-serif;">8</span><div class="endOfContent"></div></div><div class="annotationLayer"><section data-annotation-id="294R" class="linkAnnotation" style="transform: matrix(1.66667, 0, 0, 1.66667, 0, 0); transform-origin: -252.186px -188.952px; left: 252.186px; top: 188.952px; width: 7.846px; height: 13.947px;"><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#equation.2.4" class="internalLink"></a></section><section data-annotation-id="295R" class="linkAnnotation" style="transform: matrix(1.66667, 0, 0, 1.66667, 0, 0); transform-origin: -117.242px -261.181px; left: 117.242px; top: 261.181px; width: 7.846px; height: 13.947px;"><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#equation.2.3" class="internalLink"></a></section><section data-annotation-id="296R" class="linkAnnotation" style="transform: matrix(1.66667, 0, 0, 1.66667, 0, 0); transform-origin: -528.598px -457.964px; left: 528.598px; top: 457.964px; width: 7.846px; height: 13.948px;"><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#equation.2.4" class="internalLink"></a></section></div></div><div class="page" data-page-number="9" style="width: 1019px; height: 1319px;" data-loaded="true"><div class="canvasWrapper" style="width: 1019px; height: 1319px;"><canvas id="page9" width="2550" height="3300" style="width: 1020px; height: 1320px;"></canvas></div><div class="textLayer" style="width: 1019px; height: 1319px;"><span style="left: 149.265px; top: 124.981px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.928567);">CFMMs  that  use  the  geometric  mean  are  called</span><span style="left: 583.477px; top: 126.097px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.920213);">constant  mean  market  makers</span><span style="left: 845.125px; top: 124.981px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.972682);">.   The</span><span style="left: 120px; top: 149.058px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.968412);">CFMMs Balancer [MM19], Uniswap [ZCP18], and SushiSwap [Sus20] are examples of con-</span><span style="left: 120px; top: 173.134px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.954611);">stant mean market makers.  (Uniswap and SushiSwap use weights</span><span style="left: 689.752px; top: 173.134px; font-size: 19.9253px; font-family: sans-serif;">w</span><span style="left: 703.698px; top: 181.848px; font-size: 13.2835px; font-family: sans-serif;">i</span><span style="left: 715.382px; top: 173.134px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.09783);">= 1</span><span style="left: 746.36px; top: 173.134px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.28915);">/n</span><span style="left: 767.76px; top: 173.134px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.948531);">, and are some-</span><span style="left: 120px; top: 197.211px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.960087);">times called</span><span style="left: 227.413px; top: 198.327px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.94937);">constant product</span><span style="left: 375.54px; top: 197.211px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.986318);">market makers [AKC</span><span style="left: 556.643px; top: 194.961px; font-size: 13.2835px; font-family: sans-serif;">+</span><span style="left: 568.452px; top: 197.211px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.92938);">20, AC20].)</span><span style="left: 120px; top: 249.337px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.09883);">Other examples.</span><span style="left: 299.982px; top: 248.221px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.963726);">Another example combines the sum and geometric mean functions,</span><span style="left: 373.205px; top: 299.886px; font-size: 19.9253px; font-family: sans-serif;">φ</span><span style="left: 385.985px; top: 299.886px; font-size: 19.9253px; font-family: sans-serif;">(</span><span style="left: 393.572px; top: 299.886px; font-size: 19.9253px; font-family: sans-serif;">R</span><span style="left: 408.587px; top: 299.886px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.08826);">) = (1</span><span style="left: 464.188px; top: 299.388px; font-size: 19.9253px; font-family: sans-serif;">−</span><span style="left: 484.113px; top: 299.886px; font-size: 19.9253px; font-family: sans-serif;">α</span><span style="left: 496.65px; top: 299.886px; font-size: 19.9253px; font-family: sans-serif;">)</span><span style="left: 504.237px; top: 301.002px; font-size: 19.9253px; font-family: sans-serif;">1</span><span style="left: 515.445px; top: 297.385px; font-size: 13.2835px; font-family: sans-serif;">T</span><span style="left: 526.452px; top: 299.886px; font-size: 19.9253px; font-family: sans-serif;">R</span><span style="left: 545.893px; top: 299.886px; font-size: 19.9253px; font-family: sans-serif;">+</span><span style="left: 565.497px; top: 299.886px; font-size: 19.9253px; font-family: sans-serif;">α</span><span style="left: 589.802px; top: 280.705px; font-size: 13.2835px; font-family: sans-serif;">n</span><span style="left: 581.353px; top: 295.105px; font-size: 19.9253px; font-family: sans-serif;">∏</span><span style="left: 582.663px; top: 328.673px; font-size: 13.2835px; font-family: sans-serif;">i</span><span style="left: 587.468px; top: 327.929px; font-size: 13.2835px; font-family: sans-serif; transform: scaleX(1.19243);">=1</span><span style="left: 610.133px; top: 299.886px; font-size: 19.9253px; font-family: sans-serif;">R</span><span style="left: 625.148px; top: 296.723px; font-size: 13.2835px; font-family: sans-serif;">w</span><span style="left: 635.277px; top: 301.053px; font-size: 9.96267px; font-family: sans-serif;">i</span><span style="left: 624.985px; top: 310.718px; font-size: 13.2835px; font-family: sans-serif;">i</span><span style="left: 641.377px; top: 299.886px; font-size: 19.9253px; font-family: sans-serif;">,</span><span style="left: 120px; top: 356.419px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.919654);">where</span><span style="left: 179.007px; top: 356.419px; font-size: 19.9253px; font-family: sans-serif;">α</span><span style="left: 201.578px; top: 355.921px; font-size: 19.9253px; font-family: sans-serif;">∈</span><span style="left: 224.898px; top: 356.419px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.914082);">[0</span><span style="left: 240.072px; top: 356.419px; font-size: 19.9253px; font-family: sans-serif;">,</span><span style="left: 248.812px; top: 356.419px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.925049);">1]  is  a  parameter,</span><span style="left: 416.238px; top: 356.419px; font-size: 19.9253px; font-family: sans-serif;">w</span><span style="left: 440.757px; top: 355.921px; font-size: 19.9253px; font-family: sans-serif;">≥</span><span style="left: 466.29px; top: 356.419px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.926689);">0,  and</span><span style="left: 531.853px; top: 357.535px; font-size: 19.9253px; font-family: sans-serif;">1</span><span style="left: 543.062px; top: 354.915px; font-size: 13.2835px; font-family: sans-serif;">T</span><span style="left: 554.07px; top: 356.419px; font-size: 19.9253px; font-family: sans-serif;">w</span><span style="left: 578.588px; top: 356.419px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.973159);">=  1.   This  trading  function  yields  a</span><span style="left: 120px; top: 380.496px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.946718);">CFMM  that  interpolates  between  a  constant  sum  market  (when</span><span style="left: 695.572px; top: 380.496px; font-size: 19.9253px; font-family: sans-serif;">α</span><span style="left: 717.742px; top: 380.496px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.943868);">=  0)  and  a  constant</span><span style="left: 120px; top: 404.573px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.969699);">geometric mean market (when</span><span style="left: 387.743px; top: 404.573px; font-size: 19.9253px; font-family: sans-serif;">α</span><span style="left: 406.747px; top: 404.573px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.987328);">= 1).  Because it is a convex combination of the sum and</span><span style="left: 120px; top: 428.649px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.952594);">geometric mean functions, which are themselves homogeneous, the resulting function is also</span><span style="left: 120px; top: 452.726px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.897899);">homogeneous.</span><span style="left: 149.265px; top: 476.803px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.978631);">The CFMM known as Curve [Ego19] uses the closely related trading function</span><span style="left: 402.633px; top: 529.574px; font-size: 19.9253px; font-family: sans-serif;">φ</span><span style="left: 415.415px; top: 529.574px; font-size: 19.9253px; font-family: sans-serif;">(</span><span style="left: 423.002px; top: 529.574px; font-size: 19.9253px; font-family: sans-serif;">R</span><span style="left: 438.017px; top: 529.574px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.18993);">) =</span><span style="left: 471.847px; top: 530.69px; font-size: 19.9253px; font-family: sans-serif;">1</span><span style="left: 483.055px; top: 527.071px; font-size: 13.2835px; font-family: sans-serif;">T</span><span style="left: 494.063px; top: 529.574px; font-size: 19.9253px; font-family: sans-serif;">R</span><span style="left: 513.505px; top: 529.076px; font-size: 19.9253px; font-family: sans-serif;">−</span><span style="left: 533.43px; top: 529.574px; font-size: 19.9253px; font-family: sans-serif;">α</span><span style="left: 557.735px; top: 510.393px; font-size: 13.2835px; font-family: sans-serif;">n</span><span style="left: 549.287px; top: 524.791px; font-size: 19.9253px; font-family: sans-serif;">∏</span><span style="left: 550.597px; top: 558.361px; font-size: 13.2835px; font-family: sans-serif;">i</span><span style="left: 555.402px; top: 557.617px; font-size: 13.2835px; font-family: sans-serif; transform: scaleX(1.19243);">=1</span><span style="left: 578.068px; top: 529.574px; font-size: 19.9253px; font-family: sans-serif;">R</span><span style="left: 593.082px; top: 525.924px; font-size: 13.2835px; font-family: sans-serif;">−</span><span style="left: 604.06px; top: 526.309px; font-size: 13.2835px; font-family: sans-serif;">1</span><span style="left: 592.918px; top: 540.405px; font-size: 13.2835px; font-family: sans-serif;">i</span><span style="left: 611.947px; top: 529.574px; font-size: 19.9253px; font-family: sans-serif;">,</span><span style="left: 120px; top: 583.636px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.919654);">where</span><span style="left: 176.362px; top: 583.636px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.15977);">α &gt;</span><span style="left: 215.142px; top: 583.636px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.968865);">0.  Unlike the previous examples, this trading function is not homogeneous.</span><span style="left: 120px; top: 638.81px; font-size: 23.9103px; font-family: sans-serif; transform: scaleX(1.06921);">2.5    Prices and exchange rates</span><span style="left: 120px; top: 677.404px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.909619);">In  this  section  we  introduce  the  concept  of  asset  (reported)  prices,  based  on  a  first  order</span><span style="left: 120px; top: 701.481px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.979079);">approximation of the trade acceptance condition (4).  These prices inform how liquidity can</span><span style="left: 120px; top: 725.558px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.975205);">be added and removed from the CFMM, as we will see in</span><span style="left: 617.433px; top: 720.576px; font-size: 19.9253px; font-family: monospace;">§</span><span style="left: 626.102px; top: 725.558px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.914082);">2.6.</span><span style="left: 120px; top: 777.683px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.05339);">Unscaled  prices.</span><span style="left: 300.337px; top: 776.568px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.923677);">We  denote  the  gradient  of  the  trading  function  as</span><span style="left: 746.727px; top: 776.568px; font-size: 19.9253px; font-family: sans-serif;">P</span><span style="left: 770.468px; top: 776.568px; font-size: 19.9253px; font-family: sans-serif;">=</span><span style="left: 794.098px; top: 776.07px; font-size: 19.9253px; font-family: sans-serif;">∇</span><span style="left: 810.702px; top: 776.568px; font-size: 19.9253px; font-family: sans-serif;">φ</span><span style="left: 823.483px; top: 776.568px; font-size: 19.9253px; font-family: sans-serif;">(</span><span style="left: 831.07px; top: 776.568px; font-size: 19.9253px; font-family: sans-serif;">R</span><span style="left: 846.085px; top: 776.568px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.925617);">).   We</span><span style="left: 120px; top: 800.644px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.988204);">refer to</span><span style="left: 188.827px; top: 800.644px; font-size: 19.9253px; font-family: sans-serif;">P</span><span style="left: 204.112px; top: 800.644px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.960549);">, which has positive entries since</span><span style="left: 489.067px; top: 800.644px; font-size: 19.9253px; font-family: sans-serif;">φ</span><span style="left: 508.35px; top: 800.644px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.961936);">is increasing, as the vector of</span><span style="left: 762.847px; top: 801.76px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.912976);">unscaled prices</span><span style="left: 889.125px; top: 800.644px; font-size: 19.9253px; font-family: sans-serif;">,</span><span style="left: 343.19px; top: 847.008px; font-size: 19.9253px; font-family: sans-serif;">P</span><span style="left: 355.765px; top: 855.721px; font-size: 13.2835px; font-family: sans-serif;">i</span><span style="left: 366.935px; top: 847.008px; font-size: 19.9253px; font-family: sans-serif;">=</span><span style="left: 387.643px; top: 846.51px; font-size: 19.9253px; font-family: sans-serif;">∇</span><span style="left: 404.248px; top: 847.008px; font-size: 19.9253px; font-family: sans-serif;">φ</span><span style="left: 417.028px; top: 847.008px; font-size: 19.9253px; font-family: sans-serif;">(</span><span style="left: 424.617px; top: 847.008px; font-size: 19.9253px; font-family: sans-serif;">R</span><span style="left: 439.63px; top: 847.008px; font-size: 19.9253px; font-family: sans-serif;">)</span><span style="left: 447.218px; top: 855.721px; font-size: 13.2835px; font-family: sans-serif;">i</span><span style="left: 458.388px; top: 847.008px; font-size: 19.9253px; font-family: sans-serif;">=</span><span style="left: 484.942px; top: 833.528px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.06204);">∂φ</span><span style="left: 481.09px; top: 860.676px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.08316);">∂R</span><span style="left: 507.323px; top: 869.39px; font-size: 13.2835px; font-family: sans-serif;">i</span><span style="left: 514.95px; top: 847.008px; font-size: 19.9253px; font-family: sans-serif;">(</span><span style="left: 522.538px; top: 847.008px; font-size: 19.9253px; font-family: sans-serif;">R</span><span style="left: 537.552px; top: 847.008px; font-size: 19.9253px; font-family: sans-serif;">)</span><span style="left: 545.14px; top: 847.008px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.66121);">,  i</span><span style="left: 585.58px; top: 847.008px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.07948);">= 1</span><span style="left: 616.043px; top: 847.008px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.37302);">,...,n.</span><span style="left: 875.07px; top: 847.008px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.02474);">(5)</span><span style="left: 120px; top: 892.673px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.939881);">To see why these numbers can be interpreted as prices, we approximate the exchange accep-</span><span style="left: 120px; top: 916.749px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.00558);">tance condition (4) using its first order Taylor approximation to get</span><span style="left: 234.078px; top: 954.338px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.07948);">0 =</span><span style="left: 270.077px; top: 954.338px; font-size: 19.9253px; font-family: sans-serif;">φ</span><span style="left: 282.858px; top: 954.338px; font-size: 19.9253px; font-family: sans-serif;">(</span><span style="left: 290.445px; top: 954.338px; font-size: 19.9253px; font-family: sans-serif;">R</span><span style="left: 309.887px; top: 954.338px; font-size: 19.9253px; font-family: sans-serif;">+</span><span style="left: 329.488px; top: 954.338px; font-size: 19.9253px; font-family: sans-serif;">γ</span><span style="left: 340.693px; top: 954.338px; font-size: 19.9253px; font-family: sans-serif;">∆</span><span style="left: 361.378px; top: 953.84px; font-size: 19.9253px; font-family: sans-serif;">−</span><span style="left: 381.305px; top: 954.338px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.06038);">Λ)</span><span style="left: 406.862px; top: 953.84px; font-size: 19.9253px; font-family: sans-serif;">−</span><span style="left: 426.787px; top: 954.338px; font-size: 19.9253px; font-family: sans-serif;">φ</span><span style="left: 439.567px; top: 954.338px; font-size: 19.9253px; font-family: sans-serif;">(</span><span style="left: 447.153px; top: 954.338px; font-size: 19.9253px; font-family: sans-serif;">R</span><span style="left: 462.168px; top: 954.338px; font-size: 19.9253px; font-family: sans-serif;">)</span><span style="left: 475.29px; top: 953.84px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.55276);">≈∇</span><span style="left: 512.927px; top: 954.338px; font-size: 19.9253px; font-family: sans-serif;">φ</span><span style="left: 525.707px; top: 954.338px; font-size: 19.9253px; font-family: sans-serif;">(</span><span style="left: 533.295px; top: 954.338px; font-size: 19.9253px; font-family: sans-serif;">R</span><span style="left: 548.308px; top: 954.338px; font-size: 19.9253px; font-family: sans-serif;">)</span><span style="left: 555.897px; top: 951.836px; font-size: 13.2835px; font-family: sans-serif;">T</span><span style="left: 566.903px; top: 954.338px; font-size: 19.9253px; font-family: sans-serif;">(</span><span style="left: 574.49px; top: 954.338px; font-size: 19.9253px; font-family: sans-serif;">γ</span><span style="left: 585.695px; top: 954.338px; font-size: 19.9253px; font-family: sans-serif;">∆</span><span style="left: 606.38px; top: 953.84px; font-size: 19.9253px; font-family: sans-serif;">−</span><span style="left: 626.305px; top: 954.338px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.12842);">Λ) =</span><span style="left: 673.678px; top: 954.338px; font-size: 19.9253px; font-family: sans-serif;">P</span><span style="left: 688.963px; top: 951.836px; font-size: 13.2835px; font-family: sans-serif;">T</span><span style="left: 699.972px; top: 954.338px; font-size: 19.9253px; font-family: sans-serif;">(</span><span style="left: 707.558px; top: 954.338px; font-size: 19.9253px; font-family: sans-serif;">γ</span><span style="left: 718.762px; top: 954.338px; font-size: 19.9253px; font-family: sans-serif;">∆</span><span style="left: 739.448px; top: 953.84px; font-size: 19.9253px; font-family: sans-serif;">−</span><span style="left: 759.373px; top: 954.338px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.06038);">Λ)</span><span style="left: 780.502px; top: 954.338px; font-size: 19.9253px; font-family: sans-serif;">,</span><span style="left: 120px; top: 991.926px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.933872);">when</span><span style="left: 170.943px; top: 991.926px; font-size: 19.9253px; font-family: sans-serif;">γ</span><span style="left: 182.147px; top: 991.926px; font-size: 19.9253px; font-family: sans-serif;">∆</span><span style="left: 202.832px; top: 991.428px; font-size: 19.9253px; font-family: sans-serif;">−</span><span style="left: 222.758px; top: 991.926px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.00161);">Λ is small, relative to</span><span style="left: 412.107px; top: 991.926px; font-size: 19.9253px; font-family: sans-serif;">R</span><span style="left: 427.12px; top: 991.926px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.955753);">.  We can express this approximation as</span><span style="left: 415.897px; top: 1031.89px; font-size: 19.9253px; font-family: sans-serif;">γ</span><span style="left: 430.422px; top: 1027.11px; font-size: 19.9253px; font-family: sans-serif;">∑</span><span style="left: 432.087px; top: 1060.97px; font-size: 13.2835px; font-family: sans-serif;">i</span><span style="left: 436.893px; top: 1059.85px; font-size: 13.2835px; font-family: sans-serif; transform: scaleX(0.874765);">∈T</span><span style="left: 462.523px; top: 1031.89px; font-size: 19.9253px; font-family: sans-serif;">P</span><span style="left: 475.098px; top: 1040.61px; font-size: 13.2835px; font-family: sans-serif;">i</span><span style="left: 480.733px; top: 1031.89px; font-size: 19.9253px; font-family: sans-serif;">∆</span><span style="left: 496.992px; top: 1040.61px; font-size: 13.2835px; font-family: sans-serif;">i</span><span style="left: 508.162px; top: 1031.39px; font-size: 19.9253px; font-family: sans-serif;">≈</span><span style="left: 529.195px; top: 1027.11px; font-size: 19.9253px; font-family: sans-serif;">∑</span><span style="left: 530.455px; top: 1060.97px; font-size: 13.2835px; font-family: sans-serif;">i</span><span style="left: 535.26px; top: 1059.85px; font-size: 13.2835px; font-family: sans-serif; transform: scaleX(1.01514);">∈R</span><span style="left: 561.297px; top: 1031.89px; font-size: 19.9253px; font-family: sans-serif;">P</span><span style="left: 573.872px; top: 1040.61px; font-size: 13.2835px; font-family: sans-serif;">i</span><span style="left: 579.507px; top: 1031.89px; font-size: 19.9253px; font-family: sans-serif;">Λ</span><span style="left: 593.048px; top: 1040.61px; font-size: 13.2835px; font-family: sans-serif;">i</span><span style="left: 598.685px; top: 1031.89px; font-size: 19.9253px; font-family: sans-serif;">.</span><span style="left: 875.07px; top: 1031.89px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.02474);">(6)</span><span style="left: 120px; top: 1087.09px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.905363);">The  righthand  side  is  the  value  of  the  received  basket  using  the  unscaled  prices</span><span style="left: 828.603px; top: 1087.09px; font-size: 19.9253px; font-family: sans-serif;">P</span><span style="left: 841.178px; top: 1095.8px; font-size: 13.2835px; font-family: sans-serif;">i</span><span style="left: 846.813px; top: 1087.09px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.942665);">.   The</span><span style="left: 120px; top: 1111.17px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.95914);">lefthand side is the value of the tendered basket using the unscaled prices</span><span style="left: 752.535px; top: 1111.17px; font-size: 19.9253px; font-family: sans-serif;">P</span><span style="left: 765.11px; top: 1119.88px; font-size: 13.2835px; font-family: sans-serif;">i</span><span style="left: 770.745px; top: 1111.17px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.96528);">, discounted by</span><span style="left: 120px; top: 1135.24px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.999099);">the factor</span><span style="left: 209.42px; top: 1135.24px; font-size: 19.9253px; font-family: sans-serif;">γ</span><span style="left: 220.625px; top: 1135.24px; font-size: 19.9253px; font-family: sans-serif;">.</span><span style="left: 505.123px; top: 1185.06px; font-size: 19.9253px; font-family: sans-serif;">9</span><div class="endOfContent"></div></div><div class="annotationLayer"><section data-annotation-id="297R" class="linkAnnotation" style="transform: matrix(1.66667, 0, 0, 1.66667, 0, 0); transform-origin: -169.714px -88.438px; left: 169.714px; top: 88.438px; width: 35.152px; height: 13.948px;"><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#cite.balancer" class="internalLink"></a></section><section data-annotation-id="298R" class="linkAnnotation" style="transform: matrix(1.66667, 0, 0, 1.66667, 0, 0); transform-origin: -264.946px -88.438px; left: 264.946px; top: 88.438px; width: 37.271px; height: 13.948px;"><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#cite.uniswap" class="internalLink"></a></section><section data-annotation-id="299R" class="linkAnnotation" style="transform: matrix(1.66667, 0, 0, 1.66667, 0, 0); transform-origin: -396.185px -88.438px; left: 396.185px; top: 88.438px; width: 31.323px; height: 13.948px;"><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#cite.sushiswap" class="internalLink"></a></section><section data-annotation-id="300R" class="linkAnnotation" style="transform: matrix(1.66667, 0, 0, 1.66667, 0, 0); transform-origin: -306.985px -117.143px; left: 306.985px; top: 117.143px; width: 46.788px; height: 14.135px;"><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#cite.angerisAnalysisUniswapMarkets2020" class="internalLink"></a></section><section data-annotation-id="301R" class="linkAnnotation" style="transform: matrix(1.66667, 0, 0, 1.66667, 0, 0); transform-origin: -356.554px -117.143px; left: 356.554px; top: 117.143px; width: 30.603px; height: 14.135px;"><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#cite.angerisImprovedPriceOracles2020" class="internalLink"></a></section><section data-annotation-id="311R" class="linkAnnotation" style="transform: matrix(1.66667, 0, 0, 1.66667, 0, 0); transform-origin: -243.234px -285.085px; left: 243.234px; top: 285.085px; width: 33.369px; height: 13.948px;"><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#cite.egorovStableSwapEfficientMechanism" class="internalLink"></a></section><section data-annotation-id="312R" class="linkAnnotation" style="transform: matrix(1.66667, 0, 0, 1.66667, 0, 0); transform-origin: -327.67px -419.892px; left: 327.67px; top: 419.892px; width: 7.846px; height: 13.948px;"><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#equation.2.4" class="internalLink"></a></section><section data-annotation-id="313R" class="linkAnnotation" style="transform: matrix(1.66667, 0, 0, 1.66667, 0, 0); transform-origin: -374.665px -435.002px; left: 374.665px; top: 435.002px; width: 16.95px; height: 12.619px;"><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#subsection.2.6" class="internalLink"></a></section><section data-annotation-id="314R" class="linkAnnotation" style="transform: matrix(1.66667, 0, 0, 1.66667, 0, 0); transform-origin: -158.148px -549.053px; left: 158.148px; top: 549.053px; width: 7.846px; height: 13.948px;"><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#equation.2.4" class="internalLink"></a></section></div></div><div class="page" data-page-number="10" style="width: 1019px; height: 1319px;" data-loaded="true"><div class="canvasWrapper" style="width: 1019px; height: 1319px;"><canvas id="page10" width="2550" height="3300" style="width: 1020px; height: 1320px;"></canvas></div><div class="textLayer" style="width: 1019px; height: 1319px;"><span style="left: 120px; top: 126.097px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.08413);">Prices.</span><span style="left: 205.463px; top: 124.981px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.964375);">The condition (6) is homogeneous in the prices,</span><span style="left: 616.123px; top: 126.097px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.01298);">i.e.</span><span style="left: 643.023px; top: 124.981px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.988335);">, it is the same condition if we</span><span style="left: 120px; top: 149.058px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.986551);">scale all prices by any positive constant.  The</span><span style="left: 521.53px; top: 150.173px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.901514);">reported  prices</span><span style="left: 655.35px; top: 149.058px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.06032);">(or just</span><span style="left: 727.332px; top: 150.173px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.924041);">prices</span><span style="left: 778.045px; top: 149.058px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.975466);">) of the assets</span><span style="left: 120px; top: 173.134px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.975699);">are the prices relative to the price of the numeraire, which is asset</span><span style="left: 692.183px; top: 173.134px; font-size: 19.9253px; font-family: sans-serif;">n</span><span style="left: 703.83px; top: 173.134px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.942814);">.  The prices are</span><span style="left: 410.352px; top: 225.689px; font-size: 19.9253px; font-family: sans-serif;">p</span><span style="left: 420.143px; top: 234.403px; font-size: 13.2835px; font-family: sans-serif;">i</span><span style="left: 431.313px; top: 225.689px; font-size: 19.9253px; font-family: sans-serif;">=</span><span style="left: 455.895px; top: 212.209px; font-size: 19.9253px; font-family: sans-serif;">P</span><span style="left: 468.47px; top: 220.923px; font-size: 13.2835px; font-family: sans-serif;">i</span><span style="left: 454.015px; top: 239.358px; font-size: 19.9253px; font-family: sans-serif;">P</span><span style="left: 466.59px; top: 248.071px; font-size: 13.2835px; font-family: sans-serif;">n</span><span style="left: 477.977px; top: 225.689px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.66121);">,  i</span><span style="left: 518.418px; top: 225.689px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.07948);">= 1</span><span style="left: 548.882px; top: 225.689px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.37302);">,...,n.</span><span style="left: 120px; top: 278.876px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.987663);">(The price of the numeraire is always 1.)  In general the prices depend on the reserves</span><span style="left: 879.567px; top: 278.876px; font-size: 19.9253px; font-family: sans-serif;">R</span><span style="left: 894.58px; top: 278.876px; font-size: 19.9253px; font-family: sans-serif;">.</span><span style="left: 120px; top: 302.953px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.00849);">(The one exception is with a linear trading function, in which the prices are constant.)  In</span><span style="left: 120px; top: 327.028px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.989701);">terms of prices, the condition (6) is</span><span style="left: 418.68px; top: 374.518px; font-size: 19.9253px; font-family: sans-serif;">γ</span><span style="left: 433.205px; top: 369.735px; font-size: 19.9253px; font-family: sans-serif;">∑</span><span style="left: 434.87px; top: 403.6px; font-size: 13.2835px; font-family: sans-serif;">i</span><span style="left: 439.677px; top: 402.47px; font-size: 13.2835px; font-family: sans-serif; transform: scaleX(0.874765);">∈T</span><span style="left: 465.307px; top: 374.518px; font-size: 19.9253px; font-family: sans-serif;">p</span><span style="left: 475.098px; top: 383.231px; font-size: 13.2835px; font-family: sans-serif;">i</span><span style="left: 480.733px; top: 374.518px; font-size: 19.9253px; font-family: sans-serif;">∆</span><span style="left: 496.992px; top: 383.231px; font-size: 13.2835px; font-family: sans-serif;">i</span><span style="left: 508.162px; top: 374.02px; font-size: 19.9253px; font-family: sans-serif;">≈</span><span style="left: 529.195px; top: 369.735px; font-size: 19.9253px; font-family: sans-serif;">∑</span><span style="left: 530.455px; top: 403.6px; font-size: 13.2835px; font-family: sans-serif;">i</span><span style="left: 535.26px; top: 402.47px; font-size: 13.2835px; font-family: sans-serif; transform: scaleX(1.01514);">∈R</span><span style="left: 561.297px; top: 374.518px; font-size: 19.9253px; font-family: sans-serif;">p</span><span style="left: 571.088px; top: 383.231px; font-size: 13.2835px; font-family: sans-serif;">i</span><span style="left: 576.723px; top: 374.518px; font-size: 19.9253px; font-family: sans-serif;">Λ</span><span style="left: 590.265px; top: 383.231px; font-size: 13.2835px; font-family: sans-serif;">i</span><span style="left: 595.9px; top: 374.518px; font-size: 19.9253px; font-family: sans-serif;">.</span><span style="left: 875.07px; top: 374.518px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.02474);">(7)</span><span style="left: 149.265px; top: 440.553px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.965784);">We observe for future use that the prices for two values of the reserves</span><span style="left: 759.215px; top: 440.553px; font-size: 19.9253px; font-family: sans-serif;">R</span><span style="left: 780.782px; top: 440.553px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.946451);">and</span><span style="left: 823.023px; top: 435.516px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.76391);"> ̃</span><span style="left: 818.768px; top: 440.553px; font-size: 19.9253px; font-family: sans-serif;">R</span><span style="left: 840.337px; top: 440.553px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.962801);">are the</span><span style="left: 120px; top: 464.628px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.990381);">same if and only if</span><span style="left: 428.327px; top: 488.206px; font-size: 19.9253px; font-family: sans-serif;">∇</span><span style="left: 444.932px; top: 488.704px; font-size: 19.9253px; font-family: sans-serif;">φ</span><span style="left: 457.712px; top: 488.704px; font-size: 19.9253px; font-family: sans-serif;">(</span><span style="left: 469.555px; top: 483.668px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.76391);"> ̃</span><span style="left: 465.298px; top: 488.704px; font-size: 19.9253px; font-family: sans-serif;">R</span><span style="left: 480.313px; top: 488.704px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.18993);">) =</span><span style="left: 514.145px; top: 488.704px; font-size: 19.9253px; font-family: sans-serif;">α</span><span style="left: 526.68px; top: 488.206px; font-size: 19.9253px; font-family: sans-serif;">∇</span><span style="left: 543.285px; top: 488.704px; font-size: 19.9253px; font-family: sans-serif;">φ</span><span style="left: 556.065px; top: 488.704px; font-size: 19.9253px; font-family: sans-serif;">(</span><span style="left: 563.653px; top: 488.704px; font-size: 19.9253px; font-family: sans-serif;">R</span><span style="left: 578.667px; top: 488.704px; font-size: 19.9253px; font-family: sans-serif;">)</span><span style="left: 586.253px; top: 488.704px; font-size: 19.9253px; font-family: sans-serif;">,</span><span style="left: 875.07px; top: 488.704px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.02474);">(8)</span><span style="left: 120px; top: 523.574px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.93212);">for some</span><span style="left: 198.69px; top: 523.574px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.15977);">α &gt;</span><span style="left: 237.47px; top: 523.574px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.914082);">0.</span><span style="left: 120px; top: 576.647px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.11897);">Geometric mean trading function prices.</span><span style="left: 534.445px; top: 575.531px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.922892);">For the special case</span><span style="left: 704.532px; top: 575.531px; font-size: 19.9253px; font-family: sans-serif;">φ</span><span style="left: 717.313px; top: 575.531px; font-size: 19.9253px; font-family: sans-serif;">(</span><span style="left: 724.9px; top: 575.531px; font-size: 19.9253px; font-family: sans-serif;">R</span><span style="left: 739.915px; top: 575.531px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.18993);">) =</span><span style="left: 773.745px; top: 574.735px; font-size: 19.9253px; font-family: sans-serif;">∏</span><span style="left: 792.563px; top: 571.571px; font-size: 13.2835px; font-family: sans-serif;">n</span><span style="left: 792.563px; top: 587.068px; font-size: 13.2835px; font-family: sans-serif;">i</span><span style="left: 797.368px; top: 586.324px; font-size: 13.2835px; font-family: sans-serif; transform: scaleX(1.19243);">=1</span><span style="left: 819.555px; top: 575.531px; font-size: 19.9253px; font-family: sans-serif;">R</span><span style="left: 834.568px; top: 572.37px; font-size: 13.2835px; font-family: sans-serif;">w</span><span style="left: 844.697px; top: 576.699px; font-size: 9.96267px; font-family: sans-serif;">i</span><span style="left: 834.405px; top: 586.363px; font-size: 13.2835px; font-family: sans-serif;">i</span><span style="left: 850.797px; top: 575.531px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.05886);">, with</span><span style="left: 120px; top: 599.608px; font-size: 19.9253px; font-family: sans-serif;">w</span><span style="left: 133.947px; top: 608.323px; font-size: 13.2835px; font-family: sans-serif;">i</span><span style="left: 145.117px; top: 599.608px; font-size: 19.9253px; font-family: sans-serif;">&gt;</span><span style="left: 165.825px; top: 599.608px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.957263);">0 and</span><span style="left: 220.02px; top: 598.811px; font-size: 19.9253px; font-family: sans-serif;">∑</span><span style="left: 241.052px; top: 595.648px; font-size: 13.2835px; font-family: sans-serif;">n</span><span style="left: 241.052px; top: 611.145px; font-size: 13.2835px; font-family: sans-serif;">i</span><span style="left: 245.858px; top: 610.401px; font-size: 13.2835px; font-family: sans-serif; transform: scaleX(1.19243);">=1</span><span style="left: 268.043px; top: 599.608px; font-size: 19.9253px; font-family: sans-serif;">w</span><span style="left: 281.99px; top: 608.323px; font-size: 13.2835px; font-family: sans-serif;">i</span><span style="left: 293.16px; top: 599.608px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.965386);">= 1, the unscaled prices are</span><span style="left: 304.002px; top: 643.609px; font-size: 19.9253px; font-family: sans-serif;">P</span><span style="left: 324.822px; top: 643.609px; font-size: 19.9253px; font-family: sans-serif;">=</span><span style="left: 345.532px; top: 643.111px; font-size: 19.9253px; font-family: sans-serif;">∇</span><span style="left: 362.137px; top: 643.609px; font-size: 19.9253px; font-family: sans-serif;">φ</span><span style="left: 374.917px; top: 643.609px; font-size: 19.9253px; font-family: sans-serif;">(</span><span style="left: 382.503px; top: 643.609px; font-size: 19.9253px; font-family: sans-serif;">R</span><span style="left: 397.518px; top: 643.609px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.18993);">) =</span><span style="left: 431.348px; top: 643.609px; font-size: 19.9253px; font-family: sans-serif;">φ</span><span style="left: 444.13px; top: 643.609px; font-size: 19.9253px; font-family: sans-serif;">(</span><span style="left: 451.717px; top: 643.609px; font-size: 19.9253px; font-family: sans-serif;">R</span><span style="left: 466.732px; top: 643.609px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.14461);">)(</span><span style="left: 481.905px; top: 643.609px; font-size: 19.9253px; font-family: sans-serif;">w</span><span style="left: 495.852px; top: 651.581px; font-size: 13.2835px; font-family: sans-serif;">1</span><span style="left: 503.738px; top: 643.609px; font-size: 19.9253px; font-family: sans-serif;">R</span><span style="left: 518.753px; top: 639.979px; font-size: 13.2835px; font-family: sans-serif;">−</span><span style="left: 529.73px; top: 640.364px; font-size: 13.2835px; font-family: sans-serif;">1</span><span style="left: 518.588px; top: 653.517px; font-size: 13.2835px; font-family: sans-serif;">1</span><span style="left: 537.618px; top: 643.609px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.13999);">,w</span><span style="left: 560.305px; top: 651.581px; font-size: 13.2835px; font-family: sans-serif;">2</span><span style="left: 568.192px; top: 643.609px; font-size: 19.9253px; font-family: sans-serif;">R</span><span style="left: 583.207px; top: 639.979px; font-size: 13.2835px; font-family: sans-serif;">−</span><span style="left: 594.183px; top: 640.364px; font-size: 13.2835px; font-family: sans-serif;">1</span><span style="left: 583.042px; top: 653.517px; font-size: 13.2835px; font-family: sans-serif;">2</span><span style="left: 602.07px; top: 643.609px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.37149);">,...,w</span><span style="left: 659.718px; top: 652.325px; font-size: 13.2835px; font-family: sans-serif;">n</span><span style="left: 669.112px; top: 643.609px; font-size: 19.9253px; font-family: sans-serif;">R</span><span style="left: 684.127px; top: 639.979px; font-size: 13.2835px; font-family: sans-serif;">−</span><span style="left: 695.103px; top: 640.364px; font-size: 13.2835px; font-family: sans-serif;">1</span><span style="left: 683.962px; top: 654.261px; font-size: 13.2835px; font-family: sans-serif;">n</span><span style="left: 702.992px; top: 643.609px; font-size: 19.9253px; font-family: sans-serif;">)</span><span style="left: 710.578px; top: 643.609px; font-size: 19.9253px; font-family: sans-serif;">,</span><span style="left: 120px; top: 687.611px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.959784);">and the prices are</span><span style="left: 399.423px; top: 720.241px; font-size: 19.9253px; font-family: sans-serif;">p</span><span style="left: 409.215px; top: 728.955px; font-size: 13.2835px; font-family: sans-serif;">i</span><span style="left: 420.385px; top: 720.241px; font-size: 19.9253px; font-family: sans-serif;">=</span><span style="left: 443.087px; top: 706.761px; font-size: 19.9253px; font-family: sans-serif;">w</span><span style="left: 457.033px; top: 715.476px; font-size: 13.2835px; font-family: sans-serif;">i</span><span style="left: 462.668px; top: 706.761px; font-size: 19.9253px; font-family: sans-serif;">R</span><span style="left: 477.518px; top: 715.476px; font-size: 13.2835px; font-family: sans-serif;">n</span><span style="left: 443.087px; top: 733.909px; font-size: 19.9253px; font-family: sans-serif;">w</span><span style="left: 457.033px; top: 742.623px; font-size: 13.2835px; font-family: sans-serif;">n</span><span style="left: 466.427px; top: 733.909px; font-size: 19.9253px; font-family: sans-serif;">R</span><span style="left: 481.277px; top: 742.623px; font-size: 13.2835px; font-family: sans-serif;">i</span><span style="left: 488.905px; top: 720.241px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.66121);">,  i</span><span style="left: 529.347px; top: 720.241px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.07948);">= 1</span><span style="left: 559.81px; top: 720.241px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.37302);">,...,n.</span><span style="left: 875.07px; top: 720.241px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.02474);">(9)</span><span style="left: 120px; top: 781.392px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.07532);">Exchange rates.</span><span style="left: 294.185px; top: 780.276px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.02878);">In a two-asset trade with ∆ =</span><span style="left: 557.575px; top: 780.276px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.831589);">δe</span><span style="left: 576.005px; top: 788.991px; font-size: 13.2835px; font-family: sans-serif;">i</span><span style="left: 588.157px; top: 780.276px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.04379);">and Λ =</span><span style="left: 665.933px; top: 780.276px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.971434);">λe</span><span style="left: 686.357px; top: 788.991px; font-size: 13.2835px; font-family: sans-serif;">j</span><span style="left: 693.66px; top: 780.276px; font-size: 19.9253px; font-family: sans-serif;">,</span><span style="left: 705.598px; top: 781.392px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.01298);">i.e.</span><span style="left: 732.498px; top: 780.276px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.940098);">, we are exchanging</span><span style="left: 120px; top: 804.353px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.87024);">asset</span><span style="left: 167.908px; top: 804.353px; font-size: 19.9253px; font-family: sans-serif;">i</span><span style="left: 181.067px; top: 804.353px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.932741);">for asset</span><span style="left: 258.782px; top: 804.353px; font-size: 19.9253px; font-family: sans-serif;">j</span><span style="left: 267.973px; top: 804.353px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.00723);">, the</span><span style="left: 313.497px; top: 805.468px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.914034);">exchange rate</span><span style="left: 436.808px; top: 804.353px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.912296);">is</span><span style="left: 379.94px; top: 858.236px; font-size: 19.9253px; font-family: sans-serif;">E</span><span style="left: 394.382px; top: 866.951px; font-size: 13.2835px; font-family: sans-serif; transform: scaleX(1.78348);">ij</span><span style="left: 412.025px; top: 858.236px; font-size: 19.9253px; font-family: sans-serif;">=</span><span style="left: 432.735px; top: 858.236px; font-size: 19.9253px; font-family: sans-serif;">γ</span><span style="left: 446.765px; top: 844.26px; font-size: 19.9253px; font-family: sans-serif;">∇</span><span style="left: 463.37px; top: 844.758px; font-size: 19.9253px; font-family: sans-serif;">φ</span><span style="left: 476.15px; top: 844.758px; font-size: 19.9253px; font-family: sans-serif;">(</span><span style="left: 483.737px; top: 844.758px; font-size: 19.9253px; font-family: sans-serif;">R</span><span style="left: 498.752px; top: 844.758px; font-size: 19.9253px; font-family: sans-serif;">)</span><span style="left: 506.338px; top: 853.471px; font-size: 13.2835px; font-family: sans-serif;">i</span><span style="left: 445.932px; top: 871.406px; font-size: 19.9253px; font-family: sans-serif;">∇</span><span style="left: 462.535px; top: 871.904px; font-size: 19.9253px; font-family: sans-serif;">φ</span><span style="left: 475.317px; top: 871.904px; font-size: 19.9253px; font-family: sans-serif;">(</span><span style="left: 482.903px; top: 871.904px; font-size: 19.9253px; font-family: sans-serif;">R</span><span style="left: 497.918px; top: 871.904px; font-size: 19.9253px; font-family: sans-serif;">)</span><span style="left: 505.505px; top: 880.618px; font-size: 13.2835px; font-family: sans-serif;">j</span><span style="left: 520.335px; top: 858.236px; font-size: 19.9253px; font-family: sans-serif;">=</span><span style="left: 541.045px; top: 858.236px; font-size: 19.9253px; font-family: sans-serif;">γ</span><span style="left: 555.075px; top: 844.758px; font-size: 19.9253px; font-family: sans-serif;">P</span><span style="left: 567.65px; top: 853.471px; font-size: 13.2835px; font-family: sans-serif;">i</span><span style="left: 554.242px; top: 871.904px; font-size: 19.9253px; font-family: sans-serif;">P</span><span style="left: 566.817px; top: 880.618px; font-size: 13.2835px; font-family: sans-serif;">j</span><span style="left: 581.647px; top: 858.236px; font-size: 19.9253px; font-family: sans-serif;">=</span><span style="left: 602.357px; top: 858.236px; font-size: 19.9253px; font-family: sans-serif;">γ</span><span style="left: 616.387px; top: 844.758px; font-size: 19.9253px; font-family: sans-serif;">p</span><span style="left: 626.178px; top: 853.471px; font-size: 13.2835px; font-family: sans-serif;">i</span><span style="left: 615.553px; top: 871.904px; font-size: 19.9253px; font-family: sans-serif;">p</span><span style="left: 625.345px; top: 880.618px; font-size: 13.2835px; font-family: sans-serif;">j</span><span style="left: 634.64px; top: 858.236px; font-size: 19.9253px; font-family: sans-serif;">.</span><span style="left: 120px; top: 912.899px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.980418);">This is approximately how much asset</span><span style="left: 456.862px; top: 912.899px; font-size: 19.9253px; font-family: sans-serif;">j</span><span style="left: 473.17px; top: 912.899px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.984113);">you get for each unit of asset</span><span style="left: 731.843px; top: 912.899px; font-size: 19.9253px; font-family: sans-serif;">i</span><span style="left: 738.5px; top: 912.899px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.01378);">, for a small trade.</span><span style="left: 120px; top: 936.976px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.02629);">Note that</span><span style="left: 209.413px; top: 936.976px; font-size: 19.9253px; font-family: sans-serif;">E</span><span style="left: 223.857px; top: 945.69px; font-size: 13.2835px; font-family: sans-serif; transform: scaleX(1.78348);">ij</span><span style="left: 235.965px; top: 936.976px; font-size: 19.9253px; font-family: sans-serif;">E</span><span style="left: 250.407px; top: 945.69px; font-size: 13.2835px; font-family: sans-serif; transform: scaleX(1.91419);">ji</span><span style="left: 268.05px; top: 936.976px; font-size: 19.9253px; font-family: sans-serif;">=</span><span style="left: 288.76px; top: 936.976px; font-size: 19.9253px; font-family: sans-serif;">γ</span><span style="left: 299.963px; top: 934.726px; font-size: 13.2835px; font-family: sans-serif;">2</span><span style="left: 313.385px; top: 936.976px; font-size: 19.9253px; font-family: sans-serif;">&lt;</span><span style="left: 334.095px; top: 936.976px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.948247);">1, when</span><span style="left: 406.715px; top: 936.976px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.17713);">γ &lt;</span><span style="left: 444.163px; top: 936.976px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.914082);">1,</span><span style="left: 465.84px; top: 938.092px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.01298);">i.e.</span><span style="left: 492.74px; top: 936.976px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.978347);">, round-trip trades lose value.</span><span style="left: 120px; top: 990.048px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.1331);">These are first order approximations.</span><span style="left: 508.08px; top: 988.933px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.995879);">We remind the reader that the various condi-</span><span style="left: 120px; top: 1013.01px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.946174);">tions described above are based on a first order Taylor approximation of the trade acceptance</span><span style="left: 120px; top: 1037.09px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.99573);">condition.  A proposed trade that satisfies (7) is not (quite) valid; it is merely close to valid</span><span style="left: 120px; top: 1061.16px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.969709);">when the proposed trade baskets are small compared to the reserves.  This is similar to the</span><span style="left: 120px; top: 1085.24px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.99004);">midpoint price (average of bid and ask prices) in an order book; you cannot trade in either</span><span style="left: 120px; top: 1109.31px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(1.00554);">direction exactly at this price.</span><span style="left: 500.245px; top: 1185.06px; font-size: 19.9253px; font-family: sans-serif; transform: scaleX(0.881178);">10</span><div class="endOfContent"></div></div><div class="annotationLayer"><section data-annotation-id="315R" class="linkAnnotation" style="transform: matrix(1.66667, 0, 0, 1.66667, 0, 0); transform-origin: -201.869px -73.993px; left: 201.869px; top: 73.993px; width: 7.846px; height: 13.947px;"><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#equation.2.6" class="internalLink"></a></section><section data-annotation-id="326R" class="linkAnnotation" style="transform: matrix(1.66667, 0, 0, 1.66667, 0, 0); transform-origin: -229.49px -195.221px; left: 229.49px; top: 195.221px; width: 7.845px; height: 13.947px;"><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#equation.2.6" class="internalLink"></a></section><section data-annotation-id="327R" class="linkAnnotation" style="transform: matrix(1.66667, 0, 0, 1.66667, 0, 0); transform-origin: -293.287px -621.255px; left: 293.287px; top: 621.255px; width: 7.845px; height: 13.948px;"><a href="chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/https://arxiv.org/pdf/2107.12484.pdf#equation.2.7" class="internalLink"></a></section></div></div><div class="page" data-page-number="11" style="width: 1019px; height: 1319px;"><div class="loadingIcon"></div></div><div class="page" data-page-number="12" style="width: 1019px; height: 1319px;"><div class="loadingIcon"></div></div><div class="page" data-page-number="13" style="width: 1019px; height: 1319px;"><div class="loadingIcon"></div></div><div class="page" data-page-number="14" style="width: 1019px; height: 1319px;"><div class="loadingIcon"></div></div><div class="page" data-page-number="15" style="width: 1019px; height: 1319px;"><div class="loadingIcon"></div></div><div class="page" data-page-number="16" style="width: 1019px; height: 1319px;"><div class="loadingIcon"></div></div><div class="page" data-page-number="17" style="width: 1019px; height: 1319px;"><div class="loadingIcon"></div></div><div class="page" data-page-number="18" style="width: 1019px; height: 1319px;"><div class="loadingIcon"></div></div><div class="page" data-page-number="19" style="width: 1019px; height: 1319px;"><div class="loadingIcon"></div></div><div class="page" data-page-number="20" style="width: 1019px; height: 1319px;"><div class="loadingIcon"></div></div><div class="page" data-page-number="21" style="width: 1019px; height: 1319px;"><div class="loadingIcon"></div></div><div class="page" data-page-number="22" style="width: 1019px; height: 1319px;"><div class="loadingIcon"></div></div><div class="page" data-page-number="23" style="width: 1019px; height: 1319px;"><div class="loadingIcon"></div></div><div class="page" data-page-number="24" style="width: 1019px; height: 1319px;"><div class="loadingIcon"></div></div><div class="page" data-page-number="25" style="width: 1019px; height: 1319px;"><div class="loadingIcon"></div></div><div class="page" data-page-number="26" style="width: 1019px; height: 1319px;"><div class="loadingIcon"></div></div><div class="page" data-page-number="27" style="width: 1019px; height: 1319px;"><div class="loadingIcon"></div></div><div class="page" data-page-number="28" style="width: 1019px; height: 1319px;"><div class="loadingIcon"></div></div><div class="page" data-page-number="29" style="width: 1019px; height: 1319px;"><div class="loadingIcon"></div></div><div class="page" data-page-number="30" style="width: 1019px; height: 1319px;"><div class="loadingIcon"></div></div><div class="page" data-page-number="31" style="width: 1019px; height: 1319px;"><div class="loadingIcon"></div></div></div>
        </div>

        <div id="errorWrapper" hidden="true">
          <div id="errorMessageLeft">
            <span id="errorMessage"></span>
            <button id="errorShowMore" data-l10n-id="error_more_info">More Information</button>
            <button id="errorShowLess" data-l10n-id="error_less_info" hidden="true">Less Information</button>
          </div>
          <div id="errorMessageRight">
            <button id="errorClose" data-l10n-id="error_close">Close</button>
          </div>
          <div class="clearBoth"></div>
          <textarea id="errorMoreInfo" hidden="true" readonly="readonly"></textarea>
        </div>
      </div> <!-- mainContainer -->

      <div id="overlayContainer" class="hidden">
        <div id="passwordOverlay" class="container hidden">
          <div class="dialog">
            <div class="row">
              <p id="passwordText" data-l10n-id="password_label">Enter the password to open this PDF file.</p>
            </div>
            <div class="row">
              <input type="password" id="password" class="toolbarField">
            </div>
            <div class="buttonRow">
              <button id="passwordCancel" class="overlayButton"><span data-l10n-id="password_cancel">Cancel</span></button>
              <button id="passwordSubmit" class="overlayButton"><span data-l10n-id="password_ok">OK</span></button>
            </div>
          </div>
        </div>
        <div id="documentPropertiesOverlay" class="container hidden">
          <div class="dialog">
            <div class="row">
              <span data-l10n-id="document_properties_file_name">File name:</span> <p id="fileNameField">-</p>
            </div>
            <div class="row">
              <span data-l10n-id="document_properties_file_size">File size:</span> <p id="fileSizeField">-</p>
            </div>
            <div class="separator"></div>
            <div class="row">
              <span data-l10n-id="document_properties_title">Title:</span> <p id="titleField">-</p>
            </div>
            <div class="row">
              <span data-l10n-id="document_properties_author">Author:</span> <p id="authorField">-</p>
            </div>
            <div class="row">
              <span data-l10n-id="document_properties_subject">Subject:</span> <p id="subjectField">-</p>
            </div>
            <div class="row">
              <span data-l10n-id="document_properties_keywords">Keywords:</span> <p id="keywordsField">-</p>
            </div>
            <div class="row">
              <span data-l10n-id="document_properties_creation_date">Creation Date:</span> <p id="creationDateField">-</p>
            </div>
            <div class="row">
              <span data-l10n-id="document_properties_modification_date">Modification Date:</span> <p id="modificationDateField">-</p>
            </div>
            <div class="row">
              <span data-l10n-id="document_properties_creator">Creator:</span> <p id="creatorField">-</p>
            </div>
            <div class="separator"></div>
            <div class="row">
              <span data-l10n-id="document_properties_producer">PDF Producer:</span> <p id="producerField">-</p>
            </div>
            <div class="row">
              <span data-l10n-id="document_properties_version">PDF Version:</span> <p id="versionField">-</p>
            </div>
            <div class="row">
              <span data-l10n-id="document_properties_page_count">Page Count:</span> <p id="pageCountField">-</p>
            </div>
            <div class="row">
              <span data-l10n-id="document_properties_page_size">Page Size:</span> <p id="pageSizeField">-</p>
            </div>
            <div class="separator"></div>
            <div class="row">
              <span data-l10n-id="document_properties_linearized">Fast Web View:</span> <p id="linearizedField">-</p>
            </div>
            <div class="buttonRow">
              <button id="documentPropertiesClose" class="overlayButton"><span data-l10n-id="document_properties_close">Close</span></button>
            </div>
          </div>
        </div>
        <div id="printServiceOverlay" class="container hidden">
          <div class="dialog">
            <div class="row">
              <span data-l10n-id="print_progress_message">Preparing document for printing…</span>
            </div>
            <div class="row">
              <progress value="0" max="100"></progress>
              <span data-l10n-id="print_progress_percent" data-l10n-args="{ &quot;progress&quot;: 0 }" class="relative-progress">0%</span>
            </div>
            <div class="buttonRow">
              <button id="printCancel" class="overlayButton"><span data-l10n-id="print_progress_close">Cancel</span></button>
            </div>
          </div>
        </div>
<div id="chromeFileAccessOverlay" class="container hidden">
  <div class="dialog">
    <div class="row">
      <!-- The extension icon (PDF.js logo) will be shown at the left, to help
           users with recognizing which checkbox they have to click when they
           visit chrome://extensions.
      -->
      <p id="chrome-pdfjs-logo-bg" style="
          display: block;
          padding-left: 60px;
          min-height: 48px;
          background-size: 48px;
          background-repeat: no-repeat;
          font-size: 14px;
          line-height: 1.8em;
          word-break: break-all;">
        Click on
        "<span id="chrome-file-access-label">Allow access to file URLs</span>"
        at
        <a id="chrome-link-to-extensions-page">chrome://extensions</a>
        <br>
        to view <span id="chrome-url-of-local-file">this PDF file.</span>
      </p>
    </div>
    <div class="row">
      <p>
        or select the file again:
        <input type="file" id="chrome-file-fallback" accept=".pdf">
      </p>
    </div>
  </div>
</div>

      </div>  <!-- overlayContainer -->

    </div> <!-- outerContainer -->
    <div id="printContainer"></div>
  


</body></html>